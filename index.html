<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Revision Hub ‚Äì ACC & Belonging</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <style>
    :root {
      --bg: #050816;
      --bg-soft: #0a1020;
      --panel: #0d1224;
      --panel-soft: #121932;
      --accent: #8b5cf6;
      --accent-soft: rgba(139, 92, 246, 0.14);
      --accent-strong: #a855f7;
      --border: #1e293b;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --radius-lg: 18px;
      --radius-md: 12px;
      --shadow: 0 14px 40px rgba(0, 0, 0, 0.75);
      --fast: 0.12s ease-out;
      --med: 0.2s ease-out;
    }

    * {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #020617 0, #020617 50%, #000 100%);
      color: var(--text);
      -webkit-font-smoothing: antialiased;
      display: flex;
      flex-direction: column;
    }

    header {
      position: sticky;
      top: 0;
      z-index: 20;
      background: rgba(2, 6, 23, 0.95);
      backdrop-filter: blur(14px);
      border-bottom: 1px solid rgba(148, 163, 184, 0.3);
      padding: 10px 16px 6px;
    }

    .header-inner {
      max-width: 980px;
      margin: 0 auto;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
    }

    .title-block {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .logo-row {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .logo-dot {
      width: 18px;
      height: 18px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #e5e7eb, #a855f7 55%, #4c1d95 80%);
      box-shadow:
        0 0 18px rgba(168, 85, 247, 0.8),
        0 0 32px rgba(59, 130, 246, 0.6);
    }

    .app-title {
      font-size: 18px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
    }

    .subtitle {
      font-size: 11px;
      color: var(--muted);
    }

    .nav-tabs {
      display: flex;
      gap: 6px;
      padding: 4px;
      background: rgba(15, 23, 42, 0.9);
      border-radius: 999px;
      border: 1px solid rgba(51, 65, 85, 0.9);
    }

    .nav-tab {
      border: none;
      background: transparent;
      color: var(--muted);
      padding: 6px 14px;
      font-size: 12px;
      border-radius: 999px;
      cursor: pointer;
      white-space: nowrap;
      transition: background var(--fast), color var(--fast), transform var(--fast);
    }

    .nav-tab.active {
      background: var(--accent-soft);
      color: #f9fafb;
      transform: translateY(-0.5px);
    }

    .nav-tab span {
      margin-right: 4px;
    }

    main {
      flex: 1;
      padding: 10px 14px 16px;
      display: flex;
      justify-content: center;
    }

    .main-inner {
      max-width: 980px;
      width: 100%;
    }

    section.view {
      display: none;
      min-height: calc(100vh - 90px);
    }

    section.view.active {
      display: block;
    }

    .panel {
      background: linear-gradient(145deg, var(--panel) 0%, var(--panel-soft) 100%);
      border-radius: var(--radius-lg);
      border: 1px solid rgba(51, 65, 85, 0.9);
      box-shadow: var(--shadow);
      padding: 14px 14px 16px;
      margin-bottom: 12px;
    }

    @media (min-width: 900px) {
      .panel {
        padding: 16px 18px 18px;
      }
    }

    .panel-header {
      display: flex;
      justify-content: space-between;
      gap: 8px;
      align-items: baseline;
      margin-bottom: 8px;
    }

    .panel-header h2 {
      margin: 0;
      font-size: 15px;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: #e5e7f5;
    }

    .panel-header small {
      font-size: 11px;
      color: var(--muted);
    }

    .panel-body {
      font-size: 13px;
      color: var(--text);
    }

    h3 {
      margin: 8px 0 4px;
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: #c4b5fd;
    }

    p {
      margin: 4px 0;
      line-height: 1.5;
    }

    .muted {
      color: var(--muted);
      font-size: 12px;
    }

    .grid-two {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1fr);
      gap: 10px;
    }

    @media (max-width: 820px) {
      .grid-two {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    ul.clean {
      list-style: none;
      padding-left: 0;
      margin: 4px 0 0;
      font-size: 13px;
    }

    ul.clean li {
      margin-bottom: 4px;
      display: flex;
      gap: 6px;
    }

    ul.clean li span.b {
      color: var(--accent-strong);
      font-size: 12px;
      margin-top: 1px;
    }

    .quote-list {
      border-radius: var(--radius-md);
      border: 1px solid rgba(51, 65, 85, 0.9);
      background: rgba(15, 23, 42, 0.65);
      padding: 8px 10px;
      margin-top: 4px;
    }

    .quote-item {
      margin-bottom: 6px;
    }

    .quote-text {
      font-style: italic;
      font-size: 13px;
    }

    .quote-note {
      font-size: 12px;
      color: var(--muted);
    }

    /* FLASHCARDS */
    .fc-top-row {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
    }

    .fc-top-row label {
      font-size: 12px;
      color: var(--muted);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    select, textarea {
      background: rgba(15, 23, 42, 0.9);
      border-radius: 12px;
      border: 1px solid var(--border);
      color: var(--text);
      padding: 7px 10px;
      font-size: 13px;
      outline: none;
      width: 100%;
      transition: border var(--fast), box-shadow var(--fast), background var(--fast);
    }

    select:focus, textarea:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(139, 92, 246, 0.8);
      background: #020617;
    }

    .pill-info {
      font-size: 11px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(75, 85, 99, 0.9);
      color: var(--muted);
    }

    .flashcard-box {
      border-radius: 18px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: radial-gradient(circle at top left, #111827 0%, #020617 70%);
      padding: 14px 14px 12px;
      min-height: 180px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      cursor: pointer;
      transition: transform var(--fast), box-shadow var(--fast), border-color var(--fast);
    }

    .flashcard-box:active {
      transform: scale(0.99);
    }

    .flashcard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 11px;
      color: var(--muted);
      margin-bottom: 6px;
    }

    .flashcard-tag {
      padding: 3px 9px;
      border-radius: 999px;
      border: 1px solid rgba(99, 102, 241, 0.9);
      background: rgba(15, 23, 42, 0.95);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .tag-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: var(--accent-strong);
      box-shadow:
        0 0 10px rgba(139, 92, 246, 0.9),
        0 0 18px rgba(59, 130, 246, 0.8);
    }

    .flashcard-text {
      font-size: 15px;
      line-height: 1.6;
      white-space: pre-wrap;
    }

    .flashcard-text.empty {
      font-style: italic;
      color: var(--muted);
      font-size: 13px;
    }

    .flashcard-footer {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 8px;
      font-size: 11px;
      color: var(--muted);
    }

    .fc-controls {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    button {
      border-radius: 999px;
      border: 1px solid rgba(75, 85, 99, 0.9);
      background: rgba(15, 23, 42, 0.95);
      color: var(--text);
      font-size: 12px;
      padding: 7px 12px;
      cursor: pointer;
      display: inline-flex;
      gap: 6px;
      align-items: center;
      transition: background var(--fast), border var(--fast), transform var(--fast), box-shadow var(--fast);
    }

    button span.icon {
      font-size: 13px;
    }

    button.primary {
      border-color: rgba(129, 140, 248, 0.95);
      background: linear-gradient(135deg, #4f46e5, #8b5cf6);
    }

    button:hover {
      transform: translateY(-0.5px);
      box-shadow: 0 0 12px rgba(15, 23, 42, 0.9);
    }

    button:active {
      transform: translateY(0.5px) scale(0.98);
      box-shadow: none;
    }

    .switch {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      color: var(--muted);
    }

    .switch input {
      appearance: none;
      width: 28px;
      height: 16px;
      border-radius: 999px;
      border: 1px solid rgba(75, 85, 99, 0.9);
      background: rgba(15, 23, 42, 0.95);
      position: relative;
      cursor: pointer;
      outline: none;
      transition: background var(--fast), border var(--fast);
    }

    .switch input::before {
      content: "";
      position: absolute;
      top: 1px;
      left: 2px;
      width: 12px;
      height: 12px;
      border-radius: 999px;
      background: #f9fafb;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.7);
      transition: transform var(--fast);
    }

    .switch input:checked {
      background: linear-gradient(135deg, #4f46e5, #8b5cf6);
      border-color: rgba(129, 140, 248, 0.9);
    }

    .switch input:checked::before {
      transform: translateX(10px);
    }

    details {
      margin-top: 4px;
    }

    details summary {
      font-size: 12px;
      color: var(--muted);
      cursor: pointer;
      list-style: none;
    }

    details summary::-webkit-details-marker {
      display: none;
    }

    .summary-row {
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .summary-row span.chevron {
      font-size: 12px;
    }

    .edit-grid {
      margin-top: 8px;
      display: grid;
      grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
      gap: 8px;
    }

    @media (max-width: 700px) {
      .edit-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    textarea {
      min-height: 70px;
    }

    .edit-actions {
      margin-top: 8px;
      display: flex;
      justify-content: space-between;
      gap: 8px;
      flex-wrap: wrap;
      font-size: 11px;
      color: var(--muted);
    }

    .card-list {
      margin-top: 8px;
      border-radius: 12px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      max-height: 210px;
      overflow: hidden auto;
      font-size: 12px;
    }

    .card-row {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.1fr) 70px;
      gap: 6px;
      padding: 6px 8px;
      align-items: center;
    }

    .card-row:nth-child(odd) {
      background: rgba(15, 23, 42, 0.9);
    }

    .card-row:nth-child(even) {
      background: rgba(17, 24, 39, 0.95);
    }

    .card-cell {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .card-list-header {
      position: sticky;
      top: 0;
      z-index: 1;
      background: #020617;
      border-bottom: 1px solid rgba(75, 85, 99, 0.95);
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      padding: 6px 8px;
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.1fr) 70px;
      gap: 6px;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      padding: 3px 9px;
      border-radius: 999px;
      border: 1px solid rgba(75, 85, 99, 0.9);
      background: rgba(15, 23, 42, 0.9);
      color: var(--muted);
    }

    .badge-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 10px rgba(34, 197, 94, 0.9);
    }

    code {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
        "Liberation Mono", "Courier New", monospace;
      font-size: 11px;
      background: rgba(15, 23, 42, 0.9);
      padding: 2px 6px;
      border-radius: 999px;
      border: 1px solid rgba(51, 65, 85, 0.9);
    }

    @media (max-width: 480px) {
      header {
        padding-inline: 10px;
      }
      main {
        padding-inline: 10px;
      }
      .panel {
        padding-inline: 12px;
      }
      .nav-tabs {
        width: 100%;
        justify-content: space-between;
      }
      .nav-tab {
        flex: 1;
        text-align: center;
        padding-inline: 8px;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="header-inner">
      <div class="title-block">
        <div class="logo-row">
          <div class="logo-dot"></div>
          <div class="app-title">REVISION HUB</div>
        </div>
        <div class="subtitle">A Christmas Carol ¬∑ Belonging Anthology ¬∑ English papers</div>
      </div>
      <nav class="nav-tabs">
        <button class="nav-tab active" data-view="acc">
          <span>üìò</span> ACC
        </button>
        <button class="nav-tab" data-view="flashcards">
          <span>üÉè</span> Flashcards
        </button>
        <button class="nav-tab" data-view="papers">
          <span>üìù</span> Papers
        </button>
      </nav>
    </div>
  </header>

  <main>
    <div class="main-inner">
      <!-- ACC FRONT PAGE -->
      <section id="view-acc" class="view active">
        <div class="panel">
          <div class="panel-header">
            <div>
              <h2>A Christmas Carol ‚Äì overview</h2>
              <small>Structure, themes, and how to revise it</small>
            </div>
          </div>
          <div class="panel-body">
            <div class="grid-two">
              <div>
                <h3>5-stave structure</h3>
                <ul class="clean">
                  <li><span class="b">1</span><span><strong>Marley‚Äôs Ghost:</strong> Scrooge introduced; refuses charity; visited by Marley who warns him.</span></li>
                  <li><span class="b">2</span><span><strong>Past:</strong> Childhood loneliness, Fezziwig‚Äôs party, Belle breaking off the engagement.</span></li>
                  <li><span class="b">3</span><span><strong>Present:</strong> Cratchit family, Tiny Tim, Fred‚Äôs party, Ignorance and Want.</span></li>
                  <li><span class="b">4</span><span><strong>Yet to Come:</strong> People reacting to Scrooge‚Äôs death; neglected grave; fear + regret.</span></li>
                  <li><span class="b">5</span><span><strong>Redemption:</strong> Scrooge wakes changed; generosity to Cratchits; becomes ‚Äúas good a man‚Äù.</span></li>
                </ul>

                <p class="muted" style="margin-top:8px;">
                  Fast revision idea: make one mini paragraph plan per stave ‚Äì what happens, what Scrooge learns, and one key quote.
                </p>
              </div>
              <div>
                <h3>Big themes</h3>
                <ul class="clean">
                  <li><span class="b">‚òÖ</span><span><strong>Responsibility to others</strong> ‚Äì Marley and the spirits show that ‚Äúmankind‚Äù should be Scrooge‚Äôs ‚Äúbusiness‚Äù.</span></li>
                  <li><span class="b">‚òÖ</span><span><strong>Poverty and charity</strong> ‚Äì Cratchits, Tiny Tim, Ignorance and Want criticise Victorian attitudes to the poor.</span></li>
                  <li><span class="b">‚òÖ</span><span><strong>Family and companionship</strong> ‚Äì Fred and the Cratchits contrast Scrooge‚Äôs isolation.</span></li>
                  <li><span class="b">‚òÖ</span><span><strong>Redemption</strong> ‚Äì it‚Äôs never ‚Äútoo late‚Äù to change if you accept responsibility for the past.</span></li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <div class="panel">
          <div class="panel-header">
            <div>
              <h2>Key ACC quotes (already in cards)</h2>
              <small>Front = quote ¬∑ back = who / where / what it shows</small>
            </div>
            <button id="go-to-acc-cards" class="primary">
              <span class="icon">üÉè</span> Open ACC deck
            </button>
          </div>
          <div class="panel-body">
            <div class="quote-list">
              <div class="quote-item">
                <div class="quote-text">‚ÄúMarley was dead: to begin with.‚Äù</div>
                <div class="quote-note">Opens the novella; confirms Marley‚Äôs death and sets up the ghost story.</div>
              </div>
              <div class="quote-item">
                <div class="quote-text">‚ÄúAs solitary as an oyster.‚Äù</div>
                <div class="quote-note">Simile ‚Äì Scrooge is closed and hard, but could contain a ‚Äúpearl‚Äù of goodness.</div>
              </div>
              <div class="quote-item">
                <div class="quote-text">‚ÄúIf they would rather die, they had better do it, and decrease the surplus population.‚Äù</div>
                <div class="quote-note">Scrooge‚Äôs cruel view of the poor; Dickens attacks this attitude.</div>
              </div>
              <div class="quote-item">
                <div class="quote-text">‚ÄúMankind was my business!‚Äù</div>
                <div class="quote-note">Marley‚Äôs regret ‚Äì real ‚Äúbusiness‚Äù is caring for others, not profit.</div>
              </div>
              <div class="quote-item">
                <div class="quote-text">‚ÄúGod bless us, every one!‚Äù</div>
                <div class="quote-note">Tiny Tim ‚Äì moral heart of the story; inclusive message.</div>
              </div>
              <div class="quote-item">
                <div class="quote-text">‚ÄúI am not the man I was.‚Äù</div>
                <div class="quote-note">Scrooge‚Äôs turning point; admits genuine change.</div>
              </div>
              <div class="quote-item">
                <div class="quote-text">‚ÄúHe became as good a friend, as good a master, and as good a man.‚Äù</div>
                <div class="quote-note">Narrator confirms his lasting redemption.</div>
              </div>
            </div>
            <p class="muted" style="margin-top:8px;">
              All of these are already in the <strong>‚ÄúACC ‚Äì Key Quotes‚Äù</strong> deck in the Flashcards tab ‚Äì you don‚Äôt need to type them.
            </p>
          </div>
        </div>
      </section>

      <!-- FLASHCARDS -->
      <section id="view-flashcards" class="view">
        <div class="panel">
          <div class="panel-header">
            <div>
              <h2>Flashcards ‚Äì study</h2>
              <small>ACC ¬∑ Belonging anthology ¬∑ English papers</small>
            </div>
          </div>
          <div class="panel-body">
            <div class="fc-top-row">
              <label>
                Deck
                <select id="deck-select"></select>
              </label>
              <span class="pill-info" id="deck-info">0 cards</span>
              <span class="badge">
                <span class="badge-dot"></span>
                Saved on this device only
              </span>
            </div>

            <div class="flashcard-box" id="study-card" title="Tap to flip">
              <div class="flashcard-header">
                <div class="flashcard-tag">
                  <span class="tag-dot"></span>
                  <span id="card-side-label">Front ¬∑ Question</span>
                </div>
                <span id="card-meta" class="muted"></span>
              </div>
              <div class="flashcard-text empty" id="card-text">
                No cards yet in this deck.
              </div>
              <div class="flashcard-footer">
                <span>
                  <strong id="card-position">0 / 0</strong>
                  ¬∑ deck: <span id="deck-name-label">‚Äî</span>
                </span>
                <span class="muted">
                  Tap to flip ¬∑ <code>space</code> flip ¬∑ <code>‚Üê / ‚Üí</code> move
                </span>
              </div>
            </div>

            <div class="fc-controls">
              <button id="fc-restart" class="primary">
                <span class="icon">‚ñ∂</span> Start / restart
              </button>
              <button id="fc-prev">
                ‚óÄ Prev
              </button>
              <button id="fc-next">
                Next ‚ñ∂
              </button>
              <button id="fc-flip">
                ‚ü≤ Flip
              </button>
              <div class="switch">
                <input type="checkbox" id="fc-shuffle" />
                <label for="fc-shuffle">Shuffle</label>
              </div>
            </div>
          </div>
        </div>

        <div class="panel">
          <div class="panel-header">
            <div>
              <h2>Edit / add cards</h2>
              <small>Optional ‚Äì defaults are already filled for you</small>
            </div>
          </div>
          <div class="panel-body">
            <details>
              <summary>
                <span class="summary-row">
                  <span class="chevron">‚ñ∏</span>
                  <span>Open editor</span>
                </span>
              </summary>
              <div>
                <div class="edit-grid">
                  <div>
                    <div class="muted">Front (question / cue)</div>
                    <textarea id="edit-front" placeholder="e.g. Who says &quot;God bless us, every one!&quot;?"></textarea>
                  </div>
                  <div>
                    <div class="muted">Back (answer / explanation)</div>
                    <textarea id="edit-back" placeholder="Tiny Tim ‚Äì Stave 3, symbol of innocence and generosity."></textarea>
                  </div>
                </div>
                <div class="edit-actions">
                  <div>
                    <button id="save-card" class="primary">
                      <span class="icon">Ôºã</span> Save card
                    </button>
                    <button id="clear-card">
                      Clear
                    </button>
                  </div>
                  <div>
                    <span>Editing deck: <strong id="edit-deck-label">‚Äî</strong></span>
                  </div>
                </div>

                <div class="card-list" id="card-list">
                  <div class="card-list-header">
                    <div>Front</div>
                    <div>Back</div>
                    <div>Actions</div>
                  </div>
                  <!-- rows injected by JS -->
                </div>
                <p class="muted" style="margin-top:6px;">
                  You can tweak or add to the pre-made decks. Everything is stored in <code>localStorage</code> on your phone.
                </p>
              </div>
            </details>
          </div>
        </div>
      </section>

      <!-- PAPERS -->
      <section id="view-papers" class="view">
        <div class="panel">
          <div class="panel-header">
            <div>
              <h2>English papers ‚Äì quick breakdown</h2>
              <small>Use alongside the ‚ÄúEnglish Papers ‚Äì Overview‚Äù deck</small>
            </div>
          </div>
          <div class="panel-body">
            <div class="grid-two">
              <div>
                <h3>Literature</h3>
                <ul class="clean">
                  <li><span class="b">Lit P1</span><span>Shakespeare + 19th-century novel (<strong>A Christmas Carol</strong>). Extract on the page + links to whole text.</span></li>
                  <li><span class="b">Lit P2</span><span>Modern text, anthology poetry (e.g. <strong>Belonging</strong>), unseen poetry: one modern text essay, one comparison of two anthology poems, then unseen.</span></li>
                </ul>
                <p class="muted" style="margin-top:8px;">
                  Turn this into cards: paper name on the front, sections + marks + skills on the back.
                </p>
              </div>
              <div>
                <h3>Language</h3>
                <ul class="clean">
                  <li><span class="b">Lang P1</span><span>Reading a fiction extract (Q1‚Äì4) + descriptive / narrative writing (Q5).</span></li>
                  <li><span class="b">Lang P2</span><span>Two non-fiction texts (Q1‚Äì4) + viewpoint / transactional writing (Q5).</span></li>
                </ul>
                <p class="muted" style="margin-top:8px;">
                  The <strong>‚ÄúEnglish Papers ‚Äì Overview‚Äù</strong> deck already has structure + timing tips pre-loaded.
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </main>

  <script>
    // ---------- PRELOADED DECKS ----------
    const DEFAULT_DECKS = {
      "ACC ‚Äì Key Quotes": [
        {
          front: "\"Marley was dead: to begin with.\"",
          back: "Opening line. Establishes certainty of Marley's death and sets up the supernatural frame of the novella (Stave 1)."
        },
        {
          front: "\"As solitary as an oyster.\"",
          back: "Narrator describing Scrooge in Stave 1 ‚Äì isolated, hard and closed off, but with potential for change (a 'pearl' inside)."
        },
        {
          front: "\"Bah! Humbug!\"",
          back: "Scrooge rejecting Christmas in Stave 1 ‚Äì shows cynicism and lack of empathy for others."
        },
        {
          front: "\"If they would rather die, they had better do it, and decrease the surplus population.\"",
          back: "Scrooge talking about the poor in Stave 1 ‚Äì cruel, Malthusian attitude that Dickens attacks."
        },
        {
          front: "\"Mankind was my business!\"",
          back: "Marley's Ghost in Stave 1 ‚Äì regrets focusing on money instead of caring for others."
        },
        {
          front: "\"A solitary child, neglected by his friends.\"",
          back: "Narrator about young Scrooge in Stave 2 ‚Äì explains the roots of his loneliness and bitterness."
        },
        {
          front: "\"Another idol has displaced me... a golden one.\"",
          back: "Belle in Stave 2 ‚Äì says money has replaced love in Scrooge's life."
        },
        {
          front: "\"A jolly Giant, glorious to see.\"",
          back: "Description of the Ghost of Christmas Present (Stave 3) ‚Äì symbol of warmth, generosity and abundance."
        },
        {
          front: "\"God bless us, every one!\"",
          back: "Tiny Tim in Stave 3 ‚Äì innocent, inclusive blessing; moral centre of the novella."
        },
        {
          front: "\"This boy is Ignorance. This girl is Want.\"",
          back: "Ghost of Christmas Present in Stave 3 ‚Äì personifies social problems caused by neglecting the poor."
        },
        {
          front: "\"I am not the man I was.\"",
          back: "Scrooge in Stave 4 ‚Äì openly admits he has changed after what he has seen."
        },
        {
          front: "\"I will honour Christmas in my heart, and try to keep it all the year.\"",
          back: "Scrooge in Stave 4‚Äì5 ‚Äì promises lasting generosity, not just a one-off gesture."
        },
        {
          front: "\"He became as good a friend, as good a master, and as good a man.\"",
          back: "Narrator in Stave 5 ‚Äì confirms Scrooge's full redemption and new identity."
        }
      ],
      "Belonging ‚Äì All 15 Poems": [
        {
          front: "Captain Cook (To My Brother)",
          back: "Themes: memory, lost innocence, family. The speaker recalls childhood games about Captain Cook and realises how adult life and class expectations have damaged the carefree closeness with her brother."
        },
        {
          front: "Clear and Gentle Stream",
          back: "Themes: nature, happiness, peace. An idealised rural landscape; the stream symbolises calm, continuity and a simple, harmonious life that the speaker feels they belong to."
        },
        {
          front: "In Wales, Wanting to be Italian",
          back: "Themes: cultural identity, longing, performance. The speaker grows up in Wales but fantasises about being Italian ‚Äì using food, films and language to explore how we 'try on' identities to feel we belong."
        },
        {
          front: "I Remember, I Remember",
          back: "Themes: childhood vs adulthood, memory, disillusion. The speaker revisits his childhood home and realises the past was not as happy as he once believed, challenging nostalgic ideas of belonging."
        },
        {
          front: "Island Man",
          back: "Themes: migration, homesickness, split identity. Caribbean island dreams clash with grey London mornings; the speaker is caught between two homes and never feels fully rooted in either."
        },
        {
          front: "Jamaican British",
          back: "Themes: mixed heritage, language, exclusion. The speaker faces stereotypes about how a 'Jamaican British' person should look and sound, showing how accent, race and deafness affect belonging."
        },
        {
          front: "Kumukanda",
          back: "Themes: initiation, masculinity, diaspora. The title refers to a Zambian coming-of-age ritual; the speaker never completed it and feels 'unfinished', torn between African heritage and British upbringing."
        },
        {
          front: "Mild the Mist Upon the Hill",
          back: "Themes: memory, nature, mood. A Romantic poem where a soft, misty landscape mirrors a reflective, slightly melancholic mood; nature becomes a space of emotional belonging and calm."
        },
        {
          front: "My Mother‚Äôs Kitchen",
          back: "Themes: migration, inheritance, home. The cluttered kitchen objects symbolise a fragile but powerful sense of family and cultural roots passed down despite displacement and repeated moves."
        },
        {
          front: "Peckham Rye Lane",
          back: "Themes: city life, diversity, modern belonging. A busy South London street filled with noise and crowds; suggests belonging in messy, multicultural urban spaces rather than quiet countryside."
        },
        {
          front: "To My Sister",
          back: "Themes: family relationships, nature, encouragement. The speaker urges his sister to come outside and enjoy spring, presenting belonging as shared experience in the natural world and in sibling bonds."
        },
        {
          front: "The √âmigr√©e",
          back: "Themes: memory, exile, idealised homeland. The speaker remembers a city she left as a child; even though it became dangerous, her childlike love for it remains, showing how memory shapes belonging."
        },
        {
          front: "Sunday Dip",
          back: "Themes: childhood joy, nature, community. Vivid description of children bathing in a river; water symbolises freedom and shared rural belonging in the Romantic countryside."
        },
        {
          front: "Us",
          back: "Themes: language, intimacy, couple identity. A short, compressed poem about the tiny word 'us' and how a relationship creates a private world of belonging between two people."
        },
        {
          front: "We Refugees",
          back: "Themes: refugees, shared humanity, prejudice. Zephaniah uses a collective 'we' voice to show that anyone could become a refugee, challenging stereotypes and emphasising universal human belonging."
        }
      ],
      "English Papers ‚Äì Overview": [
        {
          front: "Literature Paper 1 ‚Äì what‚Äôs in it?",
          back: "Shakespeare + 19th-century novel. One essay on your Shakespeare play and one on A Christmas Carol. You get an extract and must link it to the whole text."
        },
        {
          front: "Literature Paper 2 ‚Äì what‚Äôs in it?",
          back: "Modern text, anthology poetry, unseen poetry. One essay on your modern text, one comparison of two anthology poems, then one unseen poem and a short comparison question."
        },
        {
          front: "Language Paper 1 ‚Äì question focus",
          back: "Q1‚Äì4: reading a fiction extract (information, language, structure, evaluation). Q5: descriptive or narrative writing based on a picture or prompt."
        },
        {
          front: "Language Paper 2 ‚Äì question focus",
          back: "Q1‚Äì4: reading two non-fiction texts and comparing ideas and methods. Q5: transactional writing (letter, article, speech etc.) giving your viewpoint."
        },
        {
          front: "Anthology comparison ‚Äì what do they want?",
          back: "Compare how two poets present the same theme. You must cover key ideas, language methods, structure and some context, with clear links between the poems."
        },
        {
          front: "Unseen poetry ‚Äì how to structure",
          back: "First paragraph: overall message + tone. Then 2‚Äì3 short paragraphs on key methods (imagery, structure, sound). Finish with a quick summary of how the poem answers the question."
        },
        {
          front: "Language Paper 2 Q5 ‚Äì easy plan",
          back: "Intro with clear viewpoint. 2‚Äì3 main paragraphs each with a strong argument and examples. Use persuasive techniques (triples, rhetorical questions) and finish with a powerful conclusion."
        },
        {
          front: "Timing tip for each paper",
          back: "Try to leave at least 40% of the paper time for the big writing question (Lang) or main essay (Lit). If you‚Äôre running out of time, write a quick conclusion instead of another paragraph."
        }
      ]
    };

    const STORAGE_KEY = "revHubDecks_v1";

    let decks = {};
    let currentDeckName = null;
    let studyOrder = [];
    let currentStudyIndex = 0;
    let showingFront = true;

    // ---------- NAV ----------
    const navTabs = document.querySelectorAll(".nav-tab");
    const views = {
      acc: document.getElementById("view-acc"),
      flashcards: document.getElementById("view-flashcards"),
      papers: document.getElementById("view-papers")
    };

    function setView(name) {
      Object.values(views).forEach(v => v.classList.remove("active"));
      if (views[name]) views[name].classList.add("active");
      navTabs.forEach(btn => {
        btn.classList.toggle("active", btn.dataset.view === name);
      });
    }

    navTabs.forEach(btn => {
      btn.addEventListener("click", () => {
        setView(btn.dataset.view);
      });
    });

    document.getElementById("go-to-acc-cards").addEventListener("click", () => {
      setView("flashcards");
      const deckSelect = document.getElementById("deck-select");
      if (decks["ACC ‚Äì Key Quotes"]) {
        currentDeckName = "ACC ‚Äì Key Quotes";
        deckSelect.value = currentDeckName;
        renderDeckInfo();
        resetStudyOrder();
        renderCardList();
      }
      window.scrollTo({ top: 0, behavior: "smooth" });
    });

    // ---------- STORAGE & INIT ----------
    function deepCopyDefaults() {
      return JSON.parse(JSON.stringify(DEFAULT_DECKS));
    }

    function loadDecks() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        if (raw) {
          const parsed = JSON.parse(raw);
          decks = parsed && typeof parsed === "object" ? parsed : {};
        } else {
          decks = {};
        }
      } catch (e) {
        decks = {};
      }

      // Merge in any missing default decks
      const defaults = deepCopyDefaults();
      for (const name in defaults) {
        if (!Object.prototype.hasOwnProperty.call(decks, name)) {
          decks[name] = defaults[name];
        }
      }

      const names = Object.keys(decks);
      if (!names.length) {
        decks = deepCopyDefaults();
      }
      if (!currentDeckName || !decks[currentDeckName]) {
        currentDeckName = "ACC ‚Äì Key Quotes";
        if (!decks[currentDeckName]) {
          currentDeckName = Object.keys(decks)[0];
        }
      }
      saveDecks();
    }

    function saveDecks() {
      try {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(decks));
      } catch (e) {
        // ignore
      }
    }

    // ---------- FLASHCARD UI ----------
    const deckSelectEl = document.getElementById("deck-select");
    const deckInfoEl = document.getElementById("deck-info");
    const deckNameLabelEl = document.getElementById("deck-name-label");
    const cardTextEl = document.getElementById("card-text");
    const cardSideLabelEl = document.getElementById("card-side-label");
    const cardMetaEl = document.getElementById("card-meta");
    const cardPositionEl = document.getElementById("card-position");
    const studyCardEl = document.getElementById("study-card");
    const shuffleToggleEl = document.getElementById("fc-shuffle");

    const editFrontEl = document.getElementById("edit-front");
    const editBackEl = document.getElementById("edit-back");
    const editDeckLabelEl = document.getElementById("edit-deck-label");
    const cardListEl = document.getElementById("card-list");

    function renderDeckOptions() {
      deckSelectEl.innerHTML = "";
      const names = Object.keys(decks);
      names.forEach(name => {
        const opt = document.createElement("option");
        opt.value = name;
        opt.textContent = name;
        deckSelectEl.appendChild(opt);
      });
      if (!currentDeckName || !decks[currentDeckName]) {
        currentDeckName = names[0];
      }
      deckSelectEl.value = currentDeckName;
      renderDeckInfo();
      refreshStudyState();
      renderCardList();
    }

    function renderDeckInfo() {
      const cards = decks[currentDeckName] || [];
      deckInfoEl.textContent = `${cards.length} card${cards.length === 1 ? "" : "s"}`;
      deckNameLabelEl.textContent = currentDeckName || "‚Äî";
      editDeckLabelEl.textContent = currentDeckName || "‚Äî";
    }

    function resetStudyOrder() {
      const cards = decks[currentDeckName] || [];
      studyOrder = cards.map((_, i) => i);
      if (shuffleToggleEl.checked) {
        for (let i = studyOrder.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [studyOrder[i], studyOrder[j]] = [studyOrder[j], studyOrder[i]];
        }
      }
      currentStudyIndex = 0;
      showingFront = true;
      refreshStudyState();
    }

    function refreshStudyState() {
      const cards = decks[currentDeckName] || [];
      renderDeckInfo();

      if (!cards.length) {
        cardTextEl.textContent = "No cards yet in this deck.";
        cardTextEl.classList.add("empty");
        cardSideLabelEl.textContent = "Front ¬∑ Question";
        cardMetaEl.textContent = "";
        cardPositionEl.textContent = "0 / 0";
        return;
      }

      if (!studyOrder.length || studyOrder.length !== cards.length) {
        studyOrder = cards.map((_, i) => i);
      }

      if (currentStudyIndex < 0) currentStudyIndex = 0;
      if (currentStudyIndex >= studyOrder.length) currentStudyIndex = studyOrder.length - 1;

      const cardIndex = studyOrder[currentStudyIndex];
      const card = cards[cardIndex];

      const text = showingFront ? card.front : card.back;
      cardTextEl.textContent = text || "(empty)";
      cardTextEl.classList.toggle("empty", !text);

      cardSideLabelEl.textContent = showingFront ? "Front ¬∑ Question" : "Back ¬∑ Answer";
      cardMetaEl.textContent = `Card ${cardIndex + 1} in deck`;
      cardPositionEl.textContent = `${currentStudyIndex + 1} / ${cards.length}`;
    }

    function flipCard() {
      const cards = decks[currentDeckName] || [];
      if (!cards.length) return;
      showingFront = !showingFront;
      refreshStudyState();
    }

    function moveCard(delta) {
      const cards = decks[currentDeckName] || [];
      if (!cards.length) return;
      currentStudyIndex += delta;
      if (currentStudyIndex < 0) currentStudyIndex = cards.length - 1;
      if (currentStudyIndex >= cards.length) currentStudyIndex = 0;
      showingFront = true;
      refreshStudyState();
    }

    // ---------- EDITOR ----------
    function clearEditForm() {
      editFrontEl.value = "";
      editBackEl.value = "";
      delete editFrontEl.dataset.index;
    }

    function renderCardList() {
      const cards = decks[currentDeckName] || [];
      const oldRows = Array.from(cardListEl.children).slice(1);
      oldRows.forEach(r => r.remove());

      cards.forEach((card, idx) => {
        const row = document.createElement("div");
        row.className = "card-row";

        const frontCell = document.createElement("div");
        frontCell.className = "card-cell";
        frontCell.textContent = card.front || "(front empty)";

        const backCell = document.createElement("div");
        backCell.className = "card-cell";
        backCell.textContent = card.back || "(back empty)";

        const actionsCell = document.createElement("div");

        const editBtn = document.createElement("button");
        editBtn.textContent = "Edit";
        editBtn.style.fontSize = "11px";
        editBtn.addEventListener("click", () => {
          editFrontEl.value = card.front || "";
          editBackEl.value = card.back || "";
          editFrontEl.dataset.index = String(idx);
        });

        const delBtn = document.createElement("button");
        delBtn.textContent = "‚úï";
        delBtn.style.fontSize = "11px";
        delBtn.addEventListener("click", () => {
          if (!confirm("Delete this card?")) return;
          decks[currentDeckName].splice(idx, 1);
          saveDecks();
          resetStudyOrder();
          renderCardList();
        });

        actionsCell.appendChild(editBtn);
        actionsCell.appendChild(delBtn);

        row.appendChild(frontCell);
        row.appendChild(backCell);
        row.appendChild(actionsCell);

        cardListEl.appendChild(row);
      });
    }

    // ---------- EVENT LISTENERS ----------
    deckSelectEl.addEventListener("change", () => {
      currentDeckName = deckSelectEl.value;
      resetStudyOrder();
      renderCardList();
    });

    document.getElementById("fc-restart").addEventListener("click", resetStudyOrder);
    document.getElementById("fc-prev").addEventListener("click", () => moveCard(-1));
    document.getElementById("fc-next").addEventListener("click", () => moveCard(1));
    document.getElementById("fc-flip").addEventListener("click", flipCard);
    shuffleToggleEl.addEventListener("change", resetStudyOrder);
    studyCardEl.addEventListener("click", flipCard);

    document.getElementById("save-card").addEventListener("click", () => {
      const front = editFrontEl.value.trim();
      const back = editBackEl.value.trim();
      if (!front && !back) {
        alert("Add something to the front or back first.");
        return;
      }
      const cards = decks[currentDeckName] || [];
      const idxStr = editFrontEl.dataset.index;
      if (idxStr !== undefined) {
        const idx = parseInt(idxStr, 10);
        if (!Number.isNaN(idx) && cards[idx]) {
          cards[idx] = { front, back };
        }
      } else {
        cards.push({ front, back });
      }
      decks[currentDeckName] = cards;
      saveDecks();
      clearEditForm();
      resetStudyOrder();
      renderCardList();
    });

    document.getElementById("clear-card").addEventListener("click", clearEditForm);

    window.addEventListener("keydown", (e) => {
      const tag = e.target.tagName;
      if (tag === "TEXTAREA" || tag === "INPUT" || tag === "SELECT") return;

      if (e.key === " " || e.key === "Spacebar") {
        e.preventDefault();
        flipCard();
      } else if (e.key === "ArrowRight") {
        e.preventDefault();
        moveCard(1);
      } else if (e.key === "ArrowLeft") {
        e.preventDefault();
        moveCard(-1);
      } else if (e.key === "Enter") {
        e.preventDefault();
        resetStudyOrder();
      }
    });

    // ---------- START ----------
    loadDecks();
    renderDeckOptions();
    setView("acc");
  </script>
</body>
</html>
