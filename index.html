<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ACC & Belonging â€“ Revision Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #020617;
      --panel: #050814;
      --panel-soft: #070915;
      --accent: #dc2626;
      --accent-soft: rgba(220, 38, 38, 0.2);
      --accent-strong: #f97373;
      --text: #f9fafb;
      --muted: #9ca3af;
      --border: rgba(148, 163, 184, 0.35);
      --radius-lg: 18px;
      --radius-md: 12px;
      --radius-pill: 999px;
      --shadow: 0 22px 50px rgba(0, 0, 0, 0.75);
      --fast: 0.16s ease-out;
    }

    * {
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
      background:
        radial-gradient(circle at top, rgba(127, 29, 29, 0.3), transparent 55%),
        radial-gradient(circle at bottom, rgba(15, 23, 42, 0.7), transparent 60%),
        var(--bg);
      color: var(--text);
      display: flex;
      justify-content: center;
    }

    .app {
      width: 100%;
      max-width: 860px;
      padding: 18px 12px 32px;
    }

    @media (min-width: 720px) {
      .app {
        padding: 24px 16px 40px;
      }
    }

    header {
      border-radius: var(--radius-lg);
      background: linear-gradient(135deg, #020617, #050814);
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
      padding: 12px 14px;
      position: sticky;
      top: 0;
      z-index: 10;
      backdrop-filter: blur(14px);
    }

    .header-main {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-bottom: 8px;
      flex-wrap: wrap;
    }

    .title-block {
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    .title-row {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .logo-dot {
      width: 11px;
      height: 11px;
      border-radius: 50%;
      background: radial-gradient(circle at center, #fee2e2, #b91c1c);
      box-shadow:
        0 0 18px rgba(248, 113, 113, 0.95),
        0 0 30px rgba(248, 113, 113, 0.7);
    }

    .app-title {
      font-size: 1rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .subtitle {
      font-size: 0.78rem;
      color: var(--muted);
    }

    .quick-buttons {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
    }

    .chip {
      border-radius: var(--radius-pill);
      border: 1px solid rgba(148, 163, 184, 0.6);
      background: #020617;
      color: var(--text);
      font-size: 0.74rem;
      padding: 4px 9px;
      display: inline-flex;
      align-items: center;
      gap: 5px;
      cursor: pointer;
      transition: background var(--fast), transform var(--fast), box-shadow var(--fast);
    }

    .chip span.icon {
      font-size: 0.9rem;
    }

    .chip.primary {
      border-color: rgba(248, 113, 113, 0.9);
      background: radial-gradient(circle at top, rgba(127, 29, 29, 0.9), #020617);
      box-shadow: 0 10px 26px rgba(127, 29, 29, 0.85);
    }

    .chip:active {
      transform: scale(0.97) translateY(1px);
      box-shadow: none;
    }

    .tabs {
      display: flex;
      gap: 6px;
      padding: 4px;
      border-radius: var(--radius-pill);
      background: #020617;
      border: 1px solid rgba(30, 64, 175, 0.3);
    }

    .tab {
      flex: 1;
      border-radius: var(--radius-pill);
      border: none;
      background: transparent;
      color: var(--muted);
      font-size: 0.78rem;
      padding: 5px 6px;
      cursor: pointer;
      transition: background var(--fast), color var(--fast), transform var(--fast);
    }

    .tab.active {
      background: var(--accent-soft);
      color: var(--text);
      transform: translateY(-0.5px);
    }

    main {
      margin-top: 16px;
    }

    .panel {
      border-radius: var(--radius-lg);
      background: var(--panel);
      border: 1px solid rgba(31, 41, 55, 0.9);
      box-shadow: var(--shadow);
      padding: 14px 14px 16px;
    }

    @media (min-width: 720px) {
      .panel {
        padding: 16px 18px 18px;
      }
    }

    .panel + .panel {
      margin-top: 12px;
    }

    .section-title {
      margin: 0 0 8px;
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 0.13em;
      color: #fee2e2;
    }

    .section-sub {
      font-size: 0.76rem;
      color: var(--muted);
      margin-bottom: 10px;
    }

    .two-col {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.1fr);
      gap: 10px;
    }

    @media (max-width: 720px) {
      .two-col {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    ul.clean {
      list-style: none;
      margin: 0;
      padding-left: 0;
      font-size: 0.8rem;
      color: #e5e7eb;
    }

    ul.clean li + li {
      margin-top: 3px;
    }

    ul.clean li span.tag {
      display: inline-block;
      min-width: 60px;
      font-size: 0.72rem;
      color: var(--accent-strong);
    }

    .small {
      font-size: 0.76rem;
      color: var(--muted);
    }

    /* Controls */

    .controls-row {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      margin-bottom: 8px;
    }

    .control-block {
      display: flex;
      align-items: center;
      gap: 6px;
      flex-wrap: wrap;
      font-size: 0.78rem;
      color: var(--muted);
    }

    .select-wrap {
      position: relative;
      display: inline-flex;
      align-items: center;
    }

    select {
      border-radius: var(--radius-pill);
      border: 1px solid rgba(55, 65, 81, 0.9);
      background:
        radial-gradient(circle at top, rgba(127, 29, 29, 0.5), transparent 55%),
        #020617;
      color: var(--text);
      font-size: 0.78rem;
      padding: 5px 26px 5px 9px;
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
      min-width: 130px;
    }

    .select-wrap::after {
      content: "â–¾";
      position: absolute;
      right: 9px;
      font-size: 0.7rem;
      color: var(--muted);
      pointer-events: none;
    }

    label.checkbox {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      font-size: 0.76rem;
      color: var(--muted);
    }

    label.checkbox input {
      width: 13px;
      height: 13px;
      accent-color: var(--accent);
    }

    /* Flashcard */

    .card-shell {
      border-radius: var(--radius-lg);
      background:
        radial-gradient(circle at top, rgba(127, 29, 29, 0.35), transparent 55%),
        #020617;
      border: 1px solid rgba(148, 163, 184, 0.6);
      box-shadow: var(--shadow);
      padding: 12px;
    }

    .flashcard {
      border-radius: var(--radius-md);
      background: #020617;
      border: 1px solid rgba(55, 65, 81, 0.9);
      min-height: 170px;
      max-height: 310px;
      padding: 10px 11px 12px;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      gap: 8px;
      overflow-y: auto;
      transition: transform var(--fast), box-shadow var(--fast), border-color var(--fast);
    }

    .flashcard:hover {
      transform: translateY(-1px);
      box-shadow: 0 16px 36px rgba(0, 0, 0, 0.9);
      border-color: rgba(248, 113, 113, 0.9);
    }

    .face-label {
      font-size: 0.72rem;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: rgba(248, 250, 252, 0.7);
    }

    .face-text {
      font-size: 0.92rem;
      line-height: 1.5;
      white-space: pre-line;
      color: #f9fafb;
    }

    .face-meta {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 6px;
      font-size: 0.74rem;
      color: var(--muted);
    }

    .face-meta span.deck {
      color: var(--accent-strong);
    }

    .hint {
      font-size: 0.72rem;
      color: var(--muted);
      margin-top: 6px;
    }

    .hint span {
      color: var(--accent-strong);
    }

    .footer-row {
      margin-top: 8px;
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      font-size: 0.76rem;
      color: var(--muted);
    }

    .progress {
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .progress-bar {
      width: 120px;
      height: 4px;
      border-radius: 999px;
      background: rgba(31, 41, 55, 0.95);
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      width: 0%;
      border-radius: inherit;
      background: linear-gradient(90deg, #ef4444, #fb923c);
      transition: width 0.2s ease-out;
    }

    .button-row {
      display: inline-flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .btn {
      border-radius: var(--radius-pill);
      border: 1px solid rgba(75, 85, 99, 0.9);
      background: #020617;
      color: var(--text);
      padding: 4px 10px;
      font-size: 0.76rem;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      cursor: pointer;
      transition: background var(--fast), transform var(--fast), box-shadow var(--fast);
    }

    .btn.primary {
      border-color: rgba(248, 113, 113, 0.9);
      background: radial-gradient(circle at top, rgba(127, 29, 29, 0.95), #020617);
      box-shadow: 0 8px 20px rgba(127, 29, 29, 0.8);
    }

    .btn:active {
      transform: scale(0.97) translateY(1px);
      box-shadow: none;
    }

    .btn.good {
      border-color: rgba(22, 163, 74, 0.9);
      color: #bbf7d0;
    }

    .btn.bad {
      border-color: rgba(248, 113, 113, 0.9);
      color: #fee2e2;
    }

    .stats-line {
      display: inline-flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .stat {
      display: inline-flex;
      gap: 4px;
      align-items: center;
    }

    .stat span.value {
      color: var(--accent-strong);
      font-weight: 600;
    }

    /* Question + sentence starters */

    .question-box {
      border-radius: var(--radius-md);
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: #020617;
      padding: 9px 10px;
      font-size: 0.8rem;
      color: #e5e7eb;
      margin-top: 6px;
    }

    .question-label {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--muted);
      margin-bottom: 4px;
    }

    .question-footer {
      margin-top: 6px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
      font-size: 0.72rem;
      color: var(--muted);
    }

    .starters-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.1fr);
      gap: 10px;
    }

    @media (max-width: 720px) {
      .starters-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .box {
      border-radius: var(--radius-md);
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: #020617;
      padding: 9px 10px;
      font-size: 0.8rem;
      color: #e5e7eb;
    }

    .box h3 {
      margin: 0 0 4px;
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: #fee2e2;
    }

    .box ul {
      margin: 4px 0 0;
      padding-left: 16px;
      font-size: 0.78rem;
    }

    .box li + li {
      margin-top: 3px;
    }

    .box code {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
        "Liberation Mono", "Courier New", monospace;
      font-size: 0.74rem;
      background: #020617;
      border-radius: 999px;
      padding: 1px 6px;
      border: 1px solid rgba(75, 85, 99, 0.9);
      color: #fee2e2;
    }

    /* Checklist & exam info */

    .poem-list {
      list-style: none;
      margin: 6px 0 0;
      padding-left: 0;
      font-size: 0.78rem;
      color: #e5e7eb;
      display: grid;
      grid-template-columns: minmax(0, 1fr);
      gap: 4px;
    }

    @media (min-width: 640px) {
      .poem-list {
        grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
      }
    }

    .poem-item {
      border-radius: 9px;
      border: 1px solid rgba(31, 41, 55, 0.95);
      background: #020617;
      padding: 4px 6px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .poem-item input {
      width: 13px;
      height: 13px;
      accent-color: var(--accent);
    }

    .exam-row {
      margin-top: 8px;
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      align-items: center;
      font-size: 0.78rem;
      color: var(--muted);
    }

    .exam-row input[type="date"] {
      border-radius: var(--radius-pill);
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: #020617;
      color: var(--text);
      font-size: 0.76rem;
      padding: 4px 8px;
    }

    /* Views */

    .view {
      display: none;
    }

    .view.active {
      display: block;
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div class="header-main">
        <div class="title-block">
          <div class="title-row">
            <div class="logo-dot"></div>
            <div class="app-title">ACC & Belonging â€“ Revision Hub</div>
          </div>
          <div class="subtitle">Black / dark red Â· AQA English Â· Year 11</div>
        </div>
        <div class="quick-buttons">
          <button class="chip primary" id="quick-acc">
            <span class="icon">ğŸ“–</span> ACC
          </button>
          <button class="chip" id="quick-belonging">
            <span class="icon">ğŸ“</span> Belonging
          </button>
          <button class="chip" id="quick-starters">
            <span class="icon">âœï¸</span> Starters
          </button>
        </div>
      </div>
      <div class="tabs">
        <button class="tab active" data-view="cards">Cards</button>
        <button class="tab" data-view="starters">Sentence starters</button>
        <button class="tab" data-view="checklist">Checklist & papers</button>
      </div>
    </header>

    <main>
      <!-- CARDS VIEW -->
      <section class="view active" id="view-cards">
        <div class="panel">
          <h2 class="section-title">A Christmas Carol â€“ quick map</h2>
          <p class="section-sub">Use this as a mental checklist, then hit the cards.</p>
          <div class="two-col">
            <div>
              <ul class="clean">
                <li><span class="tag">Stave 1</span><span>Miser Scrooge, â€œBah! Humbugâ€, refuses charity, Marley warns him about chains.</span></li>
                <li><span class="tag">Stave 2</span><span>Past â€“ lonely schoolboy, Fezziwigâ€™s party, Belle leaves when he chooses money.</span></li>
                <li><span class="tag">Stave 3</span><span>Present â€“ Cratchit Christmas, Tiny Tim, Ignorance and Want.</span></li>
                <li><span class="tag">Stave 4</span><span>Future â€“ people steal his things, no one cares heâ€™s dead, his grave.</span></li>
                <li><span class="tag">Stave 5</span><span>New Scrooge â€“ generous, helps Cratchits, â€œas good a manâ€.</span></li>
              </ul>
            </div>
            <div>
              <h3 class="section-sub" style="margin:0 0 4px;font-weight:600;">What to know</h3>
              <ul class="clean">
                <li>âœ” 2â€“3 quotes per stave</li>
                <li>âœ” how he changes from start â†’ end</li>
                <li>âœ” link to themes: poverty, family, responsibility, redemption</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="panel">
          <h2 class="section-title">Flashcards</h2>
          <p class="section-sub">ACC Â· Belonging quotes Â· sentence starters Â· exam tips</p>

          <div class="controls-row">
            <div class="control-block">
              <span>Deck</span>
              <div class="select-wrap">
                <select id="deck-select"></select>
              </div>
            </div>
            <div class="control-block">
              <span>Session</span>
              <div class="select-wrap">
                <select id="session-size">
                  <option value="5">5</option>
                  <option value="10" selected>10</option>
                  <option value="20">20</option>
                  <option value="all">All</option>
                </select>
              </div>
              <button class="btn" id="order-toggle">
                Order: <span id="order-label">Shuffled</span>
              </button>
              <label class="checkbox">
                <input type="checkbox" id="start-back" />
                Start on back
              </label>
            </div>
          </div>

          <div class="card-shell">
            <div id="flashcard" class="flashcard">
              <div id="face-label" class="face-label">Quote</div>
              <div id="face-text" class="face-text">
                Loading cardsâ€¦
              </div>
              <div class="face-meta">
                <span class="deck" id="deck-name"></span>
                <span id="card-index"></span>
              </div>
            </div>
            <div class="hint">
              Tap the card to <span>flip between quote and analysis / explanation.</span>
            </div>

            <div class="footer-row" style="margin-top:10px;">
              <div class="progress">
                <div class="progress-bar">
                  <div id="progress-fill" class="progress-fill"></div>
                </div>
                <span id="progress-label">0 / 0</span>
              </div>
              <div class="button-row">
                <button class="btn" id="prev-btn">â—€ Prev</button>
                <button class="btn" id="restart-btn">â†» Restart</button>
                <button class="btn primary" id="next-btn">Next â–¶</button>
              </div>
            </div>

            <div class="footer-row">
              <div class="button-row">
                <button class="btn good" id="got-btn">âœ“ Got it</button>
                <button class="btn bad" id="not-btn">? Not yet</button>
              </div>
              <div class="stats-line">
                <span class="stat">Got it: <span class="value" id="stat-known">0</span></span>
                <span class="stat">Not yet: <span class="value" id="stat-unsure">0</span></span>
              </div>
            </div>
          </div>
        </div>

        <div class="panel">
          <h2 class="section-title">ACC random exam question</h2>
          <div class="question-box">
            <div class="question-label">Practice prompt</div>
            <div id="acc-question">
              How does Dickens present Scroogeâ€™s attitude to the poor in Stave 1? Write about:
              â€¢ Scrooge â€¢ the poor â€¢ Dickensâ€™ message.
            </div>
            <div class="question-footer">
              <span>Plan: intro + 3 paragraphs + conclusion.</span>
              <button class="btn" id="new-q-btn">New question ğŸ²</button>
            </div>
          </div>
        </div>
      </section>

      <!-- STARTERS VIEW -->
      <section class="view" id="view-starters">
        <div class="panel">
          <h2 class="section-title">Sentence starters & structures</h2>
          <p class="section-sub">Use these in ACC essays, Belonging comparisons, unseen and Language Q5.</p>

          <div class="starters-grid">
            <div class="box">
              <h3>ACC & Lit paragraphs</h3>
              <ul>
                <li><code>Intro</code> â€“ â€œIn <em>A Christmas Carol</em>, Dickens presents <strong>[theme]</strong> asâ€¦ in order to show thatâ€¦â€</li>
                <li><code>Point</code> â€“ â€œAt the beginning of the novella, Scrooge is presented asâ€¦â€ / â€œLater on, Dickens develops this whenâ€¦â€</li>
                <li><code>Evidence</code> â€“ â€œThis is shown when Dickens writes, â€˜â€¦â€™ â€</li>
                <li><code>Zoom</code> â€“ â€œThe adjective â€˜â€¦â€™ suggests thatâ€¦â€ / â€œThe verb â€˜â€¦â€™ implies thatâ€¦â€</li>
                <li><code>Effect</code> â€“ â€œThis makes the reader feelâ€¦â€ / â€œThis highlights Dickensâ€™ criticism ofâ€¦â€</li>
                <li><code>Context</code> â€“ â€œThis would shock a Victorian reader becauseâ€¦â€</li>
                <li><code>Link</code> â€“ â€œOverall, Dickens uses this to show thatâ€¦â€</li>
              </ul>
            </div>

            <div class="box">
              <h3>Belonging anthology comparison</h3>
              <ul>
                <li><code>Compare start</code> â€“ â€œBoth poets explore <strong>[idea]</strong>, but in different ways.â€</li>
                <li><code>Similarity</code> â€“ â€œSimilarly, in <strong>[Poem B]</strong>, the poet also suggests thatâ€¦â€</li>
                <li><code>Difference</code> â€“ â€œHowever, unlike <strong>[Poem A]</strong>, <strong>[Poem B]</strong> presentsâ€¦â€</li>
                <li><code>Method</code> â€“ â€œThe poet uses imagery such as â€˜â€¦â€™ to show thatâ€¦â€</li>
                <li><code>Structure</code> â€“ â€œThe use of <strong>[enjambment / stanza break]</strong> here emphasisesâ€¦â€</li>
                <li><code>Conclusion</code> â€“ â€œOverall, while both poems presentâ€¦, <strong>[Poem X]</strong> suggests it isâ€¦, whereas <strong>[Poem Y]</strong>â€¦â€</li>
              </ul>
            </div>
          </div>

          <div class="starters-grid" style="margin-top:10px;">
            <div class="box">
              <h3>Unseen poetry</h3>
              <ul>
                <li><code>Opening</code> â€“ â€œThe poet presents <strong>[feeling / situation]</strong> asâ€¦ using imagery and structure to show thatâ€¦â€</li>
                <li><code>Idea para</code> â€“ â€œOne important idea in the poem is thatâ€¦â€</li>
                <li><code>Evidence</code> â€“ â€œThis is suggested by the phrase â€˜â€¦â€™ which implies thatâ€¦â€</li>
                <li><code>Method</code> â€“ â€œThe poetâ€™s use of <strong>[metaphor / rhyme / rhythm]</strong> creates a sense ofâ€¦â€</li>
                <li><code>Effect</code> â€“ â€œThis makes the reader think aboutâ€¦â€</li>
                <li><code>Second poem</code> â€“ â€œIn the second poem, the poet also exploresâ€¦, but presents it as moreâ€¦â€</li>
              </ul>
            </div>

            <div class="box">
              <h3>Language Paper 2 Q5</h3>
              <ul>
                <li><code>Intro</code> â€“ â€œI strongly believe thatâ€¦ becauseâ€¦â€ / â€œIn todayâ€™s society, it is essential thatâ€¦â€</li>
                <li><code>Para starts</code> â€“ â€œFirstly,â€¦â€, â€œSecondly,â€¦â€, â€œMost importantly,â€¦â€</li>
                <li><code>Develop</code> â€“ â€œFor example,â€¦â€, â€œThis shows thatâ€¦â€</li>
                <li><code>Persuade</code> â€“ â€œSurely we cannot ignoreâ€¦?â€ / â€œIs it really fair thatâ€¦?â€</li>
                <li><code>Counter</code> â€“ â€œSome people might argue thatâ€¦, however this is flawed becauseâ€¦â€</li>
                <li><code>Ending</code> â€“ â€œIn conclusion, if we want a future whereâ€¦, we mustâ€¦â€</li>
              </ul>
            </div>
          </div>

          <p class="small" style="margin-top:10px;">
            Thereâ€™s also a <strong>â€œSentence Starters & Structuresâ€</strong> deck in the Cards tab if you want these as flashcards.
          </p>
        </div>
      </section>

      <!-- CHECKLIST VIEW -->
      <section class="view" id="view-checklist">
        <div class="panel">
          <h2 class="section-title">Belonging anthology â€“ checklist</h2>
          <p class="section-sub">Tick poems when youâ€™re happy with quotes + what they show.</p>
          <ul class="poem-list" id="poem-list">
            <!-- filled by JS -->
          </ul>
        </div>

        <div class="panel">
          <h2 class="section-title">AQA English â€“ papers & countdown</h2>
          <p class="section-sub">Quick reminder of what each paper has, plus your own countdown.</p>
          <div class="two-col">
            <div class="box">
              <h3>Paper contents</h3>
              <ul>
                <li><strong>Eng Lit Paper 1:</strong> Shakespeare + 19th-century novel (ACC if your school chose it).</li>
                <li><strong>Eng Lit Paper 2:</strong> Modern text + anthology (Belonging if on that spec) + unseen poetry.</li>
                <li><strong>Eng Lang Paper 1:</strong> Fiction extract + descriptive / narrative writing.</li>
                <li><strong>Eng Lang Paper 2:</strong> Non-fiction + viewpoint/transactional writing.</li>
              </ul>
            </div>
            <div class="box">
              <h3>Exam countdown & stats</h3>
              <div class="exam-row">
                <span>Exam date:</span>
                <input type="date" id="exam-date" />
                <button class="btn" id="save-exam">Save</button>
              </div>
              <p class="small" id="exam-countdown" style="margin-top:6px;"></p>
              <div class="stats-line" style="margin-top:6px;">
                <span class="stat">Sessions: <span class="value" id="stat-sessions">0</span></span>
                <span class="stat">Cards flipped: <span class="value" id="stat-cards">0</span></span>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script>
    const APP_VERSION = "4";

    const DEFAULT_DECKS = {
      "A Christmas Carol â€“ Key Moments & Quotes": [
        {
          front: "Stave 1 â€“ overview\\n\\nMarleyâ€™s ghost warns Scrooge heâ€™ll wear â€œchainsâ€ of his own selfish life.",
          back:
            "Stave 1 sets Scrooge up as cold and isolated (â€œsolitary as an oysterâ€), rejecting charity and speaking cruelly about the poor. Marley arrives in chains to show that a life focused on money leads to punishment and regret."
        },
        {
          front: "Stave 2 â€“ overview\\n\\nGhost of Christmas Past shows Scrooge his younger self.",
          back:
            "We see his lonely schooldays, Fezziwigâ€™s joyful party and Belle ending the engagement. This proves Scrooge wasnâ€™t always heartless â€“ greed slowly replaced love and belonging, which explains but doesnâ€™t excuse his behaviour."
        },
        {
          front: "Stave 3 â€“ overview\\n\\nGhost of Christmas Present and the Cratchits.",
          back:
            "We visit the Cratchitsâ€™ poor but warm Christmas, see Tiny Timâ€™s fragility and meet Ignorance and Want. Dickens contrasts Scroogeâ€™s wealth with their kindness to criticise selfish attitudes to the poor."
        },
        {
          front: "Stave 4 â€“ overview\\n\\nGhost of Christmas Yet to Come and Scroogeâ€™s death.",
          back:
            "Scrooge witnesses businessmen mocking his death, thieves stealing his belongings and an unvisited grave. No one cares that he has died, warning that a life without generosity leads to a lonely, meaningless end."
        },
        {
          front: "Stave 5 â€“ overview\\n\\nScrooge wakes up changed.",
          back:
            "He wakes grateful to be alive, buys the prize turkey, donates to charity, goes to Fredâ€™s party and raises Bobâ€™s wages. Dickens ends by showing that true happiness comes from relationships and generosity, not money."
        },
        {
          front: "\"solitary as an oyster\" (Stave 1)",
          back:
            "Simile emphasising Scroogeâ€™s isolation and hard exterior. An oyster is closed and difficult to open, but it may hide a pearl â€“ hinting that Scrooge has hidden potential for kindness and change."
        },
        {
          front: "\"Bah! Humbug!\"",
          back:
            "Scroogeâ€™s catchphrase dismissing Christmas as nonsense. It symbolises his rejection of joy, community and generosity â€“ everything Dickens wants Victorian society to value."
        },
        {
          front: "\"Are there no prisons?\" / \"And the Union workhouses?\"",
          back:
            "Scrooge uses the names of cruel institutions instead of helping the poor. Dickens criticises the Victorian belief that poverty is a crime and that harsh workhouses are an acceptable â€˜solutionâ€™."
        },
        {
          front: "\"Mankind was my business!\" â€“ Marley",
          back:
            "Marley regrets that he cared only about â€˜tradeâ€™ instead of people. Dickensâ€™ main moral: our real duty is to other human beings, not just making profit."
        },
        {
          front: "\"A solitary child, neglected by his friends\"",
          back:
            "Narrator describing young Scrooge. His childhood loneliness explains why he fears emotional pain and shuts people out, showing how lack of love and belonging can damage someone."
        },
        {
          front: "\"Another idol has displaced meâ€¦ a golden one\" â€“ Belle",
          back:
            "Belle tells Scrooge that money has replaced her in his heart. Calling wealth an â€˜idolâ€™ suggests he worships it like a false god â€“ Dickens attacks greed as something people wrongly devote their lives to."
        },
        {
          front: "\"jolly Giant\" â€“ Ghost of Christmas Present",
          back:
            "The spirit is huge, warm and full of food. He represents generosity, abundance and the true spirit of Christmas â€“ sharing and caring for others."
        },
        {
          front: "\"This boy is Ignorance. This girl is Want.\"",
          back:
            "The children personify social problems created by neglecting the poor. Dickens warns that if society ignores ignorance and extreme poverty, the future will be â€˜doomâ€™. Itâ€™s a direct attack on selfishness."
        },
        {
          front: "\"deep black garment\" â€“ Ghost of Christmas Yet to Come",
          back:
            "The faceless, dark robe makes the spirit look like Death and creates fear. It symbolises the unknown future and the judgement that awaits Scrooge if he does not change."
        },
        {
          front: "Scrooge at his grave â€“ \"trembling\" and begging",
          back:
            "When Scrooge sees his own name on the grave, he realises this lonely death is the result of his choices. His fear and desperation show genuine regret and create the turning point for his redemption."
        },
        {
          front: "\"I will honour Christmas in my heart\"",
          back:
            "Scrooge promises to live out the values of Christmas (kindness, generosity, empathy) all year round. Dickens suggests that Christmas is an attitude, not just a single day."
        },
        {
          front: "\"as happy as an angel\" / \"as merry as a school-boy\" (Stave 5)",
          back:
            "Joyful similes show Scroogeâ€™s complete transformation. Childlike happiness replaces his bitterness, proving that emotional change is possible even for someone as â€˜hardâ€™ as him."
        },
        {
          front: "Tiny Tim â€“ \"God bless us, every one!\"",
          back:
            "Timâ€™s blessing is repeated at the end of the novella. He represents innocence, faith and the vulnerable poor. Scroogeâ€™s help saving Tim shows that individual kindness can literally save lives."
        }
      ],

      "Belonging â€“ All 15 Poems": [
        {
          front: "\"It is the first mild day of March\"",
          back:
            "To My Sister â€“ nature and early spring symbolise new beginnings and hope. The speakerâ€™s sense of belonging comes from sharing this simple outdoor moment with his sister, not from school or work."
        },
        {
          front: "\"There is a blessing in the air\"",
          back:
            "To My Sister â€“ the â€˜blessingâ€™ suggests that nature itself is comforting and almost spiritual. Being outside together makes human relationships feel calmer and more meaningful."
        },
        {
          front: "\"The morning road is thronged with merry boys\"",
          back:
            "Sunday Dip â€“ â€˜throngedâ€™ shows a crowd of children; the plural â€˜merry boysâ€™ emphasises a shared, joyful community. Belonging here is about being part of a group tradition, not standing out."
        },
        {
          front: "\"And duck about, and try to lose their fears\"",
          back:
            "Sunday Dip â€“ the boys try to â€˜lose their fearsâ€™ in the water. Playing together helps them feel safer; the group gives them the confidence they donâ€™t have alone."
        },
        {
          front: "\"Mild the mist upon the hill\"",
          back:
            "Mild the Mist upon the Hill â€“ the soft â€˜mistâ€™ matches the gentle mood. The familiar hill is a place where the speakerâ€™s emotions are held and understood â€“ a quiet kind of belonging to landscape."
        },
        {
          front: "\"I am a child once more\"",
          back:
            "Mild the Mist upon the Hill â€“ returning to childhood in memory shows how tied identity is to place. Even as an adult, the speaker mentally belongs to the hill where their younger self felt safe."
        },
        {
          front: "\"Clear and gentle stream! Known and loved so long\"",
          back:
            "Clear and Gentle Stream â€“ the stream is personified as something the speaker â€˜knowsâ€™ and â€˜lovesâ€™. It feels like an old friend, showing that they belong to this landscape through long-term familiarity."
        },
        {
          front: "\"Many an afternoon of the summer day dreaming here I lay\"",
          back:
            "Clear and Gentle Stream â€“ the speaker daydreams at the stream as a child. Itâ€™s a private, imaginative space that shapes their sense of self, so they still feel attached to it later in life."
        },
        {
          front: "\"I remember, I remember, / The house where I was born\"",
          back:
            "I Remember, I Remember â€“ repetition emphasises obsession with the childhood home. Even though adult life is disappointing, the speakerâ€™s identity is still rooted in that original place."
        },
        {
          front: "\"My spirit flew in feathers then, / That is so heavy now\"",
          back:
            "I Remember, I Remember â€“ contrasts light â€˜feathersâ€™ with a â€˜heavyâ€™ spirit. Growing up has made the speaker feel weighed down and less free; adulthood feels less like home than childhood did."
        },
        {
          front: "\"Wild seabirds / and fishermen pushing out to sea\"",
          back:
            "Island Man â€“ lively, natural images of the Caribbean show an active, communal world. This is the place the speakerâ€™s mind returns to, suggesting his true emotional home is there, not in London."
        },
        {
          front: "\"comes back to sands / of a grey metallic soar\"",
          back:
            "Island Man â€“ the shift to â€˜grey metallicâ€™ London sounds harsh and industrial. The man is physically in the city but mentally on the island â€“ he doesnâ€™t fully belong in either place."
        },
        {
          front: "\"We can all be refugees\"",
          back:
            "We Refugees â€“ direct, inclusive statement that anyone could lose their home. Belonging here is fragile and conditional; it can be taken away suddenly, regardless of who you are."
        },
        {
          front: "\"We can be hated by someone / for being someone\"",
          back:
            "We Refugees â€“ shows that people are targeted simply for their identity. It criticises prejudice and shows how belonging can be refused just because of who you are, not what youâ€™ve done."
        },
        {
          front: "\"Peckham Rye Lane is tight / As damp and crammed as a coconut shell\"",
          back:
            "Peckham Rye Lane â€“ the simile makes the street seem crowded but full of life. The poem shows belonging in a busy, multicultural London setting where different people coexist closely."
        },
        {
          front: "\"Each person is a sturdy hairbrush bristle\"",
          back:
            "Peckham Rye Lane â€“ comparing people to bristles suggests theyâ€™re small individually but strong together. The image presents community as something made up of many different individuals working as one."
        },
        {
          front: "\"Us takes in undulations â€“ / each wave in the sea\"",
          back:
            "Us â€“ the pronoun â€˜usâ€™ is compared to waves: constantly moving and hard to pin down. The speakerâ€™s sense of belonging is fluid, not fixed; it shifts with language and relationships."
        },
        {
          front: "\"Oi, you, tell us where yer from\"",
          back:
            "Us â€“ the aggressive question shows how other people demand labels and clear answers. It suggests belonging is often something you have to justify or defend to others."
        },
        {
          front: "\"Dying to be French, dying to shrug and pout\"",
          back:
            "In Wales, wanting to be Italian â€“ teenage exaggeration (â€˜dyingâ€™) shows intense longing to be someone else. The speaker craves a more glamorous identity than her own, showing insecurity about where she belongs."
        },
        {
          front: "\"Is there a name for that thing / you do when you are young?\"",
          back:
            "In Wales, wanting to be Italian â€“ rhetorical question captures a universal teen behaviour: trying on different identities. It suggests belonging is something you experiment with, not something fixed."
        },
        {
          front: "\"Being sixteen in Wales, longing to be Italian\"",
          back:
            "In Wales, wanting to be Italian â€“ a very specific, personal moment: stuck in one place but imagining another life. Her feeling of â€˜homeâ€™ is shaped as much by fantasy as by reality."
        },
        {
          front: "\"think me unfinished â€“ / a child who never sloughed off the childish estate\"",
          back:
            "Kumukanda â€“ the speaker feels â€˜unfinishedâ€™ without the traditional initiation ritual. He hasnâ€™t fully crossed into adult status in his culture, leaving him unsure where he truly belongs."
        },
        {
          front: "\"I was raised in a strange land\"",
          back:
            "Kumukanda â€“ â€˜strangeâ€™ emphasises distance from ancestral culture. He is shaped by two places at once, which complicates his identity and sense of belonging."
        },
        {
          front: "\"Some people would deny that Iâ€™m Jamaican British\"",
          back:
            "Jamaican British â€“ others question his identity, refusing him the label he chooses. It shows how belonging is controlled by social expectations about race, accent and nationality."
        },
        {
          front: "\"you cannot love sugar and hate your sweetness\"",
          back:
            "Jamaican British â€“ metaphor from his father: you canâ€™t enjoy Jamaican culture (â€˜sugarâ€™) but reject Jamaican people (â€˜sweetnessâ€™). Itâ€™s a reminder to accept your whole mixed identity."
        },
        {
          front: "\"It may be at war, it may be sick with tyrants\"",
          back:
            "The Ã‰migrÃ©e â€“ the speakerâ€™s homeland is politically damaged, but she still loves it. Her emotional belonging doesnâ€™t disappear even when the place becomes dangerous and corrupted."
        },
        {
          front: "\"I am branded by an impression of sunlight\"",
          back:
            "The Ã‰migrÃ©e â€“ â€˜brandedâ€™ suggests a permanent mark, but â€˜sunlightâ€™ is positive. Her identity is stamped by a warm, idealised memory of home that cannot be erased."
        },
        {
          front: "\"I comb its hair and love its shining eyes\"",
          back:
            "The Ã‰migrÃ©e â€“ treating the city like a child or friend shows deep affection. She nurtures the idea of her home place, even though she cannot safely live there."
        },
        {
          front: "\"an ugly collection\"",
          back:
            "My Motherâ€™s Kitchen â€“ the mismatched plates are â€˜uglyâ€™, but they are full of history. They symbolise how migrant families carry bits of home with them and build belonging out of imperfect objects."
        },
        {
          front: "\"Planning another escape\"",
          back:
            "My Motherâ€™s Kitchen â€“ repeated escapes show constant moving and instability. The kitchen becomes the only stable space where the family can feel at home for a while."
        },
        {
          front: "\"I will never inherit my motherâ€™s trees\"",
          back:
            "My Motherâ€™s Kitchen â€“ she can inherit kitchen objects but not the trees of the homeland. It shows that some parts of belonging (like landscape and deep roots) canâ€™t be passed on fully to the next generation."
        },
        {
          front: "\"Ah! We both of us are alterâ€™d, and now we talk no more\"",
          back:
            "Captain Cook (To My Brother) â€“ the siblings have changed and grown apart. Belonging in family is shown as something that can fade with time and distance."
        },
        {
          front: "\"We leave in leaving childhood, lifeâ€™s fairy land behind\"",
          back:
            "Captain Cook (To My Brother) â€“ childhood is described as a magical â€˜fairy landâ€™ that is lost. Becoming an adult means losing that simple shared world where the siblings once belonged together."
        }
      ],

      "Sentence Starters & Structures": [
        {
          front: "Lit intro â€“ ACC or anthology",
          back:
            "â€œIn <text>, <author> presents <theme> asâ€¦ in order to show thatâ€¦â€.\\n\\nExample: â€œIn A Christmas Carol, Dickens presents greed as dangerous in order to show that caring for others is more important than money.â€"
        },
        {
          front: "ACC paragraph â€“ strong start",
          back:
            "â€œAt the beginning of the novella, Scrooge is presented asâ€¦â€\\nâ€œLater on, Dickens develops this idea whenâ€¦â€\\nâ€œBy the end of the novella, Scrooge is shown to haveâ€¦â€"
        },
        {
          front: "Zoom in on a word / method",
          back:
            "â€œThe adjective â€˜â€¦â€™ suggests thatâ€¦â€\\nâ€œThe verb â€˜â€¦â€™ implies thatâ€¦â€\\nâ€œBy using a simile here, Dickens showsâ€¦â€"
        },
        {
          front: "Linking to reader / context",
          back:
            "â€œThis would shock a Victorian reader becauseâ€¦â€\\nâ€œThis reflects Victorian attitudes toâ€¦â€\\nâ€œFor a modern reader, this might suggest thatâ€¦â€"
        },
        {
          front: "Comparison â€“ Belonging poems",
          back:
            "â€œBoth poets explore the idea of <theme>, but in different ways.â€\\nâ€œSimilarly, in <poem B>, the poet also suggests thatâ€¦â€\\nâ€œHowever, unlike <poem A>, <poem B> presentsâ€¦â€"
        },
        {
          front: "Unseen poetry â€“ opening sentence",
          back:
            "â€œThe poet presents <feeling / situation> asâ€¦ using imagery and structure to suggest thatâ€¦â€"
        },
        {
          front: "Unseen comparison â€“ one line",
          back:
            "â€œWhile the first poem presents <theme> asâ€¦, the second poem suggests that it is moreâ€¦â€"
        },
        {
          front: "Lang Paper 2 Q5 â€“ intro",
          back:
            "â€œI strongly believe thatâ€¦ becauseâ€¦â€\\nâ€œIn todayâ€™s society, it is essential thatâ€¦â€\\nâ€œIt is unacceptable thatâ€¦â€"
        },
        {
          front: "Lang Paper 2 Q5 â€“ persuasive lines",
          back:
            "â€œSurely we cannot ignoreâ€¦?â€\\nâ€œIs it really fair thatâ€¦?â€\\nâ€œIf we do nothing now, then in the futureâ€¦â€"
        },
        {
          front: "Lang Paper 2 Q5 â€“ conclusion",
          back:
            "â€œIn conclusion, if we want a future whereâ€¦, we mustâ€¦â€\\nâ€œUltimately, it is our responsibility toâ€¦â€"
        }
      ],

      "English Exams â€“ Quick Info & Tips": [
        {
          front: "Eng Lit Paper 2 â€“ overall structure",
          back:
            "Section A: Modern prose/drama.\\nSection B: Poetry anthology comparison.\\nSection C: Unseen poetry (single poem + comparison).\\n\\nUse this deck mainly to remind yourself what each section expects."
        },
        {
          front: "Unseen poetry â€“ 5-step plan",
          back:
            "1) Read once for vibe (emotion / situation).\\n2) Read again and highlight language, structure, form.\\n3) Jot 3â€“4 mini points (what + how + why).\\n4) Turn them into paragraphs.\\n5) Finish with a short conclusion about message + tone."
        },
        {
          front: "Anthology comparison â€“ what examiners want",
          back:
            "You must: (1) Answer the question. (2) Write about BOTH poems. (3) Compare similarities and differences. (4) Use quotes. (5) Comment on methods (language/structure) and some context where relevant."
        },
        {
          front: "Timed essay â€“ basic paragraph frame",
          back:
            "Point: answer the question.\\nEvidence: short, accurate quote.\\nMethod: zoom on a word / technique.\\nExplain: effect + what it suggests.\\nLink: back to question or compare to other poem."
        }
      ]
    };

    const ACC_QUESTIONS = [
      "How does Dickens present Scroogeâ€™s attitude to the poor in Stave 1? Write about: â€¢ Scrooge â€¢ the poor â€¢ Dickensâ€™ message.",
      "How does Dickens show the importance of family in A Christmas Carol? Write about: â€¢ the Cratchits â€¢ Scroogeâ€™s changing attitudes.",
      "How does Dickens use the Ghost of Christmas Present to criticise Victorian society? Refer to: â€¢ what the spirit shows Scrooge â€¢ Ignorance and Want.",
      "How is the theme of redemption presented in A Christmas Carol? Write about: â€¢ Scrooge at the start â€¢ key moments of change â€¢ Scrooge at the end.",
      "How does Dickens present poverty in the novella? Refer to: â€¢ the Cratchits â€¢ Tiny Tim â€¢ any other characters of your choice."
    ];

    const BELONGING_POEMS = [
      "To My Sister â€“ William Wordsworth",
      "Sunday Dip â€“ John Clare",
      "Mild the Mist upon the Hill â€“ Emily BrontÃ«",
      "Clear and Gentle Stream â€“ Robert Bridges",
      "I Remember, I Remember â€“ Thomas Hood",
      "Island Man â€“ Grace Nichols",
      "Peckham Rye Lane â€“ Amy Blakemore",
      "We Refugees â€“ Benjamin Zephaniah",
      "Us â€“ Zaffar Kunial",
      "In Wales, wanting to be Italian â€“ Imtiaz Dharker",
      "Kumukanda â€“ Kayo Chingonyi",
      "Jamaican British â€“ Raymond Antrobus",
      "My Motherâ€™s Kitchen â€“ Choman Hardi",
      "Captain Cook (To My Brother) â€“ Letitia Elizabeth Landon",
      "The Ã‰migrÃ©e â€“ Carol Rumens"
    ];

    let decks = {};
    let currentDeckName = "";
    let currentDeck = [];
    let studyOrder = [];
    let studyIndex = 0;
    let showBack = false;
    let orderedMode = false;

    let sessionCount = 0;
    let cardFlipCount = 0;
    let knownCount = 0;
    let unsureCount = 0;

    function deepCopy(obj) {
      return JSON.parse(JSON.stringify(obj));
    }

    function shuffle(arr) {
      const out = arr.slice();
      for (let i = out.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [out[i], out[j]] = [out[j], out[i]];
      }
      return out;
    }

    function loadState() {
      const raw = localStorage.getItem("rev_app_state");
      if (raw) {
        try {
          const parsed = JSON.parse(raw);
          if (parsed.version === APP_VERSION && parsed.decks) {
            decks = parsed.decks;
          } else {
            decks = deepCopy(DEFAULT_DECKS);
          }
          sessionCount = parsed.sessions || 0;
          cardFlipCount = parsed.cards || 0;
        } catch {
          decks = deepCopy(DEFAULT_DECKS);
        }
      } else {
        decks = deepCopy(DEFAULT_DECKS);
      }
      updateStats();
    }

    function saveState() {
      const payload = {
        version: APP_VERSION,
        decks,
        sessions: sessionCount,
        cards: cardFlipCount
      };
      localStorage.setItem("rev_app_state", JSON.stringify(payload));
    }

    function buildDeckSelect() {
      const sel = document.getElementById("deck-select");
      sel.innerHTML = "";
      Object.keys(decks).forEach((name) => {
        const opt = document.createElement("option");
        opt.value = name;
        opt.textContent = name;
        sel.appendChild(opt);
      });
    }

    function resetKnown() {
      knownCount = 0;
      unsureCount = 0;
      document.getElementById("stat-known").textContent = knownCount;
      document.getElementById("stat-unsure").textContent = unsureCount;
    }

    function resetStudyOrder() {
      if (!currentDeck || currentDeck.length === 0) {
        studyOrder = [];
        studyIndex = 0;
        return;
      }
      const sizeVal = document.getElementById("session-size").value;
      const allIdx = [...Array(currentDeck.length).keys()];
      const base = orderedMode ? allIdx : shuffle(allIdx);
      const size = sizeVal === "all" ? base.length : Math.min(parseInt(sizeVal, 10), base.length);
      studyOrder = base.slice(0, size);
      studyIndex = 0;
      showBack = document.getElementById("start-back").checked;
      resetKnown();
    }

    function renderCard() {
      const faceLabel = document.getElementById("face-label");
      const faceText = document.getElementById("face-text");
      const deckNameEl = document.getElementById("deck-name");
      const cardIndexEl = document.getElementById("card-index");
      const progressFill = document.getElementById("progress-fill");
      const progressLabel = document.getElementById("progress-label");

      if (!currentDeck || currentDeck.length === 0 || studyOrder.length === 0) {
        faceLabel.textContent = "Quote";
        faceText.textContent = "No cards in this deck yet.";
        deckNameEl.textContent = currentDeckName || "";
        cardIndexEl.textContent = "";
        progressFill.style.width = "0%";
        progressLabel.textContent = "0 / 0";
        return;
      }

      const idx = studyOrder[studyIndex];
      const card = currentDeck[idx];

      faceLabel.textContent = showBack ? "Analysis" : "Quote";
      faceText.textContent = showBack ? card.back : card.front;
      deckNameEl.textContent = currentDeckName;
      cardIndexEl.textContent = `${studyIndex + 1} / ${studyOrder.length}`;

      const pct = ((studyIndex + 1) / studyOrder.length) * 100;
      progressFill.style.width = pct + "%";
      progressLabel.textContent = `${studyIndex + 1} / ${studyOrder.length}`;
    }

    function goNext() {
      if (!studyOrder.length) return;
      if (studyIndex < studyOrder.length - 1) {
        studyIndex++;
      }
      showBack = false;
      cardFlipCount++;
      updateStats();
      saveState();
      renderCard();
    }

    function goPrev() {
      if (!studyOrder.length) return;
      if (studyIndex > 0) {
        studyIndex--;
      }
      showBack = false;
      cardFlipCount++;
      updateStats();
      saveState();
      renderCard();
    }

    function restartSession() {
      resetStudyOrder();
      sessionCount++;
      cardFlipCount++;
      updateStats();
      saveState();
      renderCard();
    }

    function selectDeck(name) {
      const sel = document.getElementById("deck-select");
      if (name && decks[name]) {
        sel.value = name;
      } else {
        name = sel.value;
      }
      currentDeckName = name;
      currentDeck = decks[name] || [];
      resetStudyOrder();
      renderCard();
    }

    function updateStats() {
      document.getElementById("stat-sessions").textContent = sessionCount;
      document.getElementById("stat-cards").textContent = cardFlipCount;
      document.getElementById("stat-known").textContent = knownCount;
      document.getElementById("stat-unsure").textContent = unsureCount;
    }

    function randomAccQuestion() {
      const el = document.getElementById("acc-question");
      const i = Math.floor(Math.random() * ACC_QUESTIONS.length);
      el.textContent = ACC_QUESTIONS[i];
    }

    function buildPoemChecklist() {
      const list = document.getElementById("poem-list");
      list.innerHTML = "";
      BELONGING_POEMS.forEach((title) => {
        const id = "poem_" + title.replace(/[^a-z0-9]+/gi, "_").toLowerCase();
        const li = document.createElement("li");
        li.className = "poem-item";
        const cb = document.createElement("input");
        cb.type = "checkbox";
        cb.id = id;
        cb.checked = localStorage.getItem(id) === "1";
        cb.addEventListener("change", () => {
          localStorage.setItem(id, cb.checked ? "1" : "0");
        });
        const span = document.createElement("span");
        span.textContent = title;
        li.appendChild(cb);
        li.appendChild(span);
        list.appendChild(li);
      });
    }

    function updateCountdown() {
      const input = document.getElementById("exam-date");
      const out = document.getElementById("exam-countdown");
      const val = input.value;
      if (!val) {
        out.textContent = "";
        return;
      }
      const today = new Date();
      const exam = new Date(val + "T00:00:00");
      const diffMs = exam - today;
      const diffDays = Math.ceil(diffMs / (1000 * 60 * 60 * 24));
      if (diffDays > 0) {
        out.textContent = `${diffDays} day(s) to go.`;
      } else if (diffDays === 0) {
        out.textContent = "Exam is today â€“ focus and breathe.";
      } else {
        out.textContent = "That date is in the past.";
      }
    }

    function setView(name) {
      document.querySelectorAll(".view").forEach(v => {
        v.classList.toggle("active", v.id === "view-" + name);
      });
      document.querySelectorAll(".tab").forEach(t => {
        t.classList.toggle("active", t.dataset.view === name);
      });
    }

    document.addEventListener("DOMContentLoaded", () => {
      loadState();
      buildDeckSelect();
      buildPoemChecklist();

      const deckSelect = document.getElementById("deck-select");
      const sessionSize = document.getElementById("session-size");
      const orderToggle = document.getElementById("order-toggle");
      const orderLabel = document.getElementById("order-label");
      const startBack = document.getElementById("start-back");
      const flashcard = document.getElementById("flashcard");

      deckSelect.addEventListener("change", () => selectDeck());
      sessionSize.addEventListener("change", () => {
        resetStudyOrder();
        renderCard();
      });

      orderToggle.addEventListener("click", () => {
        orderedMode = !orderedMode;
        orderLabel.textContent = orderedMode ? "In order" : "Shuffled";
        resetStudyOrder();
        renderCard();
      });

      startBack.addEventListener("change", () => {
        showBack = startBack.checked;
        renderCard();
      });

      flashcard.addEventListener("click", () => {
        if (!studyOrder.length) return;
        showBack = !showBack;
        cardFlipCount++;
        updateStats();
        saveState();
        renderCard();
      });

      document.getElementById("next-btn").addEventListener("click", goNext);
      document.getElementById("prev-btn").addEventListener("click", goPrev);
      document.getElementById("restart-btn").addEventListener("click", restartSession);

      document.getElementById("got-btn").addEventListener("click", () => {
        if (!studyOrder.length) return;
        knownCount++;
        cardFlipCount++;
        updateStats();
        saveState();
        if (studyIndex < studyOrder.length - 1) {
          studyIndex++;
          showBack = false;
          renderCard();
        }
      });

      document.getElementById("not-btn").addEventListener("click", () => {
        if (!studyOrder.length) return;
        unsureCount++;
        cardFlipCount++;
        updateStats();
        saveState();
        if (studyIndex < studyOrder.length - 1) {
          studyIndex++;
          showBack = false;
          renderCard();
        }
      });

      document.getElementById("new-q-btn").addEventListener("click", randomAccQuestion);

      document.getElementById("save-exam").addEventListener("click", () => {
        const val = document.getElementById("exam-date").value;
        if (!val) return;
        localStorage.setItem("exam_date", val);
        updateCountdown();
      });

      const storedExam = localStorage.getItem("exam_date");
      if (storedExam) {
        document.getElementById("exam-date").value = storedExam;
        updateCountdown();
      }

      document.getElementById("exam-date").addEventListener("change", updateCountdown);

      document.querySelectorAll(".tab").forEach(tab => {
        tab.addEventListener("click", () => setView(tab.dataset.view));
      });

      document.getElementById("quick-acc").addEventListener("click", () => {
        setView("cards");
        selectDeck("A Christmas Carol â€“ Key Moments & Quotes");
        document.getElementById("view-cards").scrollIntoView({ behavior: "smooth" });
      });

      document.getElementById("quick-belonging").addEventListener("click", () => {
        setView("cards");
        selectDeck("Belonging â€“ All 15 Poems");
        document.getElementById("view-cards").scrollIntoView({ behavior: "smooth" });
      });

      document.getElementById("quick-starters").addEventListener("click", () => {
        setView("starters");
        selectDeck("Sentence Starters & Structures");
        document.getElementById("view-starters").scrollIntoView({ behavior: "smooth" });
      });

      const defaultDeck = "A Christmas Carol â€“ Key Moments & Quotes";
      if (decks[defaultDeck]) {
        selectDeck(defaultDeck);
      } else {
        const firstName = Object.keys(decks)[0];
        selectDeck(firstName);
      }

      randomAccQuestion();
    });
  </script>
</body>
</html>
