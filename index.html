<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ACC & Belonging Revision Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #020202;
      --bg-soft: #09090f;
      --bg-softer: #101014;
      --card: #111117;
      --accent: #dc2626;
      --accent-soft: rgba(220, 38, 38, 0.25);
      --accent-strong: #f97373;
      --accent-text: #fee2e2;
      --border-subtle: rgba(148, 163, 184, 0.24);
      --text-main: #f9fafb;
      --text-muted: #9ca3af;
      --danger: #f97373;
      --radius-lg: 18px;
      --radius-md: 12px;
      --radius-pill: 999px;
      --shadow-soft: 0 24px 60px rgba(0, 0, 0, 0.65);
      --shadow-glow: 0 0 34px rgba(248, 113, 113, 0.45);
      --transition-fast: 0.16s ease-out;
      --transition-med: 0.24s ease-out;
      --blur-bg: blur(16px);
    }

    * {
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
      color: var(--text-main);
      background:
        radial-gradient(circle at top, rgba(127, 29, 29, 0.35), transparent 55%),
        radial-gradient(circle at bottom, rgba(30, 64, 175, 0.28), transparent 60%),
        #020617;
      display: flex;
      justify-content: center;
    }

    .app-shell {
      width: 100%;
      max-width: 880px;
      padding: 18px 12px 32px;
    }

    @media (min-width: 700px) {
      .app-shell {
        padding: 24px 16px 40px;
      }
    }

    header {
      padding: 16px 18px 14px;
      border-radius: var(--radius-lg);
      background: linear-gradient(
          135deg,
          rgba(15, 23, 42, 0.9),
          rgba(15, 23, 42, 0.98)
        );
      border: 1px solid rgba(248, 250, 252, 0.08);
      box-shadow: var(--shadow-soft), 0 0 45px rgba(153, 27, 27, 0.7);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      position: sticky;
      top: 0;
      z-index: 5;
      backdrop-filter: var(--blur-bg);
    }

    .app-title {
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    .app-title-main {
      font-size: 1.12rem;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      color: var(--accent-text);
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .app-logo-dot {
      width: 11px;
      height: 11px;
      border-radius: 50%;
      background: radial-gradient(circle at center, #fee2e2, #b91c1c);
      box-shadow:
        0 0 18px rgba(248, 113, 113, 0.95),
        0 0 34px rgba(248, 113, 113, 0.7);
    }

    .app-subtitle {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .quick-buttons {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .pill-btn {
      border-radius: var(--radius-pill);
      border: 1px solid rgba(148, 163, 184, 0.4);
      padding: 6px 12px;
      font-size: 0.76rem;
      display: flex;
      align-items: center;
      gap: 6px;
      background: radial-gradient(circle at top, rgba(10, 10, 16, 0.98), rgba(6, 6, 10, 0.98));
      color: var(--text-main);
      cursor: pointer;
      transition:
        background var(--transition-fast),
        border-color var(--transition-fast),
        transform var(--transition-fast),
        box-shadow var(--transition-fast);
      white-space: nowrap;
    }

    .pill-btn.primary {
      border-color: rgba(248, 113, 113, 0.9);
      background: radial-gradient(circle at top, rgba(127, 29, 29, 0.96), rgba(24, 24, 30, 0.98));
      box-shadow:
        0 12px 30px rgba(127, 29, 29, 0.8),
        0 0 28px rgba(248, 113, 113, 0.6);
    }

    .pill-btn span.icon {
      font-size: 0.95rem;
    }

    .pill-btn:active {
      transform: scale(0.97) translateY(1px);
      box-shadow: none;
    }

    main {
      margin-top: 16px;
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .card-shell {
      border-radius: var(--radius-lg);
      background: radial-gradient(circle at top, rgba(15, 23, 42, 0.96), #020617);
      border: 1px solid var(--border-subtle);
      box-shadow: var(--shadow-soft);
      padding: 16px 14px 14px;
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    @media (min-width: 780px) {
      .card-shell {
        padding: 18px 18px 16px;
      }
    }

    .section-heading {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }

    .section-heading h2 {
      margin: 0;
      font-size: 0.96rem;
      text-transform: uppercase;
      letter-spacing: 0.13em;
      color: rgba(254, 242, 242, 0.9);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .section-heading h2::before {
      content: "";
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: radial-gradient(circle at center, var(--accent), transparent);
      box-shadow: 0 0 20px rgba(248, 113, 113, 0.95);
    }

    .section-heading small {
      font-size: 0.74rem;
      color: var(--text-muted);
    }

    .hero-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.6fr) minmax(0, 1.1fr);
      gap: 10px;
    }

    @media (max-width: 720px) {
      .hero-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .hero-panel {
      border-radius: var(--radius-md);
      border: 1px solid var(--border-subtle);
      background:
        radial-gradient(circle at top left, rgba(127, 29, 29, 0.4), transparent 55%),
        radial-gradient(circle at bottom right, rgba(15, 23, 42, 0.5), transparent 60%),
        rgba(10, 10, 20, 0.98);
      padding: 10px 11px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      position: relative;
      overflow: hidden;
    }

    .hero-title {
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--accent-text);
      display: flex;
      align-items: baseline;
      gap: 6px;
    }

    .hero-title span.tag {
      font-size: 0.64rem;
      padding: 2px 6px;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(248, 250, 252, 0.4);
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }

    .hero-body {
      font-size: 0.78rem;
      color: var(--text-muted);
      line-height: 1.4;
    }

    .hero-list {
      margin: 6px 0 0;
      padding-left: 16px;
      font-size: 0.76rem;
      color: rgba(229, 231, 235, 0.95);
    }

    .hero-list li {
      margin-bottom: 2px;
    }

    .hero-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 4px;
    }

    .hero-pill {
      font-size: 0.72rem;
      padding: 4px 8px;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(148, 163, 184, 0.4);
      background: rgba(15, 23, 42, 0.94);
      color: var(--text-main);
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .hero-pill strong {
      color: var(--accent-strong);
      font-weight: 600;
    }

    .hero-question-box {
      margin-top: 4px;
      padding: 8px;
      border-radius: 12px;
      background: rgba(15, 23, 42, 0.96);
      border: 1px solid rgba(55, 65, 81, 0.8);
      font-size: 0.78rem;
      color: rgba(229, 231, 235, 0.97);
      display: flex;
      flex-direction: column;
      gap: 6px;
      box-shadow: 0 18px 35px rgba(0, 0, 0, 0.9);
    }

    .hero-question-label {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.13em;
      color: rgba(156, 163, 175, 0.96);
    }

    .hero-question-text {
      min-height: 2.6em;
    }

    .hero-question-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
    }

    .hero-question-footer small {
      font-size: 0.7rem;
      color: var(--text-muted);
    }

    .btn-ghost {
      border-radius: var(--radius-pill);
      border: 1px solid rgba(148, 163, 184, 0.6);
      background: rgba(15, 23, 42, 0.96);
      color: var(--accent-text);
      padding: 4px 10px;
      font-size: 0.75rem;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      transition:
        background var(--transition-fast),
        border-color var(--transition-fast),
        transform var(--transition-fast);
    }

    .btn-ghost:active {
      transform: scale(0.97) translateY(1px);
    }

    /* FLASHCARD CONTROLS */

    .controls-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      justify-content: space-between;
    }

    .control-group {
      display: flex;
      align-items: center;
      gap: 6px;
      flex-wrap: wrap;
      font-size: 0.76rem;
      color: var(--text-muted);
    }

    .select {
      border-radius: var(--radius-pill);
      padding: 5px 28px 5px 10px;
      border: 1px solid rgba(75, 85, 99, 0.95);
      background:
        radial-gradient(circle at top left, rgba(127, 29, 29, 0.6), transparent 55%),
        rgba(15, 23, 42, 0.98);
      color: var(--text-main);
      font-size: 0.78rem;
      position: relative;
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
      min-width: 140px;
    }

    .select-wrapper {
      position: relative;
      display: inline-flex;
      align-items: center;
    }

    .select-wrapper::after {
      content: "‚ñæ";
      position: absolute;
      right: 10px;
      font-size: 0.7rem;
      color: var(--text-muted);
      pointer-events: none;
    }

    .control-chip {
      padding: 4px 9px;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: rgba(15, 23, 42, 0.94);
      font-size: 0.72rem;
      color: var(--text-muted);
      display: inline-flex;
      align-items: center;
      gap: 4px;
      white-space: nowrap;
    }

    .control-chip input[type="checkbox"] {
      width: 13px;
      height: 13px;
      accent-color: var(--accent);
    }

    .order-toggle {
      border-radius: var(--radius-pill);
      padding: 4px 10px;
      font-size: 0.72rem;
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: rgba(15, 23, 42, 0.96);
      color: var(--text-muted);
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
    }

    .order-toggle span.mode {
      color: var(--accent-text);
      font-weight: 600;
    }

    /* FLASHCARD */

    .flashcard-outer {
      margin-top: 4px;
    }

    .flashcard-frame {
      border-radius: var(--radius-lg);
      background:
        radial-gradient(circle at top, rgba(127, 29, 29, 0.4), transparent 60%),
        radial-gradient(circle at bottom, rgba(15, 23, 42, 0.5), transparent 65%),
        linear-gradient(135deg, #020617, #020617);
      border: 1px solid rgba(148, 163, 184, 0.6);
      box-shadow: var(--shadow-soft), var(--shadow-glow);
      padding: 12px 12px 11px;
      position: relative;
      overflow: hidden;
    }

    .flashcard {
      border-radius: calc(var(--radius-lg) - 6px);
      background: rgba(6, 6, 15, 0.98);
      min-height: 170px;
      max-height: 320px;
      overflow-y: auto;
      padding: 12px 12px 14px;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      gap: 8px;
      transition:
        transform var(--transition-med),
        box-shadow var(--transition-med),
        background var(--transition-med),
        border-color var(--transition-med);
      border: 1px solid rgba(55, 65, 81, 0.9);
    }

    .flashcard:hover {
      transform: translateY(-1px);
      box-shadow:
        0 18px 45px rgba(0, 0, 0, 0.9),
        0 0 34px rgba(248, 113, 113, 0.5);
    }

    .flashcard-face-label {
      font-size: 0.7rem;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: rgba(248, 250, 252, 0.7);
    }

    .flashcard-main-text {
      font-size: 0.92rem;
      line-height: 1.46;
      color: rgba(249, 250, 251, 0.98);
      white-space: pre-line;
    }

    .flashcard-meta {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 6px;
      margin-top: 4px;
    }

    .flashcard-meta small {
      font-size: 0.72rem;
      color: var(--text-muted);
    }

    .flashcard-meta .deck-tag {
      color: var(--accent-strong);
      font-weight: 500;
    }

    .flashcard-hint {
      font-size: 0.7rem;
      color: rgba(156, 163, 175, 0.9);
      margin-top: 4px;
    }

    .flashcard-hint span {
      color: var(--accent-strong);
    }

    .flashcard-footer {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      margin-top: 8px;
      font-size: 0.76rem;
      color: var(--text-muted);
      flex-wrap: wrap;
    }

    .progress {
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .progress-bar {
      width: 120px;
      height: 5px;
      border-radius: 999px;
      background: rgba(31, 41, 55, 0.9);
      overflow: hidden;
      position: relative;
    }

    .progress-fill {
      height: 100%;
      width: 0%;
      border-radius: inherit;
      background: linear-gradient(90deg, #ef4444, #fb923c);
      transition: width 0.22s ease-out;
    }

    .progress span {
      font-size: 0.72rem;
    }

    .nav-buttons {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      flex-wrap: wrap;
    }

    .nav-buttons button {
      border-radius: var(--radius-pill);
      border: 1px solid rgba(75, 85, 99, 0.9);
      background: radial-gradient(circle at top, rgba(15, 23, 42, 0.96), rgba(9, 9, 15, 0.98));
      color: var(--text-main);
      padding: 4px 10px;
      font-size: 0.76rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      transition:
        background var(--transition-fast),
        transform var(--transition-fast),
        box-shadow var(--transition-fast);
    }

    .nav-buttons button.primary {
      border-color: rgba(248, 113, 113, 0.95);
      background: radial-gradient(circle at top, rgba(127, 29, 29, 0.98), rgba(30, 64, 175, 0.95));
      box-shadow:
        0 10px 28px rgba(127, 29, 29, 0.7),
        0 0 26px rgba(248, 113, 113, 0.5);
    }

    .nav-buttons button.ghost {
      border-color: rgba(75, 85, 99, 0.9);
    }

    .nav-buttons button:active {
      transform: scale(0.97) translateY(1px);
      box-shadow: none;
    }

    .mark-buttons {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      flex-wrap: wrap;
    }

    .mark-buttons button {
      border-radius: var(--radius-pill);
      border: 1px solid rgba(55, 65, 81, 0.9);
      padding: 4px 9px;
      font-size: 0.74rem;
      background: rgba(15, 23, 42, 0.96);
      color: var(--text-main);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      transition:
        background var(--transition-fast),
        transform var(--transition-fast),
        box-shadow var(--transition-fast);
    }

    .mark-buttons button.good {
      border-color: rgba(34, 197, 94, 0.8);
      color: #bbf7d0;
    }

    .mark-buttons button.bad {
      border-color: rgba(248, 113, 113, 0.85);
      color: #fee2e2;
    }

    .mark-buttons button:active {
      transform: scale(0.97) translateY(1px);
    }

    .extras-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.3fr) minmax(0, 1fr);
      gap: 10px;
    }

    @media (max-width: 720px) {
      .extras-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .extra-panel {
      border-radius: var(--radius-md);
      border: 1px solid var(--border-subtle);
      background: rgba(15, 23, 42, 0.98);
      padding: 10px 11px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .extra-title {
      font-size: 0.8rem;
      color: rgba(249, 250, 251, 0.96);
      text-transform: uppercase;
      letter-spacing: 0.13em;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .extra-title::before {
      content: "";
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: radial-gradient(circle at center, var(--accent), transparent);
      box-shadow: 0 0 12px rgba(248, 113, 113, 0.85);
    }

    .extra-body {
      font-size: 0.76rem;
      color: var(--text-muted);
    }

    .poem-list {
      list-style: none;
      margin: 6px 0 0;
      padding: 0;
      display: grid;
      grid-template-columns: minmax(0, 1fr);
      gap: 3px;
    }

    @media (min-width: 600px) {
      .poem-list {
        grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
      }
    }

    .poem-item {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 4px 6px;
      border-radius: 9px;
      background: rgba(15, 23, 42, 0.96);
      border: 1px solid rgba(31, 41, 55, 0.95);
    }

    .poem-item input[type="checkbox"] {
      width: 13px;
      height: 13px;
      accent-color: var(--accent);
    }

    .poem-item span {
      font-size: 0.74rem;
      color: rgba(229, 231, 235, 0.98);
    }

    .stats-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .stat-pill {
      padding: 5px 9px;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: rgba(15, 23, 42, 0.96);
      font-size: 0.72rem;
      color: rgba(209, 213, 219, 0.96);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .stat-pill span.value {
      color: var(--accent-strong);
      font-weight: 600;
    }

    .papers-list {
      margin: 5px 0 0;
      padding-left: 16px;
      font-size: 0.75rem;
      color: rgba(229, 231, 235, 0.96);
    }

    .papers-list li {
      margin-bottom: 3px;
    }

    .papers-list strong {
      color: var(--accent-strong);
    }

    .exam-row {
      margin-top: 6px;
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      align-items: center;
    }

    .exam-row input[type="date"] {
      border-radius: var(--radius-pill);
      border: 1px solid rgba(75, 85, 99, 0.9);
      background: rgba(15, 23, 42, 0.96);
      color: var(--text-main);
      font-size: 0.74rem;
      padding: 4px 8px;
    }

    .structures-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 1.2fr);
      gap: 10px;
    }

    @media (max-width: 720px) {
      .structures-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .structure-box {
      border-radius: var(--radius-md);
      border: 1px solid rgba(55, 65, 81, 0.95);
      background: rgba(15, 23, 42, 0.96);
      padding: 9px 10px;
      font-size: 0.78rem;
      color: rgba(229, 231, 235, 0.97);
    }

    .structure-box h3 {
      margin: 0 0 4px;
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.13em;
      color: var(--accent-text);
    }

    .structure-box ul {
      margin: 4px 0 0;
      padding-left: 16px;
    }

    .structure-box li {
      margin-bottom: 3px;
    }

    .structure-box code {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
        "Liberation Mono", "Courier New", monospace;
      font-size: 0.74rem;
      background: rgba(15, 23, 42, 0.96);
      border-radius: 999px;
      padding: 1px 6px;
      border: 1px solid rgba(75, 85, 99, 0.9);
      color: var(--accent-text);
    }

    @media (max-width: 480px) {
      header {
        padding-inline: 10px;
      }
      .app-shell {
        padding-inline: 10px;
      }
      .card-shell {
        padding-inline: 12px;
      }
      .controls-row {
        flex-direction: column;
        align-items: flex-start;
      }
    }

    /* Focus mode: keep only flashcards visible */
    body.focus-only #accSection,
    body.focus-only #extrasSection,
    body.focus-only #structuresSection {
      display: none;
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <header>
      <div class="app-title">
        <div class="app-title-main">
          <span class="app-logo-dot"></span>
          ACC & Belonging ‚Äì Revision Hub
        </div>
        <div class="app-subtitle">Dark / red ¬∑ built for AQA Eng Lit, Year 11</div>
      </div>
      <div class="quick-buttons">
        <button class="pill-btn primary" id="quickAcc">
          <span class="icon">üìñ</span>
          ACC cards
        </button>
        <button class="pill-btn" id="quickBelonging">
          <span class="icon">üìù</span>
          Belonging quotes
        </button>
        <button class="pill-btn" id="quickStructures">
          <span class="icon">üìö</span>
          Structures
        </button>
      </div>
    </header>

    <main>
      <!-- ACC FRONT PAGE -->
      <section class="card-shell" id="accSection">
        <div class="section-heading">
          <h2>A Christmas Carol ‚Äì Front Page</h2>
          <small>Staves ¬∑ key ideas ¬∑ random exam question generator</small>
        </div>
        <div class="hero-grid">
          <div class="hero-panel">
            <div class="hero-title">
              Core plot checkpoints
              <span class="tag">ACC ¬∑ staves 1‚Äì5</span>
            </div>
            <div class="hero-body">
              Keep this in your head before you write or revise quotes.
              <ul class="hero-list">
                <li><strong>Stave 1:</strong> Miser Scrooge, ‚ÄúBah! Humbug‚Äù, rejects charity, Marley warns him about ‚Äúchains‚Äù.</li>
                <li><strong>Stave 2:</strong> Past ‚Äì lonely schoolboy, Fezziwig‚Äôs party, Belle leaves when he chooses money.</li>
                <li><strong>Stave 3:</strong> Present ‚Äì Cratchit Christmas, Tiny Tim‚Äôs illness, Ignorance and Want.</li>
                <li><strong>Stave 4:</strong> Yet to Come ‚Äì people stealing his things, no one mourning him, his grave.</li>
                <li><strong>Stave 5:</strong> Redemption ‚Äì buys turkey, helps Cratchits, ‚Äúgood a man‚Äù as anyone.</li>
              </ul>
              <div class="hero-actions">
                <div class="hero-pill">
                  Focus: <strong>know 2‚Äì3 quotes per stave</strong>
                </div>
                <div class="hero-pill">
                  Use the <strong>ACC deck</strong> to lock them in.
                </div>
              </div>
            </div>
          </div>

          <div class="hero-panel">
            <div class="hero-title">
              Random ACC exam question
              <span class="tag">AQA-style</span>
            </div>
            <div class="hero-question-box">
              <div class="hero-question-label">Practice prompt</div>
              <div id="accQuestion" class="hero-question-text">
                How does Dickens present Scrooge‚Äôs attitude to the poor in Stave 1? Write about:
                ‚Ä¢ Scrooge ‚Ä¢ the poor ‚Ä¢ Dickens‚Äô message.
              </div>
              <div class="hero-question-footer">
                <small>Try: intro + 3 paragraphs + short conclusion.</small>
                <button class="btn-ghost" id="newQuestionBtn">
                  <span>New question</span>
                  <span>üé≤</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- FLASHCARDS -->
      <section class="card-shell" id="flashSection">
        <div class="section-heading">
          <h2>Active Flashcards</h2>
          <small>ACC ¬∑ Belonging quotes ¬∑ sentence starters deck</small>
        </div>

        <div class="controls-row">
          <div class="control-group">
            <span>Deck</span>
            <div class="select-wrapper">
              <select id="deckSelect" class="select"></select>
            </div>
          </div>

          <div class="control-group">
            <div class="control-chip">
              Session
              <div class="select-wrapper">
                <select id="sessionSize" class="select">
                  <option value="5">5 cards</option>
                  <option value="10" selected>10 cards</option>
                  <option value="20">20 cards</option>
                  <option value="all">All cards</option>
                </select>
              </div>
            </div>

            <button class="order-toggle" id="orderToggle">
              Order:
              <span class="mode" id="orderLabel">Shuffled</span>
            </button>

            <label class="control-chip">
              <input type="checkbox" id="startOnBack" />
              Start on analysis side
            </label>

            <label class="control-chip">
              <input type="checkbox" id="focusMode" />
              Focus mode (cards only)
            </label>
          </div>
        </div>

        <div class="flashcard-outer">
          <div class="flashcard-frame">
            <div id="flashcard" class="flashcard">
              <div id="flashcardFaceLabel" class="flashcard-face-label">Quote</div>
              <div id="flashcardText" class="flashcard-main-text">
                Loading cards‚Ä¶
              </div>
              <div class="flashcard-meta">
                <small>
                  <span id="flashcardDeckTag" class="deck-tag"></span>
                </small>
                <small id="flashcardIndexLabel"></small>
              </div>
            </div>
            <div class="flashcard-hint">
              Tap anywhere on the card to <span>flip between quote and analysis / explanation.</span>
            </div>
          </div>

        <div class="flashcard-footer">
          <div class="progress">
            <div class="progress-bar">
              <div id="progressFill" class="progress-fill"></div>
            </div>
            <span id="progressLabel">0 / 0</span>
          </div>
          <div class="nav-buttons">
            <button id="prevBtn" class="ghost">
              ‚óÄ Prev
            </button>
            <button id="restartBtn" class="ghost">
              ‚Üª Restart
            </button>
            <button id="nextBtn" class="primary">
              Next ‚ñ∂
            </button>
          </div>
        </div>

        <div class="flashcard-footer">
          <div class="mark-buttons">
            <button id="gotItBtn" class="good">
              ‚úì Got it
            </button>
            <button id="notYetBtn" class="bad">
              ? Not yet
            </button>
          </div>
          <div class="stats-row">
            <div class="stat-pill">
              Got it:
              <span class="value" id="statKnown">0</span>
            </div>
            <div class="stat-pill">
              Not yet:
              <span class="value" id="statUnsure">0</span>
            </div>
          </div>
        </div>
      </section>

      <!-- SENTENCE STARTERS / STRUCTURES -->
      <section class="card-shell" id="structuresSection">
        <div class="section-heading">
          <h2>Sentence Starters & Structures</h2>
          <small>Use these in ACC, Belonging, unseen, Lang Q5</small>
        </div>
        <div class="structures-grid">
          <div class="structure-box">
            <h3>ACC & Lit essay paragraphs</h3>
            <ul>
              <li><code>Intro</code> ‚Äì ‚ÄúIn <em>A Christmas Carol</em>, Dickens presents <strong>[theme]</strong> as‚Ä¶ in order to show that‚Ä¶‚Äù</li>
              <li><code>Point</code> ‚Äì ‚ÄúFirstly, Dickens suggests that Scrooge is‚Ä¶‚Äù / ‚ÄúAt the start of the novella, Scrooge is presented as‚Ä¶‚Äù</li>
              <li><code>Evidence</code> ‚Äì ‚ÄúThis is shown when Dickens writes, ‚Äò‚Ä¶‚Äô ‚Äù / ‚ÄúWe see this in the quote, ‚Äò‚Ä¶‚Äô ‚Äù</li>
              <li><code>Zoom</code> ‚Äì ‚ÄúThe adjective ‚Äò‚Ä¶‚Äô implies that‚Ä¶‚Äù / ‚ÄúThe verb ‚Äò‚Ä¶‚Äô suggests that‚Ä¶‚Äù</li>
              <li><code>Effect</code> ‚Äì ‚ÄúThis makes the reader feel‚Ä¶‚Äù / ‚ÄúThis highlights Dickens‚Äô criticism of‚Ä¶‚Äù</li>
              <li><code>Context</code> ‚Äì ‚ÄúThis would shock a Victorian reader because‚Ä¶‚Äù / ‚ÄúThis reflects Victorian attitudes to‚Ä¶‚Äù</li>
              <li><code>Link</code> ‚Äì ‚ÄúOverall, Dickens uses this moment to show that‚Ä¶‚Äù / ‚ÄúThis links back to the idea that‚Ä¶‚Äù</li>
            </ul>
          </div>
          <div class="structure-box">
            <h3>Belonging comparisons (anthology)</h3>
            <ul>
              <li><code>Compare start</code> ‚Äì ‚ÄúBoth poets explore the idea of <strong>[belonging topic]</strong>, but in different ways.‚Äù</li>
              <li><code>Similarity</code> ‚Äì ‚ÄúSimilarly, in <strong>[Poem B]</strong>, the poet also suggests that‚Ä¶‚Äù</li>
              <li><code>Difference</code> ‚Äì ‚ÄúHowever, unlike <strong>[Poem A]</strong>, <strong>[Poem B]</strong> presents‚Ä¶‚Äù</li>
              <li><code>Method</code> ‚Äì ‚ÄúThe poet uses imagery such as ‚Äò‚Ä¶‚Äô to show that‚Ä¶‚Äù / ‚ÄúThe use of structure here, where‚Ä¶, emphasises‚Ä¶‚Äù</li>
              <li><code>Link back</code> ‚Äì ‚ÄúThis shows that both poets agree that‚Ä¶, but <strong>[Poem B]</strong> is more‚Ä¶ in its view.‚Äù</li>
              <li><code>Conclusion</code> ‚Äì ‚ÄúOverall, while both poems present‚Ä¶, <strong>[Poem X]</strong> suggests that belonging is‚Ä¶, whereas <strong>[Poem Y]</strong>‚Ä¶‚Äù</li>
            </ul>
          </div>
        </div>

        <div class="structures-grid" style="margin-top:10px;">
          <div class="structure-box">
            <h3>Unseen poetry ‚Äì quick frame</h3>
            <ul>
              <li><code>Opening</code> ‚Äì ‚ÄúThe poet presents <strong>[feeling / situation]</strong> as‚Ä¶ using imagery and structure to show that‚Ä¶‚Äù</li>
              <li><code>Idea paragraph</code> ‚Äì ‚ÄúOne important idea in the poem is that‚Ä¶‚Äù</li>
              <li><code>Evidence</code> ‚Äì ‚ÄúThis is suggested by the phrase ‚Äò‚Ä¶‚Äô which implies that‚Ä¶‚Äù</li>
              <li><code>Method</code> ‚Äì ‚ÄúThe poet‚Äôs use of <strong>[metaphor / enjambment / rhyme]</strong> here creates a sense of‚Ä¶‚Äù</li>
              <li><code>Effect</code> ‚Äì ‚ÄúThis makes the reader think about‚Ä¶‚Äù / ‚ÄúThis emphasises how strongly the speaker feels that‚Ä¶‚Äù</li>
              <li><code>Comparison (unseen B)</code> ‚Äì ‚ÄúIn the second poem, the poet also explores‚Ä¶, but presents it as more‚Ä¶‚Äù</li>
            </ul>
          </div>
          <div class="structure-box">
            <h3>Lang Paper 2 Q5 (viewpoint)</h3>
            <ul>
              <li><code>Intro</code> ‚Äì ‚ÄúI strongly believe that‚Ä¶ because‚Ä¶‚Äù / ‚ÄúIn today‚Äôs society, it is essential that‚Ä¶‚Äù</li>
              <li><code>Para start</code> ‚Äì ‚ÄúFirstly,‚Ä¶‚Äù, ‚ÄúSecondly,‚Ä¶‚Äù, ‚ÄúMost importantly,‚Ä¶‚Äù.</li>
              <li><code>Develop</code> ‚Äì ‚ÄúFor example,‚Ä¶‚Äù, ‚ÄúThis means that‚Ä¶‚Äù</li>
              <li><code>Persuade</code> ‚Äì ‚ÄúSurely we cannot ignore‚Ä¶‚Äù, ‚ÄúIs it really fair that‚Ä¶?‚Äù</li>
              <li><code>Counter</code> ‚Äì ‚ÄúSome people might argue that‚Ä¶, however this is flawed because‚Ä¶‚Äù</li>
              <li><code>Ending</code> ‚Äì ‚ÄúIn conclusion, if we want a future where‚Ä¶, we must‚Ä¶‚Äù</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- EXTRAS -->
      <section class="card-shell" id="extrasSection">
        <div class="section-heading">
          <h2>Extras ‚Äì Belonging & Exam Info</h2>
          <small>Tick poems ¬∑ exam contents ¬∑ countdown</small>
        </div>
        <div class="extras-grid">
          <div class="extra-panel">
            <div class="extra-title">Belonging anthology checklist</div>
            <div class="extra-body">
              Tick when you feel confident on the key quotes + meaning for each poem.
              <ul class="poem-list" id="poemChecklist"></ul>
            </div>
          </div>

          <div class="extra-panel">
            <div class="extra-title">AQA English ‚Äì Papers & countdown</div>
            <div class="extra-body">
              Focus for you (Year 11):
              <ul class="papers-list">
                <li>
                  <strong>Eng Lit Paper 1:</strong> Shakespeare + 19th-century novel (ACC if your school chose it).
                </li>
                <li>
                  <strong>Eng Lit Paper 2:</strong> Modern text + Poetry anthology (Belonging if you‚Äôre on that spec) + Unseen poetry.
                </li>
                <li>
                  <strong>Eng Lang Paper 1:</strong> Fiction extract + descriptive / narrative writing.
                </li>
                <li>
                  <strong>Eng Lang Paper 2:</strong> Non-fiction + transactional writing (argue / persuade).
                </li>
              </ul>

              <div class="exam-row">
                <span>Exam date:</span>
                <input type="date" id="examDateInput" />
                <button class="btn-ghost" id="saveExamDateBtn">Save</button>
                <span id="examCountdownText"></span>
              </div>

              <div class="stats-row" style="margin-top:6px;">
                <div class="stat-pill">
                  Sessions this device:
                  <span class="value" id="statSessions">0</span>
                </div>
                <div class="stat-pill">
                  Cards flipped:
                  <span class="value" id="statCards">0</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script>
    const APP_VERSION = "3";

    // -------- DEFAULT DECKS (ACC, Belonging quotes, structures) --------
    const DEFAULT_DECKS = {
      "A Christmas Carol ‚Äì Key Moments & Quotes": [
        {
          front: "Stave 1 ‚Äì overview\n\nMarley‚Äôs ghost warns Scrooge he‚Äôll wear ‚Äúchains‚Äù of his own selfish life.",
          back:
            "Stave 1 sets Scrooge up as cold and isolated (‚Äúsolitary as an oyster‚Äù), rejecting charity and speaking cruelly about the poor. Marley arrives in chains to show that a life focused on money leads to punishment and regret."
        },
        {
          front: "Stave 2 ‚Äì overview\n\nGhost of Christmas Past shows Scrooge his younger self.",
          back:
            "We see his lonely schooldays, Fezziwig‚Äôs joyful party and Belle ending the engagement. This proves Scrooge wasn‚Äôt always heartless ‚Äì greed slowly replaced love and belonging, which explains but doesn‚Äôt excuse his behaviour."
        },
        {
          front: "Stave 3 ‚Äì overview\n\nGhost of Christmas Present and the Cratchits.",
          back:
            "We visit the Cratchits‚Äô poor but warm Christmas, see Tiny Tim‚Äôs fragility and meet Ignorance and Want. Dickens contrasts Scrooge‚Äôs wealth with their kindness to criticise selfish attitudes to the poor."
        },
        {
          front: "Stave 4 ‚Äì overview\n\nGhost of Christmas Yet to Come and Scrooge‚Äôs death.",
          back:
            "Scrooge witnesses businessmen mocking his death, thieves stealing his belongings and an unvisited grave. No one cares that he has died, warning that a life without generosity leads to a lonely, meaningless end."
        },
        {
          front: "Stave 5 ‚Äì overview\n\nScrooge wakes up changed.",
          back:
            "He wakes grateful to be alive, buys the prize turkey, donates to charity, goes to Fred‚Äôs party and raises Bob‚Äôs wages. Dickens ends by showing that true happiness comes from relationships and generosity, not money."
        },
        {
          front: "\"solitary as an oyster\" (Stave 1)",
          back:
            "Simile emphasising Scrooge‚Äôs isolation and hard exterior. An oyster is closed and difficult to open, but it may hide a pearl ‚Äì hinting that Scrooge has hidden potential for kindness and change."
        },
        {
          front: "\"Bah! Humbug!\"",
          back:
            "Scrooge‚Äôs catchphrase dismissing Christmas as nonsense. It symbolises his rejection of joy, community and generosity ‚Äì everything Dickens wants Victorian society to value."
        },
        {
          front: "\"Are there no prisons?\" / \"And the Union workhouses?\"",
          back:
            "Scrooge uses the names of cruel institutions instead of helping the poor. Dickens criticises the Victorian belief that poverty is a crime and that harsh workhouses are an acceptable ‚Äòsolution‚Äô."
        },
        {
          front: "\"Mankind was my business!\" ‚Äì Marley",
          back:
            "Marley regrets that he cared only about ‚Äòtrade‚Äô instead of people. Dickens‚Äô main moral: our real duty is to other human beings, not just making profit."
        },
        {
          front: "\"A solitary child, neglected by his friends\"",
          back:
            "Narrator describing young Scrooge. His childhood loneliness explains why he fears emotional pain and shuts people out, showing how lack of love and belonging can damage someone."
        },
        {
          front: "\"Another idol has displaced me‚Ä¶ a golden one\" ‚Äì Belle",
          back:
            "Belle tells Scrooge that money has replaced her in his heart. Calling wealth an ‚Äòidol‚Äô suggests he worships it like a false god ‚Äì Dickens attacks greed as something people wrongly devote their lives to."
        },
        {
          front: "\"jolly Giant\" ‚Äì Ghost of Christmas Present",
          back:
            "The spirit is huge, warm and full of food. He represents generosity, abundance and the true spirit of Christmas ‚Äì sharing and caring for others."
        },
        {
          front: "\"This boy is Ignorance. This girl is Want.\"",
          back:
            "The children personify social problems created by neglecting the poor. Dickens warns that if society ignores ignorance and extreme poverty, the future will be ‚Äòdoom‚Äô. It‚Äôs a direct attack on selfishness."
        },
        {
          front: "\"deep black garment\" ‚Äì Ghost of Christmas Yet to Come",
          back:
            "The faceless, dark robe makes the spirit look like Death and creates fear. It symbolises the unknown future and the judgement that awaits Scrooge if he does not change."
        },
        {
          front: "Scrooge at his grave ‚Äì \"trembling\" and begging",
          back:
            "When Scrooge sees his own name on the grave, he realises this lonely death is the result of his choices. His fear and desperation show genuine regret and create the turning point for his redemption."
        },
        {
          front: "\"I will honour Christmas in my heart\"",
          back:
            "Scrooge promises to live out the values of Christmas (kindness, generosity, empathy) all year round. Dickens suggests that Christmas is an attitude, not just a single day."
        },
        {
          front: "\"as happy as an angel\" / \"as merry as a school-boy\" (Stave 5)",
          back:
            "Joyful similes show Scrooge‚Äôs complete transformation. Childlike happiness replaces his bitterness, proving that emotional change is possible even for someone as ‚Äòhard‚Äô as him."
        },
        {
          front: "Tiny Tim ‚Äì \"God bless us, every one!\"",
          back:
            "Tim‚Äôs blessing is repeated at the end of the novella. He represents innocence, faith and the vulnerable poor. Scrooge‚Äôs help saving Tim shows that individual kindness can literally save lives."
        }
      ],

      "Belonging ‚Äì All 15 Poems": [
        // Nature / childhood / memory
        {
          front: "\"It is the first mild day of March\"",
          back:
            "To My Sister ‚Äì nature and early spring symbolise new beginnings and hope. The speaker‚Äôs sense of belonging comes from sharing this simple outdoor moment with his sister, not from school or work."
        },
        {
          front: "\"There is a blessing in the air\"",
          back:
            "To My Sister ‚Äì the ‚Äòblessing‚Äô suggests that nature itself is comforting and almost spiritual. Being outside together makes human relationships feel calmer and more meaningful."
        },
        {
          front: "\"The morning road is thronged with merry boys\"",
          back:
            "Sunday Dip ‚Äì ‚Äòthronged‚Äô shows a crowd of children; the plural ‚Äòmerry boys‚Äô emphasises a shared, joyful community. Belonging here is about being part of a group tradition, not standing out."
        },
        {
          front: "\"And duck about, and try to lose their fears\"",
          back:
            "Sunday Dip ‚Äì the boys try to ‚Äòlose their fears‚Äô in the water. Playing together helps them feel safer; the group gives them the confidence they don‚Äôt have alone."
        },
        {
          front: "\"Mild the mist upon the hill\"",
          back:
            "Mild the Mist upon the Hill ‚Äì the soft ‚Äòmist‚Äô matches the gentle mood. The familiar hill is a place where the speaker‚Äôs emotions are held and understood ‚Äì a quiet kind of belonging to landscape."
        },
        {
          front: "\"I am a child once more\"",
          back:
            "Mild the Mist upon the Hill ‚Äì returning to childhood in memory shows how tied identity is to place. Even as an adult, the speaker mentally belongs to the hill where their younger self felt safe."
        },
        {
          front: "\"Clear and gentle stream! Known and loved so long\"",
          back:
            "Clear and Gentle Stream ‚Äì the stream is personified as something the speaker ‚Äòknows‚Äô and ‚Äòloves‚Äô. It feels like an old friend, showing that they belong to this landscape through long-term familiarity."
        },
        {
          front: "\"Many an afternoon of the summer day dreaming here I lay\"",
          back:
            "Clear and Gentle Stream ‚Äì the speaker daydreams at the stream as a child. It‚Äôs a private, imaginative space that shapes their sense of self, so they still feel attached to it later in life."
        },
        {
          front: "\"I remember, I remember, / The house where I was born\"",
          back:
            "I Remember, I Remember ‚Äì repetition emphasises obsession with the childhood home. Even though adult life is disappointing, the speaker‚Äôs identity is still rooted in that original place."
        },
        {
          front: "\"My spirit flew in feathers then, / That is so heavy now\"",
          back:
            "I Remember, I Remember ‚Äì contrasts light ‚Äòfeathers‚Äô with a ‚Äòheavy‚Äô spirit. Growing up has made the speaker feel weighed down and less free; adulthood feels less like home than childhood did."
        },

        // Urban / migration / split identity
        {
          front: "\"Wild seabirds / and fishermen pushing out to sea\"",
          back:
            "Island Man ‚Äì lively, natural images of the Caribbean show an active, communal world. This is the place the speaker‚Äôs mind returns to, suggesting his true emotional home is there, not in London."
        },
        {
          front: "\"comes back to sands / of a grey metallic soar\"",
          back:
            "Island Man ‚Äì the shift to ‚Äògrey metallic‚Äô London sounds harsh and industrial. The man is physically in the city but mentally on the island ‚Äì he doesn‚Äôt fully belong in either place."
        },
        {
          front: "\"We can all be refugees\"",
          back:
            "We Refugees ‚Äì direct, inclusive statement that anyone could lose their home. Belonging here is fragile and conditional; it can be taken away suddenly, regardless of who you are."
        },
        {
          front: "\"We can be hated by someone / for being someone\"",
          back:
            "We Refugees ‚Äì shows that people are targeted simply for their identity. It criticises prejudice and shows how belonging can be refused just because of who you are, not what you‚Äôve done."
        },
        {
          front: "\"Peckham Rye Lane is tight / As damp and crammed as a coconut shell\"",
          back:
            "Peckham Rye Lane ‚Äì the simile makes the street seem crowded but full of life. The poem shows belonging in a busy, multicultural London setting where different people coexist closely."
        },
        {
          front: "\"Each person is a sturdy hairbrush bristle\"",
          back:
            "Peckham Rye Lane ‚Äì comparing people to bristles suggests they‚Äôre small individually but strong together. The image presents community as something made up of many different individuals working as one."
        },

        // Identity / language
        {
          front: "\"Us takes in undulations ‚Äì / each wave in the sea\"",
          back:
            "Us ‚Äì the pronoun ‚Äòus‚Äô is compared to waves: constantly moving and hard to pin down. The speaker‚Äôs sense of belonging is fluid, not fixed; it shifts with language and relationships."
        },
        {
          front: "\"Oi, you, tell us where yer from\"",
          back:
            "Us ‚Äì the aggressive question shows how other people demand labels and clear answers. It suggests belonging is often something you have to justify or defend to others."
        },
        {
          front: "\"Dying to be French, dying to shrug and pout\"",
          back:
            "In Wales, wanting to be Italian ‚Äì teenage exaggeration (‚Äòdying‚Äô) shows intense longing to be someone else. The speaker craves a more glamorous identity than her own, showing insecurity about where she belongs."
        },
        {
          front: "\"Is there a name for that thing / you do when you are young?\"",
          back:
            "In Wales, wanting to be Italian ‚Äì rhetorical question captures a universal teen behaviour: trying on different identities. It suggests belonging is something you experiment with, not something fixed."
        },
        {
          front: "\"Being sixteen in Wales, longing to be Italian\"",
          back:
            "In Wales, wanting to be Italian ‚Äì a very specific, personal moment: stuck in one place but imagining another life. Her feeling of ‚Äòhome‚Äô is shaped as much by fantasy as by reality."
        },
        {
          front: "\"think me unfinished ‚Äì / a child who never sloughed off the childish estate\"",
          back:
            "Kumukanda ‚Äì the speaker feels ‚Äòunfinished‚Äô without the traditional initiation ritual. He hasn‚Äôt fully crossed into adult status in his culture, leaving him unsure where he truly belongs."
        },
        {
          front: "\"I was raised in a strange land\"",
          back:
            "Kumukanda ‚Äì ‚Äòstrange‚Äô emphasises distance from ancestral culture. He is shaped by two places at once, which complicates his identity and sense of belonging."
        },
        {
          front: "\"Some people would deny that I‚Äôm Jamaican British\"",
          back:
            "Jamaican British ‚Äì others question his identity, refusing him the label he chooses. It shows how belonging is controlled by social expectations about race, accent and nationality."
        },
        {
          front: "\"you cannot love sugar and hate your sweetness\"",
          back:
            "Jamaican British ‚Äì metaphor from his father: you can‚Äôt enjoy Jamaican culture (‚Äòsugar‚Äô) but reject Jamaican people (‚Äòsweetness‚Äô). It‚Äôs a reminder to accept your whole mixed identity."
        },

        // Home & memory
        {
          front: "\"It may be at war, it may be sick with tyrants\"",
          back:
            "The √âmigr√©e ‚Äì the speaker‚Äôs homeland is politically damaged, but she still loves it. Her emotional belonging doesn‚Äôt disappear even when the place becomes dangerous and corrupted."
        },
        {
          front: "\"I am branded by an impression of sunlight\"",
          back:
            "The √âmigr√©e ‚Äì ‚Äòbranded‚Äô suggests a permanent mark, but ‚Äòsunlight‚Äô is positive. Her identity is stamped by a warm, idealised memory of home that cannot be erased."
        },
        {
          front: "\"I comb its hair and love its shining eyes\"",
          back:
            "The √âmigr√©e ‚Äì treating the city like a child or friend shows deep affection. She nurtures the idea of her home place, even though she cannot safely live there."
        },
        {
          front: "\"an ugly collection\"",
          back:
            "My Mother‚Äôs Kitchen ‚Äì the mismatched plates are ‚Äòugly‚Äô, but they are full of history. They symbolise how migrant families carry bits of home with them and build belonging out of imperfect objects."
        },
        {
          front: "\"Planning another escape\"",
          back:
            "My Mother‚Äôs Kitchen ‚Äì repeated escapes show constant moving and instability. The kitchen becomes the only stable space where the family can feel at home for a while."
        },
        {
          front: "\"I will never inherit my mother‚Äôs trees\"",
          back:
            "My Mother‚Äôs Kitchen ‚Äì she can inherit kitchen objects but not the trees of the homeland. It shows that some parts of belonging (like landscape and deep roots) can‚Äôt be passed on fully to the next generation."
        },
        {
          front: "\"Ah! We both of us are alter‚Äôd, and now we talk no more\"",
          back:
            "Captain Cook (To My Brother) ‚Äì the siblings have changed and grown apart. Belonging in family is shown as something that can fade with time and distance."
        },
        {
          front: "\"We leave in leaving childhood, life‚Äôs fairy land behind\"",
          back:
            "Captain Cook (To My Brother) ‚Äì childhood is described as a magical ‚Äòfairy land‚Äô that is lost. Becoming an adult means losing that simple shared world where the siblings once belonged together."
        }
      ],

      "Sentence Starters & Structures": [
        {
          front: "Lit intro ‚Äì ACC or anthology",
          back:
            "‚ÄúIn <text>, <author> presents <theme> as‚Ä¶ in order to show that‚Ä¶‚Äù.\n\nExample: ‚ÄúIn A Christmas Carol, Dickens presents greed as dangerous in order to show that caring for others is more important than money.‚Äù"
        },
        {
          front: "ACC paragraph ‚Äì strong start",
          back:
            "‚ÄúAt the beginning of the novella, Scrooge is presented as‚Ä¶‚Äù\n‚ÄúLater on, Dickens develops this idea when‚Ä¶‚Äù\n‚ÄúBy the end of the novella, Scrooge is shown to have‚Ä¶‚Äù"
        },
        {
          front: "Zoom in on a word / method",
          back:
            "‚ÄúThe adjective ‚Äò‚Ä¶‚Äô suggests that‚Ä¶‚Äù\n‚ÄúThe verb ‚Äò‚Ä¶‚Äô implies that‚Ä¶‚Äù\n‚ÄúBy using a simile here, Dickens shows‚Ä¶‚Äù"
        },
        {
          front: "Linking to reader / context",
          back:
            "‚ÄúThis would shock a Victorian reader because‚Ä¶‚Äù\n‚ÄúThis reflects Victorian attitudes to‚Ä¶‚Äù\n‚ÄúFor a modern reader, this might suggest that‚Ä¶‚Äù"
        },
        {
          front: "Comparison sentence ‚Äì Belonging poems",
          back:
            "‚ÄúBoth poets explore the idea of <theme>, but in different ways.‚Äù\n‚ÄúSimilarly, in <poem B>, the poet also suggests that‚Ä¶‚Äù\n‚ÄúHowever, unlike <poem A>, <poem B> presents‚Ä¶‚Äù"
        },
        {
          front: "Unseen poetry ‚Äì opening sentence",
          back:
            "‚ÄúThe poet presents <feeling / situation> as‚Ä¶ using imagery and structure to suggest that‚Ä¶‚Äù"
        },
        {
          front: "Unseen comparison ‚Äì one line",
          back:
            "‚ÄúWhile the first poem presents <theme> as‚Ä¶, the second poem suggests that it is more‚Ä¶‚Äù"
        },
        {
          front: "Lang Paper 2 Q5 ‚Äì intro",
          back:
            "‚ÄúI strongly believe that‚Ä¶ because‚Ä¶‚Äù\n‚ÄúIn today‚Äôs society, it is essential that‚Ä¶‚Äù\n‚ÄúIt is unacceptable that‚Ä¶‚Äù"
        },
        {
          front: "Lang Paper 2 Q5 ‚Äì persuasive lines",
          back:
            "‚ÄúSurely we cannot ignore‚Ä¶?‚Äù\n‚ÄúIs it really fair that‚Ä¶?‚Äù\n‚ÄúIf we do nothing now, then in the future‚Ä¶‚Äù"
        },
        {
          front: "Lang Paper 2 Q5 ‚Äì conclusion",
          back:
            "‚ÄúIn conclusion, if we want a future where‚Ä¶, we must‚Ä¶‚Äù\n‚ÄúUltimately, it is our responsibility to‚Ä¶‚Äù"
        }
      ],

      "English Exams ‚Äì Quick Info & Tips": [
        {
          front: "Eng Lit Paper 2 ‚Äì overall structure",
          back:
            "Section A: Modern prose/drama.\nSection B: Poetry anthology comparison.\nSection C: Unseen poetry (single poem + comparison).\n\nUse this deck mainly to remind yourself what each section expects."
        },
        {
          front: "Unseen poetry ‚Äì 5-step plan",
          back:
            "1) Read once for vibe (emotion / situation).\n2) Read again and highlight language, structure, form.\n3) Jot 3‚Äì4 mini points (what + how + why).\n4) Turn them into paragraphs.\n5) Finish with a short conclusion about message + tone."
        },
        {
          front: "Anthology comparison ‚Äì what examiners want",
          back:
            "You must: (1) Answer the question. (2) Write about BOTH poems. (3) Compare similarities and differences. (4) Use quotes. (5) Comment on methods (language/structure) and some context where relevant."
        },
        {
          front: "Timed essay ‚Äì basic paragraph frame",
          back:
            "Point: answer the question.\nEvidence: short, accurate quote.\nMethod: zoom on a word / technique.\nExplain: effect + what it suggests.\nLink: back to question or compare to other poem."
        }
      ]
    };

    const ACC_QUESTIONS = [
      "How does Dickens present Scrooge‚Äôs attitude to the poor in Stave 1? Write about: ‚Ä¢ Scrooge ‚Ä¢ the poor ‚Ä¢ Dickens‚Äô message.",
      "How does Dickens show the importance of family in A Christmas Carol? Write about: ‚Ä¢ the Cratchits ‚Ä¢ Scrooge‚Äôs changing attitudes.",
      "How does Dickens use the Ghost of Christmas Present to criticise Victorian society? Refer to: ‚Ä¢ what the spirit shows Scrooge ‚Ä¢ Ignorance and Want.",
      "How is the theme of redemption presented in A Christmas Carol? Write about: ‚Ä¢ Scrooge at the start ‚Ä¢ key moments of change ‚Ä¢ Scrooge at the end.",
      "How does Dickens present poverty in the novella? Refer to: ‚Ä¢ the Cratchits ‚Ä¢ Tiny Tim ‚Ä¢ any other characters of your choice."
    ];

    const BELONGING_POEMS = [
      "To My Sister ‚Äì William Wordsworth",
      "Sunday Dip ‚Äì John Clare",
      "Mild the Mist upon the Hill ‚Äì Emily Bront√´",
      "Clear and Gentle Stream ‚Äì Robert Bridges",
      "I Remember, I Remember ‚Äì Thomas Hood",
      "Island Man ‚Äì Grace Nichols",
      "Peckham Rye Lane ‚Äì Amy Blakemore",
      "We Refugees ‚Äì Benjamin Zephaniah",
      "Us ‚Äì Zaffar Kunial",
      "In Wales, wanting to be Italian ‚Äì Imtiaz Dharker",
      "Kumukanda ‚Äì Kayo Chingonyi",
      "Jamaican British ‚Äì Raymond Antrobus",
      "My Mother‚Äôs Kitchen ‚Äì Choman Hardi",
      "Captain Cook (To My Brother) ‚Äì Letitia Elizabeth Landon",
      "The √âmigr√©e ‚Äì Carol Rumens"
    ];

    // -------- STATE --------
    let decks = {};
    let currentDeckName = "";
    let currentDeck = [];
    let studyOrder = [];
    let studyIndex = 0;
    let showBack = false;
    let orderedMode = false; // false = shuffled, true = in order

    let sessionCount = 0;
    let cardFlipCount = 0;
    let knownCount = 0;
    let unsureCount = 0;

    // -------- HELPERS --------
    function deepCopy(obj) {
      return JSON.parse(JSON.stringify(obj));
    }

    function shuffle(array) {
      const arr = array.slice();
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    function loadState() {
      const raw = localStorage.getItem("rev_app_state");
      if (raw) {
        try {
          const parsed = JSON.parse(raw);
          if (parsed.version === APP_VERSION && parsed.decks) {
            decks = parsed.decks;
          } else {
            decks = deepCopy(DEFAULT_DECKS);
          }
          sessionCount = parsed.sessions || 0;
          cardFlipCount = parsed.cards || 0;
        } catch {
          decks = deepCopy(DEFAULT_DECKS);
        }
      } else {
        decks = deepCopy(DEFAULT_DECKS);
      }
      updateStatsUI();
    }

    function saveState() {
      const payload = {
        version: APP_VERSION,
        decks,
        sessions: sessionCount,
        cards: cardFlipCount
      };
      localStorage.setItem("rev_app_state", JSON.stringify(payload));
    }

    function buildDeckSelect() {
      const deckSelect = document.getElementById("deckSelect");
      deckSelect.innerHTML = "";
      Object.keys(decks).forEach((name) => {
        const opt = document.createElement("option");
        opt.value = name;
        opt.textContent = name;
        deckSelect.appendChild(opt);
      });
    }

    function resetSessionCounts() {
      knownCount = 0;
      unsureCount = 0;
      document.getElementById("statKnown").textContent = knownCount;
      document.getElementById("statUnsure").textContent = unsureCount;
    }

    function resetStudyOrder() {
      if (!currentDeck || currentDeck.length === 0) {
        studyOrder = [];
        studyIndex = 0;
        return;
      }
      const sizeSelect = document.getElementById("sessionSize");
      let size;
      if (sizeSelect.value === "all") {
        size = currentDeck.length;
      } else {
        size = Math.min(parseInt(sizeSelect.value, 10), currentDeck.length);
      }
      const indices = [...Array(currentDeck.length).keys()];
      const base = orderedMode ? indices : shuffle(indices);
      studyOrder = base.slice(0, size);
      studyIndex = 0;
      const startOnBack = document.getElementById("startOnBack").checked;
      showBack = !!startOnBack;
      resetSessionCounts();
    }

    function renderCard() {
      const cardElem = document.getElementById("flashcardText");
      const labelElem = document.getElementById("flashcardFaceLabel");
      const deckTagElem = document.getElementById("flashcardDeckTag");
      const indexLabelElem = document.getElementById("flashcardIndexLabel");
      const progressFill = document.getElementById("progressFill");
      const progressLabel = document.getElementById("progressLabel");

      if (!currentDeck || currentDeck.length === 0 || studyOrder.length === 0) {
        labelElem.textContent = "Quote";
        cardElem.textContent = "No cards in this deck yet.";
        deckTagElem.textContent = currentDeckName || "";
        indexLabelElem.textContent = "";
        progressFill.style.width = "0%";
        progressLabel.textContent = "0 / 0";
        return;
      }

      const currentIndex = studyOrder[studyIndex];
      const card = currentDeck[currentIndex];

      labelElem.textContent = showBack ? "Analysis" : "Quote";
      cardElem.textContent = showBack ? card.back : card.front;
      deckTagElem.textContent = currentDeckName;
      indexLabelElem.textContent = `${studyIndex + 1} / ${studyOrder.length}`;

      const progress = ((studyIndex + 1) / studyOrder.length) * 100;
      progressFill.style.width = `${progress}%`;
      progressLabel.textContent = `${studyIndex + 1} / ${studyOrder.length}`;
    }

    function goNext() {
      if (studyOrder.length === 0) return;
      if (studyIndex < studyOrder.length - 1) {
        studyIndex++;
      }
      showBack = false;
      cardFlipCount++;
      updateStatsUI();
      saveState();
      renderCard();
    }

    function goPrev() {
      if (studyOrder.length === 0) return;
      if (studyIndex > 0) {
        studyIndex--;
      }
      showBack = false;
      cardFlipCount++;
      updateStatsUI();
      saveState();
      renderCard();
    }

    function restartSession() {
      resetStudyOrder();
      sessionCount++;
      cardFlipCount++;
      updateStatsUI();
      saveState();
      renderCard();
    }

    function selectDeck(name) {
      const deckSelect = document.getElementById("deckSelect");
      if (name && decks[name]) {
        deckSelect.value = name;
      } else {
        name = deckSelect.value;
      }
      currentDeckName = name;
      currentDeck = decks[name] || [];
      resetStudyOrder();
      renderCard();
    }

    function randomAccQuestion() {
      const el = document.getElementById("accQuestion");
      const idx = Math.floor(Math.random() * ACC_QUESTIONS.length);
      el.textContent = ACC_QUESTIONS[idx];
    }

    function updateStatsUI() {
      document.getElementById("statSessions").textContent = sessionCount;
      document.getElementById("statCards").textContent = cardFlipCount;
      document.getElementById("statKnown").textContent = knownCount;
      document.getElementById("statUnsure").textContent = unsureCount;
    }

    function buildPoemChecklist() {
      const list = document.getElementById("poemChecklist");
      list.innerHTML = "";
      BELONGING_POEMS.forEach((title) => {
        const id = "poem_" + title.replace(/[^a-z0-9]+/gi, "_").toLowerCase();
        const li = document.createElement("li");
        li.className = "poem-item";
        const cb = document.createElement("input");
        cb.type = "checkbox";
        cb.id = id;
        cb.checked = localStorage.getItem(id) === "1";
        cb.addEventListener("change", () => {
          localStorage.setItem(id, cb.checked ? "1" : "0");
        });
        const span = document.createElement("span");
        span.textContent = title;
        li.appendChild(cb);
        li.appendChild(span);
        list.appendChild(li);
      });
    }

    function updateExamCountdown() {
      const input = document.getElementById("examDateInput");
      const text = document.getElementById("examCountdownText");
      const value = input.value;
      if (!value) {
        text.textContent = "";
        return;
      }
      const today = new Date();
      const examDate = new Date(value + "T00:00:00");
      const diffMs = examDate - today;
      const diffDays = Math.ceil(diffMs / (1000 * 60 * 60 * 24));
      if (diffDays > 0) {
        text.textContent = `¬∑ ${diffDays} day(s) to go`;
      } else if (diffDays === 0) {
        text.textContent = "¬∑ Exam is today ‚Äì you‚Äôve got this.";
      } else {
        text.textContent = "¬∑ That date is in the past.";
      }
    }

    // -------- INIT --------
    document.addEventListener("DOMContentLoaded", () => {
      loadState();
      buildDeckSelect();
      buildPoemChecklist();

      const deckSelect = document.getElementById("deckSelect");
      const sessionSelect = document.getElementById("sessionSize");
      const flashcardElem = document.getElementById("flashcard");
      const orderToggle = document.getElementById("orderToggle");
      const orderLabel = document.getElementById("orderLabel");
      const startOnBack = document.getElementById("startOnBack");
      const focusMode = document.getElementById("focusMode");
      const examDateInput = document.getElementById("examDateInput");
      const saveExamDateBtn = document.getElementById("saveExamDateBtn");

      // load exam date if stored
      const storedDate = localStorage.getItem("exam_date");
      if (storedDate) {
        examDateInput.value = storedDate;
        updateExamCountdown();
      }

      deckSelect.addEventListener("change", () => {
        selectDeck();
      });

      sessionSelect.addEventListener("change", () => {
        resetStudyOrder();
        renderCard();
      });

      orderToggle.addEventListener("click", () => {
        orderedMode = !orderedMode;
        orderLabel.textContent = orderedMode ? "In order" : "Shuffled";
        resetStudyOrder();
        renderCard();
      });

      startOnBack.addEventListener("change", () => {
        showBack = !!startOnBack.checked;
        renderCard();
      });

      focusMode.addEventListener("change", () => {
        document.body.classList.toggle("focus-only", focusMode.checked);
      });

      flashcardElem.addEventListener("click", () => {
        if (!currentDeck || currentDeck.length === 0) return;
        showBack = !showBack;
        cardFlipCount++;
        updateStatsUI();
        saveState();
        renderCard();
      });

      document.getElementById("nextBtn").addEventListener("click", goNext);
      document.getElementById("prevBtn").addEventListener("click", goPrev);
      document.getElementById("restartBtn").addEventListener("click", restartSession);

      document.getElementById("gotItBtn").addEventListener("click", () => {
        if (!currentDeck || currentDeck.length === 0 || studyOrder.length === 0) return;
        knownCount++;
        cardFlipCount++;
        updateStatsUI();
        saveState();
        if (studyIndex < studyOrder.length - 1) {
          studyIndex++;
          showBack = false;
          renderCard();
        }
      });

      document.getElementById("notYetBtn").addEventListener("click", () => {
        if (!currentDeck || currentDeck.length === 0 || studyOrder.length === 0) return;
        unsureCount++;
        cardFlipCount++;
        updateStatsUI();
        saveState();
        if (studyIndex < studyOrder.length - 1) {
          studyIndex++;
          showBack = false;
          renderCard();
        }
      });

      document.getElementById("newQuestionBtn").addEventListener("click", randomAccQuestion);

      document.getElementById("quickAcc").addEventListener("click", () => {
        selectDeck("A Christmas Carol ‚Äì Key Moments & Quotes");
        document.getElementById("flashSection").scrollIntoView({ behavior: "smooth" });
      });

      document.getElementById("quickBelonging").addEventListener("click", () => {
        selectDeck("Belonging ‚Äì All 15 Poems");
        document.getElementById("flashSection").scrollIntoView({ behavior: "smooth" });
      });

      document.getElementById("quickStructures").addEventListener("click", () => {
        selectDeck("Sentence Starters & Structures");
        document.getElementById("structuresSection").scrollIntoView({ behavior: "smooth" });
      });

      saveExamDateBtn.addEventListener("click", () => {
        const value = examDateInput.value;
        if (!value) return;
        localStorage.setItem("exam_date", value);
        updateExamCountdown();
      });

      examDateInput.addEventListener("change", updateExamCountdown);

      // Default deck: ACC
      const defaultDeckName = "A Christmas Carol ‚Äì Key Moments & Quotes";
      if (decks[defaultDeckName]) {
        selectDeck(defaultDeckName);
      } else {
        const firstName = Object.keys(decks)[0];
        selectDeck(firstName);
      }
      randomAccQuestion();
    });
  </script>
</body>
</html>
