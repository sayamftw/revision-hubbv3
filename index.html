<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Revision Hub ‚Äì ACC & Belonging</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <style>
    :root {
      --bg: #05010b;
      --panel: #090317;
      --panel-soft: #0b041b;
      --border: #26163b;
      --accent: #ec4899;     /* pink/red */
      --accent-soft: rgba(236, 72, 153, 0.16);
      --accent-strong: #f97316;
      --text: #f9fafb;
      --muted: #9ca3af;
      --radius-lg: 18px;
      --radius-md: 12px;
      --shadow: 0 20px 40px rgba(0, 0, 0, 0.9);
      --fast: 0.14s ease-out;
    }

    * { box-sizing: border-box; }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
      background:
        radial-gradient(circle at top, #160322 0, #05010b 45%, #020009 100%);
      color: var(--text);
      -webkit-font-smoothing: antialiased;
      display: flex;
      flex-direction: column;
    }

    /* HEADER / NAV (iOS style segmented) */

    header {
      position: sticky;
      top: 0;
      z-index: 20;
      background: rgba(5, 1, 11, 0.96);
      backdrop-filter: blur(16px);
      border-bottom: 1px solid rgba(148, 27, 84, 0.6);
    }

    .header-inner {
      max-width: 980px;
      margin: 0 auto;
      padding: 10px 14px 8px;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
    }

    .title-block {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .logo-row {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .logo-dot {
      width: 18px;
      height: 18px;
      border-radius: 999px;
      background:
        radial-gradient(circle at 30% 30%, #fee2e2 0, #ec4899 40%, #4c1d95 80%);
      box-shadow:
        0 0 18px rgba(236, 72, 153, 0.9),
        0 0 30px rgba(147, 51, 234, 0.8);
    }

    .app-title {
      font-size: 18px;
      letter-spacing: 0.14em;
      text-transform: uppercase;
    }

    .subtitle {
      font-size: 11px;
      color: var(--muted);
    }

    .nav-tabs {
      display: flex;
      gap: 6px;
      padding: 4px;
      background: rgba(17, 24, 39, 0.96);
      border-radius: 999px;
      border: 1px solid rgba(148, 27, 84, 0.6);
    }

    .nav-tab {
      border: none;
      background: transparent;
      color: var(--muted);
      padding: 7px 12px;
      font-size: 12px;
      border-radius: 999px;
      cursor: pointer;
      white-space: nowrap;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition:
        background var(--fast),
        color var(--fast),
        transform var(--fast);
    }

    .nav-tab span.icon {
      font-size: 14px;
    }

    .nav-tab.active {
      background: var(--accent-soft);
      color: var(--text);
      transform: translateY(-0.5px);
    }

    @media (max-width: 500px) {
      .nav-tabs {
        width: 100%;
        justify-content: space-between;
      }
      .nav-tab {
        flex: 1;
        justify-content: center;
        padding-inline: 6px;
        font-size: 11px;
      }
    }

    main {
      flex: 1;
      display: flex;
      justify-content: center;
      padding: 10px 12px 16px;
    }

    .main-inner {
      max-width: 980px;
      width: 100%;
    }

    section.view {
      display: none;
      min-height: calc(100vh - 90px);
    }

    section.view.active {
      display: block;
    }

    /* PANELS */

    .panel {
      background: linear-gradient(145deg, var(--panel) 0%, var(--panel-soft) 100%);
      border-radius: var(--radius-lg);
      border: 1px solid rgba(148, 27, 84, 0.6);
      box-shadow: var(--shadow);
      padding: 14px 14px 16px;
      margin-bottom: 12px;
    }

    @media (min-width: 900px) {
      .panel {
        padding: 16px 18px 18px;
        margin-bottom: 18px;
      }
    }

    .panel-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
    }

    .panel-header h2 {
      margin: 0;
      font-size: 15px;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: #fee2e2;
    }

    .panel-header small {
      display: block;
      font-size: 11px;
      color: var(--muted);
      margin-top: 2px;
    }

    .panel-body {
      font-size: 13px;
      color: var(--text);
    }

    h3 {
      margin: 8px 0 4px;
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: #fecaca;
    }

    p {
      margin: 4px 0;
      line-height: 1.55;
    }

    .muted {
      color: var(--muted);
      font-size: 12px;
    }

    .grid-two {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1fr);
      gap: 10px;
    }

    @media (max-width: 800px) {
      .grid-two {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    ul.clean {
      list-style: none;
      padding-left: 0;
      margin: 4px 0 0;
      font-size: 13px;
    }

    ul.clean li {
      margin-bottom: 4px;
      display: flex;
      gap: 6px;
    }

    ul.clean li span.b {
      color: var(--accent);
      font-size: 12px;
      margin-top: 1px;
    }

    .chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 6px;
    }

    .chip {
      font-size: 11px;
      padding: 3px 9px;
      border-radius: 999px;
      border: 1px solid rgba(148, 27, 84, 0.7);
      background: rgba(17, 24, 39, 0.96);
      color: var(--muted);
    }

    .quote-list {
      border-radius: var(--radius-md);
      border: 1px solid rgba(148, 27, 84, 0.6);
      background: rgba(15, 23, 42, 0.75);
      padding: 8px 10px;
      margin-top: 4px;
    }

    .quote-item {
      margin-bottom: 6px;
    }

    .quote-text {
      font-style: italic;
      font-size: 13px;
    }

    .quote-note {
      font-size: 12px;
      color: var(--muted);
    }

    /* BUTTONS */

    button {
      border-radius: 999px;
      border: 1px solid rgba(148, 27, 84, 0.8);
      background: rgba(15, 23, 42, 0.97);
      color: var(--text);
      font-size: 13px;
      padding: 7px 12px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition:
        transform var(--fast),
        box-shadow var(--fast),
        border var(--fast),
        background var(--fast);
    }

    button span.icon {
      font-size: 14px;
    }

    button.primary {
      border-color: rgba(248, 113, 113, 0.9);
      background: linear-gradient(135deg, #f97316, #ec4899);
    }

    button.soft {
      border-color: rgba(148, 27, 84, 0.7);
      background: rgba(17, 24, 39, 0.96);
    }

    button:hover {
      transform: translateY(-0.5px);
      box-shadow: 0 0 12px rgba(148, 27, 84, 0.9);
    }

    button:active {
      transform: translateY(0.5px) scale(0.98);
      box-shadow: none;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      padding: 3px 9px;
      border-radius: 999px;
      border: 1px solid rgba(148, 27, 84, 0.7);
      background: rgba(17, 24, 39, 0.96);
      color: var(--muted);
    }

    .badge-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 10px rgba(34, 197, 94, 0.9);
    }

    .switch {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      color: var(--muted);
    }

    .switch input {
      appearance: none;
      width: 30px;
      height: 16px;
      border-radius: 999px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: rgba(15, 23, 42, 0.95);
      position: relative;
      cursor: pointer;
      outline: none;
      transition: background var(--fast), border var(--fast);
    }

    .switch input::before {
      content: "";
      position: absolute;
      top: 1px;
      left: 2px;
      width: 12px;
      height: 12px;
      border-radius: 999px;
      background: #f9fafb;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.7);
      transition: transform var(--fast);
    }

    .switch input:checked {
      background: linear-gradient(135deg, #ec4899, #f97316);
      border-color: rgba(248, 113, 113, 0.9);
    }

    .switch input:checked::before {
      transform: translateX(12px);
    }

    /* FLASHCARDS */

    .fc-top-row {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
    }

    .fc-top-row label {
      font-size: 12px;
      color: var(--muted);
      display: flex;
      flex-direction: column;
      gap: 3px;
      min-width: 160px;
    }

    select, textarea {
      background: rgba(15, 23, 42, 0.95);
      border-radius: var(--radius-md);
      border: 1px solid var(--border);
      color: var(--text);
      padding: 7px 10px;
      font-size: 13px;
      outline: none;
      width: 100%;
      transition: border var(--fast), box-shadow var(--fast), background var(--fast);
    }

    select:focus, textarea:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(236, 72, 153, 0.9);
      background: #020013;
    }

    .quick-decks {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 4px;
    }

    .flashcard-shell {
      margin-top: 10px;
    }

    .progress-bar {
      height: 5px;
      border-radius: 999px;
      background: rgba(148, 27, 84, 0.45);
      overflow: hidden;
      margin-bottom: 8px;
    }

    .progress-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #ec4899, #f97316);
      transition: width 0.2s ease-out;
    }

    .flashcard-box {
      border-radius: 18px;
      border: 1px solid rgba(148, 27, 84, 0.85);
      background: radial-gradient(circle at top left, #11051f 0, #050012 70%);
      padding: 16px 14px 14px;
      min-height: 190px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      cursor: pointer;
      transition:
        border var(--fast),
        box-shadow var(--fast),
        transform var(--fast);
    }

    .flashcard-box:active {
      transform: scale(0.99);
    }

    .flashcard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 11px;
      color: var(--muted);
      margin-bottom: 8px;
    }

    .flashcard-tag {
      padding: 3px 10px;
      border-radius: 999px;
      border: 1px solid rgba(248, 113, 113, 0.9);
      background: rgba(15, 23, 42, 0.96);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .tag-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: var(--accent);
      box-shadow:
        0 0 10px rgba(236, 72, 153, 0.9),
        0 0 18px rgba(248, 113, 113, 0.9);
    }

    .flashcard-text {
      font-size: 15px;
      line-height: 1.6;
      white-space: pre-wrap;
    }

    .flashcard-text.empty {
      font-size: 13px;
      font-style: italic;
      color: var(--muted);
    }

    .flashcard-footer {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 10px;
      font-size: 11px;
      color: var(--muted);
    }

    .fc-controls {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      align-items: center;
    }

    .fc-status {
      margin-top: 6px;
      font-size: 11px;
      color: var(--muted);
    }

    /* EDITOR */

    details {
      margin-top: 4px;
    }

    details summary {
      font-size: 12px;
      color: var(--muted);
      cursor: pointer;
      list-style: none;
    }

    details summary::-webkit-details-marker {
      display: none;
    }

    .summary-row {
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .summary-row span.chevron {
      font-size: 11px;
    }

    .edit-grid {
      margin-top: 8px;
      display: grid;
      grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
      gap: 8px;
    }

    @media (max-width: 700px) {
      .edit-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    textarea {
      min-height: 70px;
    }

    .edit-actions {
      margin-top: 8px;
      display: flex;
      justify-content: space-between;
      gap: 8px;
      flex-wrap: wrap;
      font-size: 11px;
      color: var(--muted);
    }

    .card-list {
      margin-top: 8px;
      border-radius: 12px;
      border: 1px solid rgba(148, 27, 84, 0.75);
      max-height: 210px;
      overflow: hidden auto;
      font-size: 12px;
    }

    .card-list-header {
      position: sticky;
      top: 0;
      z-index: 1;
      background: #05010b;
      border-bottom: 1px solid rgba(148, 27, 84, 0.9);
      padding: 6px 8px;
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.1fr) 70px;
      gap: 6px;
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--muted);
    }

    .card-row {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.1fr) 70px;
      gap: 6px;
      padding: 6px 8px;
      align-items: center;
    }

    .card-row:nth-child(odd) {
      background: rgba(17, 24, 39, 0.95);
    }

    .card-row:nth-child(even) {
      background: rgba(15, 23, 42, 0.96);
    }

    .card-cell {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    /* ANTHOLOGY LIST */

    .poem-list {
      margin-top: 4px;
      border-radius: var(--radius-md);
      border: 1px solid rgba(148, 27, 84, 0.7);
      background: rgba(15, 23, 42, 0.8);
      padding: 8px 10px;
    }

    .poem-item {
      margin-bottom: 6px;
    }

    .poem-title {
      font-size: 13px;
      font-weight: 500;
    }

    .poem-note {
      font-size: 12px;
      color: var(--muted);
    }

    @media (max-width: 480px) {
      .header-inner {
        padding-inline: 10px;
      }
      main {
        padding-inline: 8px;
      }
      .panel {
        padding-inline: 12px;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="header-inner">
      <div class="title-block">
        <div class="logo-row">
          <div class="logo-dot"></div>
          <div class="app-title">REVISION HUB</div>
        </div>
        <div class="subtitle">A Christmas Carol ¬∑ Belonging Anthology ¬∑ GCSE English</div>
      </div>
      <nav class="nav-tabs">
        <button class="nav-tab active" data-view="acc">
          <span class="icon">üìò</span> ACC
        </button>
        <button class="nav-tab" data-view="anthology">
          <span class="icon">üìö</span> Belonging
        </button>
        <button class="nav-tab" data-view="flashcards">
          <span class="icon">üÉè</span> Flashcards
        </button>
        <button class="nav-tab" data-view="papers">
          <span class="icon">üìù</span> Papers
        </button>
      </nav>
    </div>
  </header>

  <main>
    <div class="main-inner">
      <!-- ACC FRONT PAGE -->
      <section id="view-acc" class="view active">
        <div class="panel">
          <div class="panel-header">
            <div>
              <h2>A Christmas Carol ‚Äì core</h2>
              <small>5 staves ¬∑ what happens ¬∑ what Scrooge learns</small>
            </div>
            <button id="acc-open-deck" class="soft">
              <span class="icon">üÉè</span> ACC deck
            </button>
          </div>
          <div class="panel-body">
            <div class="grid-two">
              <div>
                <h3>Stave by stave</h3>
                <ul class="clean">
                  <li><span class="b">1</span><span><strong>Marley‚Äôs Ghost</strong> ‚Äì Scrooge introduced; refuses charity; Marley appears and warns him he‚Äôs made his ‚Äúchain‚Äù.</span></li>
                  <li><span class="b">2</span><span><strong>Past</strong> ‚Äì lonely school, loving sister, Fezziwig‚Äôs party, Belle leaves when he chooses money over love.</span></li>
                  <li><span class="b">3</span><span><strong>Present</strong> ‚Äì Cratchit family, Tiny Tim, Fred‚Äôs party, then Ignorance and Want under the Spirit‚Äôs robe.</span></li>
                  <li><span class="b">4</span><span><strong>Yet to Come</strong> ‚Äì people steal his things, no one misses him; he sees his neglected grave and panics.</span></li>
                  <li><span class="b">5</span><span><strong>Redemption</strong> ‚Äì wakes up joyful, gives to charity, raises Bob‚Äôs wages, becomes ‚Äúas good a man‚Äù.</span></li>
                </ul>
              </div>
              <div>
                <h3>Main themes</h3>
                <ul class="clean">
                  <li><span class="b">‚òÖ</span><span><strong>Poverty & charity</strong> ‚Äì criticises cruel attitudes to the poor (workhouses, ‚Äúsurplus population‚Äù).</span></li>
                  <li><span class="b">‚òÖ</span><span><strong>Responsibility</strong> ‚Äì Marley says ‚ÄúMankind was my business!‚Äù; we owe care to others.</span></li>
                  <li><span class="b">‚òÖ</span><span><strong>Family & community</strong> ‚Äì warmth of Fred and the Cratchits vs Scrooge‚Äôs isolation.</span></li>
                  <li><span class="b">‚òÖ</span><span><strong>Change & redemption</strong> ‚Äì shows even someone like Scrooge can change completely.</span></li>
                </ul>
                <div class="chip-row">
                  <span class="chip">Think: what does Scrooge learn in each stave?</span>
                  <span class="chip">Use short quotes to prove each theme.</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="panel">
          <div class="panel-header">
            <div>
              <h2>ACC quotes already in cards</h2>
              <small>Front = quote ¬∑ back = who / where / meaning</small>
            </div>
          </div>
          <div class="panel-body">
            <div class="quote-list">
              <div class="quote-item">
                <div class="quote-text">‚ÄúMarley was dead: to begin with.‚Äù</div>
                <div class="quote-note">Confirms Marley‚Äôs death and sets up the ghost story (Stave 1).</div>
              </div>
              <div class="quote-item">
                <div class="quote-text">‚ÄúAs solitary as an oyster.‚Äù</div>
                <div class="quote-note">Scrooge ‚Äì closed and isolated, but with potential for change.</div>
              </div>
              <div class="quote-item">
                <div class="quote-text">‚ÄúIf they would rather die, they had better do it, and decrease the surplus population.‚Äù</div>
                <div class="quote-note">Cruel attitude to the poor ‚Äì Dickens criticises this view.</div>
              </div>
              <div class="quote-item">
                <div class="quote-text">‚ÄúMankind was my business!‚Äù</div>
                <div class="quote-note">Marley regrets not caring for others; message to Scrooge.</div>
              </div>
              <div class="quote-item">
                <div class="quote-text">‚ÄúGod bless us, every one!‚Äù</div>
                <div class="quote-note">Tiny Tim ‚Äì moral centre, hopeful and inclusive.</div>
              </div>
              <div class="quote-item">
                <div class="quote-text">‚ÄúI am not the man I was.‚Äù</div>
                <div class="quote-note">Scrooge admits genuine change after seeing his future.</div>
              </div>
              <div class="quote-item">
                <div class="quote-text">‚ÄúHe became as good a friend, as good a master, and as good a man.‚Äù</div>
                <div class="quote-note">Narrator confirms Scrooge‚Äôs permanent redemption.</div>
              </div>
            </div>
            <p class="muted" style="margin-top:8px;">
              These are already in the <strong>‚ÄúACC ‚Äì Key Quotes‚Äù</strong> deck in the Flashcards tab.
            </p>
          </div>
        </div>
      </section>

      <!-- BELONGING ANTHOLOGY -->
      <section id="view-anthology" class="view">
        <div class="panel">
          <div class="panel-header">
            <div>
              <h2>Belonging Anthology</h2>
              <small>All 15 poems ‚Äì what they‚Äôre about</small>
            </div>
            <button id="anthology-open-deck" class="soft">
              <span class="icon">üÉè</span> Belonging deck
            </button>
          </div>
          <div class="panel-body">
            <p class="muted">
              Use this as a quick map. All of these ideas are already in the Belonging flashcard deck.
            </p>
            <div class="poem-list">
              <div class="poem-item">
                <div class="poem-title">Captain Cook (To My Brother)</div>
                <div class="poem-note">Childhood games vs adult distance; class and expectations damage closeness.</div>
              </div>
              <div class="poem-item">
                <div class="poem-title">Clear and Gentle Stream</div>
                <div class="poem-note">Peaceful countryside; stream symbolises calm, simple belonging in nature.</div>
              </div>
              <div class="poem-item">
                <div class="poem-title">In Wales, Wanting to be Italian</div>
                <div class="poem-note">Performs an Italian identity to feel confident and glamorous.</div>
              </div>
              <div class="poem-item">
                <div class="poem-title">I Remember, I Remember</div>
                <div class="poem-note">Returns to childhood home; realises the past wasn‚Äôt as perfect as he thought.</div>
              </div>
              <div class="poem-item">
                <div class="poem-title">Island Man</div>
                <div class="poem-note">Dreaming of Caribbean home vs waking in grey London ‚Äì split belonging.</div>
              </div>
              <div class="poem-item">
                <div class="poem-title">Jamaican British</div>
                <div class="poem-note">Accent, race and deafness affect how others see the speaker; stereotypes.</div>
              </div>
              <div class="poem-item">
                <div class="poem-title">Kumukanda</div>
                <div class="poem-note">Missed coming-of-age ritual; feels ‚Äúunfinished‚Äù between cultures.</div>
              </div>
              <div class="poem-item">
                <div class="poem-title">Mild the Mist Upon the Hill</div>
                <div class="poem-note">Soft, misty nature reflects calm, reflective mood; belonging in landscape.</div>
              </div>
              <div class="poem-item">
                <div class="poem-title">My Mother‚Äôs Kitchen</div>
                <div class="poem-note">Kitchen objects carry memory/culture; home moves but belonging stays.</div>
              </div>
              <div class="poem-item">
                <div class="poem-title">Peckham Rye Lane</div>
                <div class="poem-note">Busy multicultural London street; belonging in noisy city life.</div>
              </div>
              <div class="poem-item">
                <div class="poem-title">To My Sister</div>
                <div class="poem-note">Invites sister to enjoy spring; nature + family = shared belonging.</div>
              </div>
              <div class="poem-item">
                <div class="poem-title">The √âmigr√©e</div>
                <div class="poem-note">Loves city she left as a child, despite later danger; memory shapes belonging.</div>
              </div>
              <div class="poem-item">
                <div class="poem-title">Sunday Dip</div>
                <div class="poem-note">Children swimming in river; freedom and community in rural setting.</div>
              </div>
              <div class="poem-item">
                <div class="poem-title">Us</div>
                <div class="poem-note">Tiny word ‚Äúus‚Äù = world of two people; intimate belonging in a couple.</div>
              </div>
              <div class="poem-item">
                <div class="poem-title">We Refugees</div>
                <div class="poem-note">Anyone can become a refugee; shared humanity and challenge to prejudice.</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- FLASHCARDS -->
      <section id="view-flashcards" class="view">
        <div class="panel">
          <div class="panel-header">
            <div>
              <h2>Flashcards</h2>
              <small>ACC ¬∑ Belonging ¬∑ English papers ‚Äì pre-made</small>
            </div>
            <span class="badge">
              <span class="badge-dot"></span> Saved on this phone only
            </span>
          </div>
          <div class="panel-body">
            <div class="fc-top-row">
              <label>
                Deck
                <select id="deck-select"></select>
              </label>
              <span id="deck-info" class="muted">0 cards</span>
            </div>

            <div class="quick-decks">
              <button class="soft" data-quick-deck="ACC ‚Äì Key Quotes">ACC deck</button>
              <button class="soft" data-quick-deck="Belonging ‚Äì All 15 Poems">Belonging deck</button>
              <button class="soft" data-quick-deck="English Papers ‚Äì Overview">Papers deck</button>
            </div>

            <div class="flashcard-shell">
              <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
              </div>

              <div class="flashcard-box" id="study-card" title="Tap to flip">
                <div class="flashcard-header">
                  <div class="flashcard-tag">
                    <span class="tag-dot"></span>
                    <span id="card-side-label">Front ¬∑ Question</span>
                  </div>
                  <span id="card-meta" class="muted"></span>
                </div>
                <div class="flashcard-text empty" id="card-text">
                  No cards yet in this deck.
                </div>
                <div class="flashcard-footer">
                  <span><strong id="card-position">0 / 0</strong> ¬∑ deck: <span id="deck-name-label">‚Äî</span></span>
                  <span>Tap card to flip</span>
                </div>
              </div>

              <div class="fc-controls">
                <button id="fc-restart" class="primary">
                  <span class="icon">‚ñ∂</span> Start / restart
                </button>
                <button id="fc-prev" class="soft">‚óÄ Prev</button>
                <button id="fc-next" class="soft">Next ‚ñ∂</button>
                <button id="fc-flip" class="soft">‚ü≤ Flip</button>
                <div class="switch">
                  <input type="checkbox" id="fc-shuffle" />
                  <label for="fc-shuffle">Shuffle</label>
                </div>
              </div>

              <div class="fc-status" id="fc-status"></div>
            </div>
          </div>
        </div>

        <div class="panel">
          <div class="panel-header">
            <div>
              <h2>Edit / add cards</h2>
              <small>You can tweak decks, but you don‚Äôt have to</small>
            </div>
          </div>
          <div class="panel-body">
            <details>
              <summary>
                <span class="summary-row">
                  <span class="chevron">‚ñ∏</span>
                  <span>Open editor</span>
                </span>
              </summary>
              <div>
                <div class="edit-grid">
                  <div>
                    <div class="muted">Front (question / cue)</div>
                    <textarea id="edit-front" placeholder="e.g. Who says &quot;God bless us, every one!&quot;?"></textarea>
                  </div>
                  <div>
                    <div class="muted">Back (answer / explanation)</div>
                    <textarea id="edit-back" placeholder="Tiny Tim ‚Äì Stave 3, symbol of innocence and generosity."></textarea>
                  </div>
                </div>
                <div class="edit-actions">
                  <div>
                    <button id="save-card" class="primary">
                      <span class="icon">Ôºã</span> Save card
                    </button>
                    <button id="clear-card" class="soft">Clear</button>
                  </div>
                  <div>
                    Editing deck: <strong id="edit-deck-label">‚Äî</strong>
                  </div>
                </div>

                <div class="card-list" id="card-list">
                  <div class="card-list-header">
                    <div>Front</div>
                    <div>Back</div>
                    <div>Actions</div>
                  </div>
                </div>

                <p class="muted" style="margin-top:6px;">
                  Changes stay on this device in localStorage.
                </p>
              </div>
            </details>
          </div>
        </div>
      </section>

      <!-- PAPERS -->
      <section id="view-papers" class="view">
        <div class="panel">
          <div class="panel-header">
            <div>
              <h2>English papers</h2>
              <small>Matches the ‚ÄúEnglish Papers ‚Äì Overview‚Äù deck</small>
            </div>
          </div>
          <div class="panel-body">
            <div class="grid-two">
              <div>
                <h3>Literature</h3>
                <ul class="clean">
                  <li><span class="b">Lit P1</span><span><strong>Shakespeare + 19th-century novel</strong> ‚Äì one essay on your Shakespeare play, one on <strong>A Christmas Carol</strong> with an extract.</span></li>
                  <li><span class="b">Lit P2</span><span><strong>Modern text & poetry</strong> ‚Äì modern text essay, anthology comparison (Belonging poems), then unseen poetry.</span></li>
                </ul>
              </div>
              <div>
                <h3>Language</h3>
                <ul class="clean">
                  <li><span class="b">Lang P1</span><span>Fiction reading (Q1‚Äì4) + descriptive or narrative writing (Q5).</span></li>
                  <li><span class="b">Lang P2</span><span>Two non-fiction texts (Q1‚Äì4) + viewpoint/transactional writing (Q5).</span></li>
                </ul>
                <p class="muted" style="margin-top:8px;">
                  Use the Papers deck to memorise what‚Äôs in each paper and how to structure answers.
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </main>

  <script>
    // ---------- PRELOADED DECKS ----------
    const DEFAULT_DECKS = {
      "ACC ‚Äì Key Quotes": [
        {
          front: "\"Marley was dead: to begin with.\"",
          back: "Opening line. Confirms Marley is dead and sets up the ghost story (Stave 1)."
        },
        {
          front: "\"As solitary as an oyster.\"",
          back: "Narrator describing Scrooge in Stave 1 ‚Äì isolated and closed off, but with potential for change (a 'pearl' inside)."
        },
        {
          front: "\"Bah! Humbug!\"",
          back: "Scrooge rejecting Christmas in Stave 1 ‚Äì shows cynicism and lack of empathy."
        },
        {
          front: "\"If they would rather die, they had better do it, and decrease the surplus population.\"",
          back: "Scrooge talking about the poor in Stave 1 ‚Äì cruel attitude Dickens criticises."
        },
        {
          front: "\"Mankind was my business!\"",
          back: "Marley's Ghost (Stave 1) ‚Äì regrets focusing on money instead of caring for others."
        },
        {
          front: "\"A solitary child, neglected by his friends.\"",
          back: "Young Scrooge in Stave 2 ‚Äì shows his lonely upbringing and explains his coldness."
        },
        {
          front: "\"Another idol has displaced me... a golden one.\"",
          back: "Belle in Stave 2 ‚Äì says money has replaced love in Scrooge's life."
        },
        {
          front: "\"A jolly Giant, glorious to see.\"",
          back: "Description of the Ghost of Christmas Present ‚Äì symbol of warmth and abundance."
        },
        {
          front: "\"God bless us, every one!\"",
          back: "Tiny Tim in Stave 3 ‚Äì innocent, inclusive blessing; moral centre of the novella."
        },
        {
          front: "\"This boy is Ignorance. This girl is Want.\"",
          back: "Ghost of Christmas Present (Stave 3) ‚Äì personifies social problems from neglect."
        },
        {
          front: "\"I am not the man I was.\"",
          back: "Scrooge in Stave 4 ‚Äì open confession that he has changed."
        },
        {
          front: "\"I will honour Christmas in my heart, and try to keep it all the year.\"",
          back: "Scrooge (Stave 4‚Äì5) ‚Äì promises long-term generosity, not just one day."
        },
        {
          front: "\"He became as good a friend, as good a master, and as good a man.\"",
          back: "Narrator in Stave 5 ‚Äì confirms Scrooge‚Äôs full redemption and new identity."
        }
      ],
      "Belonging ‚Äì All 15 Poems": [
        {
          front: "Captain Cook (To My Brother) ‚Äì main idea",
          back: "Childhood games about Captain Cook vs adult distance. Shows how growing up and class expectations damage simple childhood belonging."
        },
        {
          front: "Clear and Gentle Stream ‚Äì belonging",
          back: "Nature and peace. The stream and countryside symbolise a calm, stable place where the speaker feels at home."
        },
        {
          front: "In Wales, Wanting to be Italian ‚Äì identity",
          back: "Speaker in Wales dreams of being Italian. Food, films and language show how people perform other identities to feel confident and like they belong."
        },
        {
          front: "I Remember, I Remember ‚Äì memory vs reality",
          back: "Returning to childhood home shows his past wasn‚Äôt as happy as he thought; challenges idealised memories of belonging."
        },
        {
          front: "Island Man ‚Äì split identity",
          back: "Caribbean island dreams clash with London mornings. He belongs to both places and neither fully ‚Äì divided sense of home."
        },
        {
          front: "Jamaican British ‚Äì stereotypes",
          back: "Accent, race and deafness shape how others see the speaker. Shows how labels like ‚ÄúJamaican British‚Äù can feel limiting."
        },
        {
          front: "Kumukanda ‚Äì initiation",
          back: "Refers to a coming-of-age ritual. Speaker never completed it, so feels ‚Äúunfinished‚Äù, stuck between Zambian heritage and British life."
        },
        {
          front: "Mild the Mist Upon the Hill ‚Äì mood",
          back: "Soft, misty landscape reflects a reflective, slightly sad mood. Nature is a quiet space of belonging."
        },
        {
          front: "My Mother‚Äôs Kitchen ‚Äì home",
          back: "Everyday kitchen objects carry memory and culture. Home can move but still hold the same sense of belonging."
        },
        {
          front: "Peckham Rye Lane ‚Äì city belonging",
          back: "Busy South London street; crowds and noise. Suggests belonging in messy, multicultural city life rather than tidy countryside."
        },
        {
          front: "To My Sister ‚Äì nature & family",
          back: "Speaker invites his sister to enjoy spring. Belonging is found in shared nature and sibling relationships."
        },
        {
          front: "The √âmigr√©e ‚Äì idealised city",
          back: "Speaker loves a city she left as a child. Even when it becomes dangerous, her childhood love remains, showing how memory shapes belonging."
        },
        {
          front: "Sunday Dip ‚Äì childhood freedom",
          back: "Children bathing in a river. Water symbolises freedom, fun and community in a rural setting."
        },
        {
          front: "Us ‚Äì tiny word, big meaning",
          back: "Explores the short word ‚Äúus‚Äù to show how a relationship creates its own private world of belonging."
        },
        {
          front: "We Refugees ‚Äì shared humanity",
          back: "Says anyone can become a refugee. Challenges stereotypes and stresses that we all share a basic human identity."
        }
      ],
      "English Papers ‚Äì Overview": [
        {
          front: "Literature Paper 1 ‚Äì structure",
          back: "Shakespeare + 19th-century novel. One essay on your Shakespeare play and one on A Christmas Carol, each with an extract to analyse and link to the whole text."
        },
        {
          front: "Literature Paper 2 ‚Äì structure",
          back: "Modern text, anthology poetry, unseen poetry. One modern text essay, one comparison of two anthology poems, then unseen poetry questions."
        },
        {
          front: "Language Paper 1 ‚Äì focus",
          back: "Q1‚Äì4: reading a fiction extract (information, language, structure, evaluation). Q5: descriptive or narrative writing based on an image or prompt."
        },
        {
          front: "Language Paper 2 ‚Äì focus",
          back: "Q1‚Äì4: reading two non-fiction texts and comparing ideas and methods. Q5: viewpoint / transactional writing (letter, article, speech)."
        },
        {
          front: "Anthology comparison ‚Äì what they want",
          back: "Compare how two poets present the same theme. Cover ideas, language methods, structure and some context, and link the poems clearly."
        },
        {
          front: "Unseen poetry ‚Äì simple plan",
          back: "1) Overall message and tone. 2) 2‚Äì3 short paragraphs on key methods (imagery, structure, sound). 3) Short conclusion linking back to the question."
        },
        {
          front: "Language Paper 2 Q5 ‚Äì easy structure",
          back: "Intro with clear viewpoint. 2‚Äì3 strong main paragraphs with examples. Use persuasive techniques. Finish with a confident conclusion."
        },
        {
          front: "Timing tip ‚Äì general",
          back: "Try to keep at least 40% of the paper time for the big writing/essay question. If time is tight, always write a quick conclusion."
        }
      ]
    };

    const STORAGE_KEY = "revHubDecks_phone_v1";

    let decks = {};
    let currentDeckName = null;
    let studyOrder = [];
    let currentStudyIndex = 0;
    let showingFront = true;
    let sessionProgress = {}; // { deckName: { index } }

    // NAV

    const navTabs = document.querySelectorAll(".nav-tab");
    const views = {
      acc: document.getElementById("view-acc"),
      anthology: document.getElementById("view-anthology"),
      flashcards: document.getElementById("view-flashcards"),
      papers: document.getElementById("view-papers")
    };

    function setView(name) {
      Object.values(views).forEach(v => v.classList.remove("active"));
      if (views[name]) views[name].classList.add("active");
      navTabs.forEach(btn => {
        btn.classList.toggle("active", btn.dataset.view === name);
      });
    }

    navTabs.forEach(btn => {
      btn.addEventListener("click", () => setView(btn.dataset.view));
    });

    document.getElementById("acc-open-deck").addEventListener("click", () => {
      setView("flashcards");
      switchToDeck("ACC ‚Äì Key Quotes");
      window.scrollTo({ top: 0, behavior: "smooth" });
    });

    document.getElementById("anthology-open-deck").addEventListener("click", () => {
      setView("flashcards");
      switchToDeck("Belonging ‚Äì All 15 Poems");
      window.scrollTo({ top: 0, behavior: "smooth" });
    });

    // STORAGE

    function deepCopyDefaults() {
      return JSON.parse(JSON.stringify(DEFAULT_DECKS));
    }

    function loadDecks() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        if (raw) {
          const parsed = JSON.parse(raw);
          decks = parsed && typeof parsed === "object" ? parsed : {};
        } else {
          decks = {};
        }
      } catch {
        decks = {};
      }

      const defaults = deepCopyDefaults();
      for (const name in defaults) {
        if (!Object.prototype.hasOwnProperty.call(decks, name)) {
          decks[name] = defaults[name];
        }
      }

      const names = Object.keys(decks);
      if (!names.length) {
        decks = deepCopyDefaults();
      }

      if (!currentDeckName || !decks[currentDeckName]) {
        currentDeckName = "ACC ‚Äì Key Quotes";
        if (!decks[currentDeckName]) {
          currentDeckName = Object.keys(decks)[0];
        }
      }

      saveDecks();
    }

    function saveDecks() {
      try {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(decks));
      } catch {
        // ignore
      }
    }

    // FLASHCARD UI

    const deckSelectEl = document.getElementById("deck-select");
    const deckInfoEl = document.getElementById("deck-info");
    const deckNameLabelEl = document.getElementById("deck-name-label");
    const cardTextEl = document.getElementById("card-text");
    const cardSideLabelEl = document.getElementById("card-side-label");
    const cardMetaEl = document.getElementById("card-meta");
    const cardPositionEl = document.getElementById("card-position");
    const progressFillEl = document.getElementById("progress-fill");
    const statusEl = document.getElementById("fc-status");
    const studyCardEl = document.getElementById("study-card");
    const shuffleToggleEl = document.getElementById("fc-shuffle");

    const editFrontEl = document.getElementById("edit-front");
    const editBackEl = document.getElementById("edit-back");
    const editDeckLabelEl = document.getElementById("edit-deck-label");
    const cardListEl = document.getElementById("card-list");

    function renderDeckOptions() {
      deckSelectEl.innerHTML = "";
      const names = Object.keys(decks).sort();
      names.forEach(name => {
        const opt = document.createElement("option");
        opt.value = name;
        opt.textContent = name;
        deckSelectEl.appendChild(opt);
      });
      if (!currentDeckName || !decks[currentDeckName]) {
        currentDeckName = names[0];
      }
      deckSelectEl.value = currentDeckName;
      renderDeckInfo();
      refreshStudyState(true);
      renderCardList();
    }

    function renderDeckInfo() {
      const cards = decks[currentDeckName] || [];
      deckInfoEl.textContent = `${cards.length} card${cards.length === 1 ? "" : "s"}`;
      deckNameLabelEl.textContent = currentDeckName || "‚Äî";
      editDeckLabelEl.textContent = currentDeckName || "‚Äî";
    }

    function buildStudyOrder() {
      const cards = decks[currentDeckName] || [];
      studyOrder = cards.map((_, i) => i);
      if (shuffleToggleEl.checked) {
        for (let i = studyOrder.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [studyOrder[i], studyOrder[j]] = [studyOrder[j], studyOrder[i]];
        }
      }
    }

    function resetStudyOrder() {
      const cards = decks[currentDeckName] || [];
      buildStudyOrder();
      currentStudyIndex = 0;

      const prog = sessionProgress[currentDeckName];
      if (prog && typeof prog.index === "number" && prog.index >= 0 && prog.index < cards.length) {
        currentStudyIndex = prog.index;
      }
      showingFront = true;
      refreshStudyState();
    }

    function refreshStudyState() {
      const cards = decks[currentDeckName] || [];
      renderDeckInfo();

      if (!cards.length) {
        cardTextEl.textContent = "No cards yet in this deck.";
        cardTextEl.classList.add("empty");
        cardSideLabelEl.textContent = "Front ¬∑ Question";
        cardMetaEl.textContent = "";
        cardPositionEl.textContent = "0 / 0";
        progressFillEl.style.width = "0%";
        statusEl.textContent = "";
        return;
      }

      if (!studyOrder.length || studyOrder.length !== cards.length) {
        buildStudyOrder();
      }

      if (currentStudyIndex < 0) currentStudyIndex = 0;
      if (currentStudyIndex >= studyOrder.length) currentStudyIndex = studyOrder.length - 1;

      const cardIndex = studyOrder[currentStudyIndex];
      const card = cards[cardIndex];

      const text = showingFront ? card.front : card.back;
      cardTextEl.textContent = text || "(empty)";
      cardTextEl.classList.toggle("empty", !text);

      cardSideLabelEl.textContent = showingFront ? "Front ¬∑ Question" : "Back ¬∑ Answer";
      cardMetaEl.textContent = `Card ${cardIndex + 1} in deck`;
      cardPositionEl.textContent = `${currentStudyIndex + 1} / ${cards.length}`;

      const progress = ((currentStudyIndex + 1) / cards.length) * 100;
      progressFillEl.style.width = `${progress}%`;

      statusEl.textContent = `Studying: ${currentDeckName}`;
      sessionProgress[currentDeckName] = { index: currentStudyIndex };
    }

    function flipCard() {
      const cards = decks[currentDeckName] || [];
      if (!cards.length) return;
      showingFront = !showingFront;
      refreshStudyState();
    }

    function moveCard(delta) {
      const cards = decks[currentDeckName] || [];
      if (!cards.length) return;
      currentStudyIndex += delta;
      if (currentStudyIndex < 0) currentStudyIndex = cards.length - 1;
      if (currentStudyIndex >= cards.length) currentStudyIndex = 0;
      showingFront = true;
      refreshStudyState();
    }

    function switchToDeck(name) {
      if (!decks[name]) return;
      currentDeckName = name;
      deckSelectEl.value = currentDeckName;
      resetStudyOrder();
      renderCardList();
    }

    // EDITOR

    function clearEditForm() {
      editFrontEl.value = "";
      editBackEl.value = "";
      delete editFrontEl.dataset.index;
    }

    function renderCardList() {
      const cards = decks[currentDeckName] || [];
      const oldRows = Array.from(cardListEl.children).slice(1);
      oldRows.forEach(r => r.remove());

      cards.forEach((card, idx) => {
        const row = document.createElement("div");
        row.className = "card-row";

        const frontCell = document.createElement("div");
        frontCell.className = "card-cell";
        frontCell.textContent = card.front || "(front empty)";

        const backCell = document.createElement("div");
        backCell.className = "card-cell";
        backCell.textContent = card.back || "(back empty)";

        const actionsCell = document.createElement("div");

        const editBtn = document.createElement("button");
        editBtn.className = "soft";
        editBtn.style.fontSize = "11px";
        editBtn.textContent = "Edit";
        editBtn.addEventListener("click", () => {
          editFrontEl.value = card.front || "";
          editBackEl.value = card.back || "";
          editFrontEl.dataset.index = String(idx);
        });

        const delBtn = document.createElement("button");
        delBtn.className = "soft";
        delBtn.style.fontSize = "11px";
        delBtn.textContent = "‚úï";
        delBtn.addEventListener("click", () => {
          if (!confirm("Delete this card?")) return;
          decks[currentDeckName].splice(idx, 1);
          saveDecks();
          resetStudyOrder();
          renderCardList();
        });

        actionsCell.appendChild(editBtn);
        actionsCell.appendChild(delBtn);

        row.appendChild(frontCell);
        row.appendChild(backCell);
        row.appendChild(actionsCell);

        cardListEl.appendChild(row);
      });
    }

    // EVENTS

    deckSelectEl.addEventListener("change", () => {
      currentDeckName = deckSelectEl.value;
      resetStudyOrder();
      renderCardList();
    });

    document.getElementById("fc-restart").addEventListener("click", resetStudyOrder);
    document.getElementById("fc-prev").addEventListener("click", () => moveCard(-1));
    document.getElementById("fc-next").addEventListener("click", () => moveCard(1));
    document.getElementById("fc-flip").addEventListener("click", flipCard);
    shuffleToggleEl.addEventListener("change", resetStudyOrder);
    studyCardEl.addEventListener("click", flipCard);

    document.querySelectorAll("[data-quick-deck]").forEach(btn => {
      btn.addEventListener("click", () => {
        const name = btn.getAttribute("data-quick-deck");
        switchToDeck(name);
      });
    });

    document.getElementById("save-card").addEventListener("click", () => {
      const front = editFrontEl.value.trim();
      const back = editBackEl.value.trim();
      if (!front && !back) {
        alert("Add something to the front or back first.");
        return;
      }
      const cards = decks[currentDeckName] || [];
      const idxStr = editFrontEl.dataset.index;
      if (idxStr !== undefined) {
        const idx = parseInt(idxStr, 10);
        if (!Number.isNaN(idx) && cards[idx]) {
          cards[idx] = { front, back };
        }
      } else {
        cards.push({ front, back });
      }
      decks[currentDeckName] = cards;
      saveDecks();
      clearEditForm();
      resetStudyOrder();
      renderCardList();
    });

    document.getElementById("clear-card").addEventListener("click", clearEditForm);

    // INIT

    loadDecks();
    renderDeckOptions();
    setView("acc");
  </script>
</body>
</html>
