<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ACC & Belonging Revision Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #050514;
      --bg-soft: #0b0b20;
      --bg-softer: #111129;
      --card: #141432;
      --accent: #a855ff;
      --accent-soft: rgba(168, 85, 255, 0.35);
      --accent-strong: #c084fc;
      --accent-text: #f5e9ff;
      --border-subtle: rgba(255, 255, 255, 0.06);
      --text-main: #f9fafb;
      --text-muted: #9ca3af;
      --danger: #f97373;
      --radius-lg: 18px;
      --radius-md: 12px;
      --radius-pill: 999px;
      --shadow-soft: 0 24px 60px rgba(0, 0, 0, 0.65);
      --shadow-glow: 0 0 30px rgba(168, 85, 255, 0.35);
      --transition-fast: 0.18s ease-out;
      --transition-med: 0.24s ease-out;
      --blur-bg: blur(16px);
    }

    * {
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
      color: var(--text-main);
      background:
        radial-gradient(circle at top, rgba(168, 85, 255, 0.25), transparent 55%),
        radial-gradient(circle at bottom, rgba(37, 99, 235, 0.24), transparent 60%),
        var(--bg);
      display: flex;
      justify-content: center;
    }

    .app-shell {
      width: 100%;
      max-width: 880px;
      padding: 18px 12px 32px;
    }

    @media (min-width: 700px) {
      .app-shell {
        padding: 24px 16px 40px;
      }
    }

    header {
      padding: 16px 18px 14px;
      border-radius: var(--radius-lg);
      background: linear-gradient(
          135deg,
          rgba(15, 23, 42, 0.85),
          rgba(17, 24, 39, 0.96)
        );
      border: 1px solid rgba(148, 163, 184, 0.35);
      box-shadow: var(--shadow-soft), 0 0 45px rgba(88, 28, 135, 0.4);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      position: sticky;
      top: 0;
      z-index: 5;
      backdrop-filter: var(--blur-bg);
    }

    .app-title {
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    .app-title-main {
      font-size: 1.12rem;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      color: var(--accent-strong);
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .app-logo-dot {
      width: 9px;
      height: 9px;
      border-radius: 50%;
      background: var(--accent);
      box-shadow: 0 0 16px rgba(168, 85, 255, 0.9);
    }

    .app-subtitle {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .quick-buttons {
      display: flex;
      gap: 8px;
    }

    .pill-btn {
      border-radius: var(--radius-pill);
      border: 1px solid rgba(148, 163, 184, 0.35);
      padding: 6px 12px;
      font-size: 0.76rem;
      display: flex;
      align-items: center;
      gap: 6px;
      background: radial-gradient(circle at top, rgba(24, 24, 44, 0.9), rgba(6, 6, 20, 0.9));
      color: var(--text-main);
      cursor: pointer;
      transition:
        background var(--transition-fast),
        border-color var(--transition-fast),
        transform var(--transition-fast),
        box-shadow var(--transition-fast);
      white-space: nowrap;
    }

    .pill-btn.primary {
      border-color: rgba(168, 85, 255, 0.7);
      background: radial-gradient(circle at top, rgba(76, 29, 149, 0.9), rgba(24, 24, 44, 0.96));
      box-shadow: 0 12px 30px rgba(88, 28, 135, 0.6);
    }

    .pill-btn span.icon {
      font-size: 0.95rem;
    }

    .pill-btn:active {
      transform: scale(0.97) translateY(1px);
      box-shadow: none;
    }

    main {
      margin-top: 16px;
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .card-shell {
      border-radius: var(--radius-lg);
      background: radial-gradient(circle at top left, rgba(15, 23, 42, 0.9), #050515);
      border: 1px solid var(--border-subtle);
      box-shadow: var(--shadow-soft);
      padding: 16px 14px 14px;
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    @media (min-width: 780px) {
      .card-shell {
        padding: 18px 18px 16px;
      }
    }

    .section-heading {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }

    .section-heading h2 {
      margin: 0;
      font-size: 0.96rem;
      text-transform: uppercase;
      letter-spacing: 0.13em;
      color: rgba(226, 232, 240, 0.85);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .section-heading h2::before {
      content: "";
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: radial-gradient(circle at center, var(--accent), transparent);
      box-shadow: 0 0 16px rgba(168, 85, 255, 0.9);
    }

    .section-heading small {
      font-size: 0.74rem;
      color: var(--text-muted);
    }

    .hero-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.6fr) minmax(0, 1.1fr);
      gap: 10px;
    }

    @media (max-width: 720px) {
      .hero-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .hero-panel {
      border-radius: var(--radius-md);
      border: 1px solid var(--border-subtle);
      background: radial-gradient(circle at top left, rgba(88, 28, 135, 0.35), transparent),
        radial-gradient(circle at bottom right, rgba(15, 118, 110, 0.2), transparent),
        rgba(10, 10, 31, 0.96);
      padding: 10px 11px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      position: relative;
      overflow: hidden;
    }

    .hero-panel::after {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top right, rgba(248, 250, 252, 0.05), transparent 55%);
      pointer-events: none;
    }

    .hero-title {
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--accent-text);
      display: flex;
      align-items: baseline;
      gap: 6px;
    }

    .hero-title span.tag {
      font-size: 0.64rem;
      padding: 2px 6px;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(209, 213, 219, 0.45);
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }

    .hero-body {
      font-size: 0.78rem;
      color: var(--text-muted);
      line-height: 1.4;
    }

    .hero-list {
      margin: 6px 0 0;
      padding-left: 16px;
      font-size: 0.76rem;
      color: rgba(209, 213, 219, 0.92);
    }

    .hero-list li {
      margin-bottom: 2px;
    }

    .hero-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 4px;
      z-index: 1;
    }

    .hero-pill {
      font-size: 0.72rem;
      padding: 4px 8px;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(148, 163, 184, 0.4);
      background: rgba(15, 23, 42, 0.9);
      color: var(--text-main);
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .hero-pill strong {
      color: var(--accent-strong);
      font-weight: 600;
    }

    .hero-question-box {
      margin-top: 4px;
      padding: 8px;
      border-radius: 12px;
      background: rgba(15, 23, 42, 0.92);
      border: 1px solid rgba(55, 65, 81, 0.7);
      font-size: 0.78rem;
      color: rgba(229, 231, 235, 0.96);
      display: flex;
      flex-direction: column;
      gap: 6px;
      box-shadow: 0 18px 35px rgba(15, 23, 42, 0.8);
    }

    .hero-question-label {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.13em;
      color: rgba(156, 163, 175, 0.95);
    }

    .hero-question-text {
      min-height: 2.6em;
    }

    .hero-question-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
    }

    .hero-question-footer small {
      font-size: 0.7rem;
      color: var(--text-muted);
    }

    .btn-ghost {
      border-radius: var(--radius-pill);
      border: 1px solid rgba(148, 163, 184, 0.5);
      background: rgba(15, 23, 42, 0.9);
      color: var(--accent-text);
      padding: 4px 10px;
      font-size: 0.75rem;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      transition:
        background var(--transition-fast),
        border-color var(--transition-fast),
        transform var(--transition-fast);
    }

    .btn-ghost:active {
      transform: scale(0.97) translateY(1px);
    }

    /* Flashcard controls */

    .controls-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      justify-content: space-between;
    }

    .control-group {
      display: flex;
      align-items: center;
      gap: 6px;
      flex-wrap: wrap;
      font-size: 0.76rem;
      color: var(--text-muted);
    }

    label {
      font-size: 0.76rem;
    }

    select,
    button,
    input[type="checkbox"] {
      font-family: inherit;
    }

    .select {
      border-radius: var(--radius-pill);
      padding: 5px 28px 5px 10px;
      border: 1px solid rgba(75, 85, 99, 0.9);
      background:
        radial-gradient(circle at top left, rgba(88, 28, 135, 0.35), transparent 55%),
        rgba(15, 23, 42, 0.96);
      color: var(--text-main);
      font-size: 0.78rem;
      position: relative;
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
      min-width: 140px;
    }

    .select-wrapper {
      position: relative;
      display: inline-flex;
      align-items: center;
    }

    .select-wrapper::after {
      content: "‚ñæ";
      position: absolute;
      right: 10px;
      font-size: 0.7rem;
      color: var(--text-muted);
      pointer-events: none;
    }

    .control-chip {
      padding: 4px 9px;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(55, 65, 81, 0.85);
      background: rgba(15, 23, 42, 0.96);
      font-size: 0.72rem;
      color: var(--text-muted);
      display: inline-flex;
      align-items: center;
      gap: 4px;
      white-space: nowrap;
    }

    .control-chip input[type="checkbox"] {
      accent-color: var(--accent);
      width: 13px;
      height: 13px;
    }

    .order-toggle {
      border-radius: var(--radius-pill);
      padding: 4px 10px;
      font-size: 0.72rem;
      border: 1px solid rgba(55, 65, 81, 0.85);
      background: rgba(15, 23, 42, 0.96);
      color: var(--text-muted);
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
    }

    .order-toggle span.mode {
      color: var(--accent-text);
      font-weight: 600;
    }

    /* Flashcard */

    .flashcard-outer {
      margin-top: 4px;
    }

    .flashcard-frame {
      border-radius: var(--radius-lg);
      background:
        radial-gradient(circle at top, rgba(148, 27, 255, 0.28), transparent 60%),
        radial-gradient(circle at bottom, rgba(14, 116, 144, 0.22), transparent 60%),
        linear-gradient(135deg, #050515, #050514);
      border: 1px solid rgba(148, 163, 184, 0.6);
      box-shadow: var(--shadow-soft), var(--shadow-glow);
      padding: 12px 12px 11px;
      position: relative;
      overflow: hidden;
    }

    .flashcard {
      border-radius: calc(var(--radius-lg) - 6px);
      background: rgba(6, 6, 24, 0.98);
      min-height: 170px;
      max-height: 320px;
      overflow-y: auto;
      padding: 12px 12px 14px;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      gap: 8px;
      transition:
        transform var(--transition-med),
        box-shadow var(--transition-med),
        background var(--transition-med),
        border-color var(--transition-med);
      border: 1px solid rgba(55, 65, 81, 0.9);
    }

    .flashcard:hover {
      transform: translateY(-1px);
      box-shadow: 0 18px 45px rgba(15, 23, 42, 0.8),
        0 0 30px rgba(168, 85, 255, 0.35);
    }

    .flashcard-face-label {
      font-size: 0.7rem;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: rgba(148, 163, 184, 0.9);
    }

    .flashcard-main-text {
      font-size: 0.92rem;
      line-height: 1.46;
      color: rgba(249, 250, 251, 0.98);
      white-space: pre-line;
    }

    .flashcard-meta {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 6px;
      margin-top: 4px;
    }

    .flashcard-meta small {
      font-size: 0.72rem;
      color: var(--text-muted);
    }

    .flashcard-meta .deck-tag {
      color: var(--accent-strong);
      font-weight: 500;
    }

    .flashcard-hint {
      font-size: 0.7rem;
      color: rgba(156, 163, 175, 0.9);
      margin-top: 4px;
    }

    .flashcard-hint span {
      color: var(--accent-strong);
    }

    /* Flashcard footer */

    .flashcard-footer {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      margin-top: 8px;
      font-size: 0.76rem;
      color: var(--text-muted);
      flex-wrap: wrap;
    }

    .progress {
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .progress-bar {
      width: 120px;
      height: 5px;
      border-radius: 999px;
      background: rgba(31, 41, 55, 0.9);
      overflow: hidden;
      position: relative;
    }

    .progress-fill {
      height: 100%;
      width: 0%;
      border-radius: inherit;
      background: linear-gradient(90deg, var(--accent), #38bdf8);
      transition: width 0.22s ease-out;
    }

    .progress span {
      font-size: 0.72rem;
    }

    .nav-buttons {
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .nav-buttons button {
      border-radius: var(--radius-pill);
      border: 1px solid rgba(75, 85, 99, 0.9);
      background: radial-gradient(circle at top, rgba(15, 23, 42, 0.96), rgba(9, 9, 25, 0.98));
      color: var(--text-main);
      padding: 4px 10px;
      font-size: 0.76rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      transition:
        background var(--transition-fast),
        transform var(--transition-fast),
        box-shadow var(--transition-fast);
    }

    .nav-buttons button.primary {
      border-color: rgba(168, 85, 255, 0.9);
      background: radial-gradient(circle at top, rgba(76, 29, 149, 0.98), rgba(30, 64, 175, 0.95));
      box-shadow: 0 10px 28px rgba(88, 28, 135, 0.7);
    }

    .nav-buttons button:active {
      transform: scale(0.97) translateY(1px);
      box-shadow: none;
    }

    /* Extras: checklist + stats */

    .extras-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.3fr) minmax(0, 1fr);
      gap: 10px;
    }

    @media (max-width: 720px) {
      .extras-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .extra-panel {
      border-radius: var(--radius-md);
      border: 1px solid var(--border-subtle);
      background: linear-gradient(
          135deg,
          rgba(15, 23, 42, 0.95),
          rgba(15, 23, 42, 0.98)
        );
      padding: 10px 11px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .extra-title {
      font-size: 0.8rem;
      color: rgba(209, 213, 219, 0.98);
      text-transform: uppercase;
      letter-spacing: 0.13em;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .extra-title::before {
      content: "";
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: radial-gradient(circle at center, var(--accent), transparent);
      box-shadow: 0 0 12px rgba(168, 85, 255, 0.85);
    }

    .extra-body {
      font-size: 0.76rem;
      color: var(--text-muted);
    }

    .poem-list {
      list-style: none;
      margin: 6px 0 0;
      padding: 0;
      display: grid;
      grid-template-columns: minmax(0, 1fr);
      gap: 3px;
    }

    @media (min-width: 600px) {
      .poem-list {
        grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
      }
    }

    .poem-item {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 4px 6px;
      border-radius: 9px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(31, 41, 55, 0.95);
    }

    .poem-item input[type="checkbox"] {
      width: 13px;
      height: 13px;
      accent-color: var(--accent);
    }

    .poem-item span {
      font-size: 0.74rem;
      color: rgba(229, 231, 235, 0.98);
    }

    .stats-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .stat-pill {
      padding: 5px 9px;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: rgba(15, 23, 42, 0.96);
      font-size: 0.72rem;
      color: rgba(209, 213, 219, 0.96);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .stat-pill span.value {
      color: var(--accent-strong);
      font-weight: 600;
    }

    .papers-list {
      margin: 5px 0 0;
      padding-left: 16px;
      font-size: 0.75rem;
      color: rgba(209, 213, 219, 0.96);
    }

    .papers-list li {
      margin-bottom: 3px;
    }

    .papers-list strong {
      color: var(--accent-strong);
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <header>
      <div class="app-title">
        <div class="app-title-main">
          <span class="app-logo-dot"></span>
          ACC & Belonging ‚Äì Revision Hub
        </div>
        <div class="app-subtitle">Built for AQA Eng Lit & your phone screen</div>
      </div>
      <div class="quick-buttons">
        <button class="pill-btn primary" id="quickAcc">
          <span class="icon">üìñ</span>
          ACC cards
        </button>
        <button class="pill-btn" id="quickBelonging">
          <span class="icon">üìù</span>
          Belonging quotes
        </button>
      </div>
    </header>

    <main>
      <!-- HERO / ACC FRONT PAGE -->
      <section class="card-shell">
        <div class="section-heading">
          <h2>A Christmas Carol ‚Äì Front Page</h2>
          <small>Staves | exam-style questions | quick overview</small>
        </div>
        <div class="hero-grid">
          <div class="hero-panel">
            <div class="hero-title">
              Core plot checkpoints
              <span class="tag">ACC ¬∑ Staves 1‚Äì5</span>
            </div>
            <div class="hero-body">
              Use this as a mental map before you hit the flashcards.
              <ul class="hero-list">
                <li><strong>Stave 1:</strong> Miserly Scrooge, Marley‚Äôs warning, ‚Äúchains I forged in life‚Äù.</li>
                <li><strong>Stave 2:</strong> Past ‚Äì lonely schoolboy, Fezziwig, Belle leaving: where he lost compassion.</li>
                <li><strong>Stave 3:</strong> Present ‚Äì Cratchits, Tiny Tim, Ignorance &amp; Want, ‚ÄúMankind was my business‚Äù.</li>
                <li><strong>Stave 4:</strong> Yet to Come ‚Äì business men, thieves, the corpse, his own grave.</li>
                <li><strong>Stave 5:</strong> Rebirth ‚Äì generous Scrooge, helps Cratchits, ‚Äúas happy as an angel‚Äù.</li>
              </ul>
              <div class="hero-actions">
                <div class="hero-pill">
                  Current focus: <strong>A Christmas Carol</strong>
                </div>
                <div class="hero-pill">
                  Tip: learn <strong>1‚Äì2 quotes</strong> per stave for safety.
                </div>
              </div>
            </div>
          </div>

          <div class="hero-panel">
            <div class="hero-title">
              Random ACC exam question
              <span class="tag">AQA-style</span>
            </div>
            <div class="hero-question-box">
              <div class="hero-question-label">Practice prompt</div>
              <div id="accQuestion" class="hero-question-text">
                How does Dickens present Scrooge‚Äôs attitude to the poor in Stave 1? Write about:
                ‚Ä¢ Scrooge ‚Ä¢ the poor ‚Ä¢ Dickens‚Äô message.
              </div>
              <div class="hero-question-footer">
                <small>Try: plan intro + 2‚Äì3 body paragraphs.</small>
                <button class="btn-ghost" id="newQuestionBtn">
                  <span>New question</span>
                  <span>üé≤</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- FLASHCARD SECTION -->
      <section class="card-shell">
        <div class="section-heading">
          <h2>Active Flashcards</h2>
          <small>Tap the card to flip ¬∑ swipe through your session</small>
        </div>

        <div class="controls-row">
          <div class="control-group">
            <span>Deck</span>
            <div class="select-wrapper">
              <select id="deckSelect" class="select"></select>
            </div>
          </div>

          <div class="control-group">
            <div class="control-chip">
              Session
              <div class="select-wrapper">
                <select id="sessionSize" class="select">
                  <option value="5">5 cards</option>
                  <option value="10" selected>10 cards</option>
                  <option value="20">20 cards</option>
                  <option value="all">All cards</option>
                </select>
              </div>
            </div>

            <button class="order-toggle" id="orderToggle">
              Order:
              <span class="mode" id="orderLabel">Shuffled</span>
            </button>

            <label class="control-chip">
              <input type="checkbox" id="startOnBack" />
              Start on analysis side
            </label>
          </div>
        </div>

        <div class="flashcard-outer">
          <div class="flashcard-frame">
            <div id="flashcard" class="flashcard">
              <div id="flashcardFaceLabel" class="flashcard-face-label">Quote</div>
              <div id="flashcardText" class="flashcard-main-text">
                Loading cards‚Ä¶
              </div>
              <div class="flashcard-meta">
                <small>
                  <span id="flashcardDeckTag" class="deck-tag"></span>
                </small>
                <small id="flashcardIndexLabel"></small>
              </div>
            </div>
            <div class="flashcard-hint">
              Tap anywhere on the card to <span>flip between quote and analysis.</span>
            </div>
          </div>

          <div class="flashcard-footer">
            <div class="progress">
              <div class="progress-bar">
                <div id="progressFill" class="progress-fill"></div>
              </div>
              <span id="progressLabel">0 / 0</span>
            </div>
            <div class="nav-buttons">
              <button id="prevBtn">
                ‚óÄ Prev
              </button>
              <button id="restartBtn">
                ‚Üª Restart session
              </button>
              <button id="nextBtn" class="primary">
                Next ‚ñ∂
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- EXTRAS: CHECKLIST + PAPERS + STATS -->
      <section class="card-shell">
        <div class="section-heading">
          <h2>Extras ‚Äì Belonging & Exam Info</h2>
          <small>Track poems ¬∑ know what‚Äôs on AQA papers</small>
        </div>
        <div class="extras-grid">
          <div class="extra-panel">
            <div class="extra-title">Belonging anthology checklist</div>
            <div class="extra-body">
              Tick when you feel confident on the poem‚Äôs quotes + meaning.
              <ul class="poem-list" id="poemChecklist">
                <!-- Filled by JS -->
              </ul>
            </div>
          </div>

          <div class="extra-panel">
            <div class="extra-title">AQA English ‚Äì Paper contents</div>
            <div class="extra-body">
              Focus for you (Year 11):
              <ul class="papers-list">
                <li>
                  <strong>Eng Lit Paper 1:</strong> Shakespeare + 19th-century novel
                  (that‚Äôs where <strong>ACC</strong> appears if your school chose it).
                </li>
                <li>
                  <strong>Eng Lit Paper 2:</strong> Modern text + Poetry anthology (Belonging if you‚Äôre doing Edexcel) + Unseen poetry.
                </li>
                <li>
                  <strong>Eng Lang Paper 1:</strong> Fiction extract + descriptive / narrative writing.
                </li>
                <li>
                  <strong>Eng Lang Paper 2:</strong> Non-fiction + transactional writing (Q8/9 type tasks).
                </li>
              </ul>
              <div class="stats-row" style="margin-top:6px;">
                <div class="stat-pill">
                  Sessions today:
                  <span class="value" id="statSessions">0</span>
                </div>
                <div class="stat-pill">
                  Cards flipped:
                  <span class="value" id="statCards">0</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script>
    // --------- VERSIONING (so your updated decks actually load) ----------
    const APP_VERSION = "2";

    // --------- DEFAULT DECK DATA ----------
    // ACC is public domain; Belonging quotes are short, exam-style lines from
    // the official Edexcel Belonging anthology and public quote banks.  [oai_citation:0‚Ä°Save My Exams](https://cdn.savemyexams.com/uploads/2023/01/1et0-2p-que-20211123.pdf?utm_source=chatgpt.com)
    const DEFAULT_DECKS = {
      "A Christmas Carol ‚Äì Key Moments & Quotes": [
        {
          front: "Stave 1 ‚Äì Overview\n\nMarley‚Äôs ghost warns Scrooge he‚Äôll wear ‚Äúchains‚Äù of his own selfish life.",
          back:
            "Stave 1 sets Scrooge up as cold and isolated (‚Äúsolitary as an oyster‚Äù), rejects charity, and shows Marley suffering for focusing on profit not people ‚Äì the moral problem Dickens will fix."
        },
        {
          front: "Stave 2 ‚Äì Overview\n\nGhost of Christmas Past shows Scrooge his younger self.",
          back:
            "We see his lonely schooldays, warmth at Fezziwig‚Äôs party, and Belle breaking the engagement. This proves Scrooge wasn‚Äôt always heartless ‚Äì greed slowly replaced love and belonging."
        },
        {
          front: "Stave 3 ‚Äì Overview\n\nGhost of Christmas Present and the Cratchits.",
          back:
            "We see the Cratchits‚Äô loving but poor Christmas, Tiny Tim‚Äôs fragility, and Ignorance & Want. Dickens contrasts Scrooge‚Äôs wealth with their warmth to attack selfish attitudes to the poor."
        },
        {
          front: "Stave 4 ‚Äì Overview\n\nGhost of Christmas Yet to Come and Scrooge‚Äôs death.",
          back:
            "Scrooge is shown businessmen joking about his death, thieves stealing his things, and his own grave. No one mourns him ‚Äì a warning that a loveless life ends in a lonely death."
        },
        {
          front: "Stave 5 ‚Äì Overview\n\nScrooge wakes up changed.",
          back:
            "He is ‚Äúas happy as an angel‚Äù, buys the prize turkey, raises Bob‚Äôs wages and becomes ‚Äúa second father‚Äù to Tiny Tim. Dickens shows redemption is possible if you change your priorities."
        },
        {
          front: "\"solitary as an oyster\" (Stave 1)",
          back:
            "Simile suggests Scrooge is closed off, hard-shelled and difficult to open; but an oyster can hide a pearl, hinting he has potential for goodness if he opens up to others."
        },
        {
          front: "\"Bah! Humbug!\"",
          back:
            "His catchphrase rejects Christmas as nonsense. It symbolises his dismissal of joy, generosity and social responsibility ‚Äì everything Dickens wants the reader to value."
        },
        {
          front: "\"Are there no prisons?\" / \"And the Union workhouses?\"",
          back:
            "Scrooge parrots harsh Victorian attitudes, treating poverty as a crime. Dickens uses this to criticise a system that punishes the poor instead of supporting them."
        },
        {
          front: "\"Mankind was my business!\" ‚Äì Marley",
          back:
            "Marley confesses his sin was caring only about ‚Äútrade‚Äù not people. Dickens‚Äô message: our duty is to humanity, not just profit; otherwise we carry ‚Äòchains‚Äô of guilt like Marley."
        },
        {
          front: "\"A solitary child, neglected by his friends\"",
          back:
            "Scrooge‚Äôs childhood loneliness explains ‚Äì but doesn‚Äôt excuse ‚Äì his later coldness. It shows how lack of love and belonging can twist someone‚Äôs character over time."
        },
        {
          front: "\"Another idol has displaced me\" ‚Äì Belle",
          back:
            "Belle says Scrooge now worships money. Calling it an ‚Äúidol‚Äù suggests a false god ‚Äì Dickens attacks greed as something people wrongly dedicate their lives to."
        },
        {
          front: "\"jolly Giant\" ‚Äì Ghost of Christmas Present",
          back:
            "The spirit is huge, generous and overflowing with food and warmth. He embodies the spirit of Christmas: abundance, laughter and sharing with others."
        },
        {
          front: "\"This boy is Ignorance. This girl is Want.\"",
          back:
            "The personified children show social problems created by neglecting the poor. Dickens warns ‚Äúdoom‚Äù will follow if society ignores ignorance and extreme poverty."
        },
        {
          front: "\"deep black garment\" ‚Äì Ghost of Christmas Yet to Come",
          back:
            "The spirit‚Äôs dark, faceless robe makes it mysterious and terrifying, like the Grim Reaper. It represents the unknown future and the fear of what will happen if Scrooge doesn‚Äôt change."
        },
        {
          front: "Scrooge at his own grave ‚Äì \"trembling\" and begging",
          back:
            "When he sees his name on the gravestone, Scrooge is horrified that his life leads only to fear and loneliness. His terror pushes him to genuinely promise change."
        },
        {
          front: "\"I will honour Christmas in my heart\"",
          back:
            "Scrooge links Christmas to an attitude, not just one day. He commits to kindness and generosity all year ‚Äì what Dickens wants from his readers."
        },
        {
          front: "\"as happy as an angel\" / \"as merry as a school-boy\" (Stave 5)",
          back:
            "Similes show how completely Scrooge has transformed ‚Äì childlike joy replaces bitterness. Dickens ends with a positive, energetic tone to prove redemption is real."
        },
        {
          front: "Tiny Tim ‚Äì \"God bless us, every one!\"",
          back:
            "Tim‚Äôs repeated blessing makes him a symbol of innocence, forgiveness and Christian charity. His survival at the end shows that Scrooge‚Äôs change has real, human impact."
        }
      ],

      "Belonging ‚Äì All 15 Poems": [
        // Nature / childhood cluster
        {
          front: "\"It is the first mild day of March\"",
          back:
            "To My Sister ‚Äì Nature and early spring symbolise new beginnings and simple joy. Belonging comes from shared time outdoors with his sister, not from work or duty."
        },
        {
          front: "\"There is a blessing in the air\"",
          back:
            "To My Sister ‚Äì The air itself feels like a ‚Äòblessing‚Äô, suggesting nature offers spiritual comfort and a sense of peace and belonging outside strict routines."
        },
        {
          front: "\"The morning road is thronged with merry boys\"",
          back:
            "Sunday Dip ‚Äì Collective ‚Äúmerry boys‚Äù show childhood as communal and carefree. Belonging is found in shared play and tradition rather than status or wealth."
        },
        {
          front: "\"And duck about, and try to lose their fears\"",
          back:
            "Sunday Dip ‚Äì The boys literally duck under the water but also try to overcome fear together. Belonging helps them face worries in a safe, playful environment."
        },
        {
          front: "\"Mild the mist upon the hill\"",
          back:
            "Mild the Mist upon the Hill ‚Äì Soft weather mirrors gentle, nostalgic feelings. The hill and mist become symbols of a calm, familiar place the speaker emotionally belongs to."
        },
        {
          front: "\"I am a child once more\"",
          back:
            "Mild the Mist upon the Hill ‚Äì Returning to childhood in memory shows how powerful place is for identity. The speaker belongs to their past as much as the present."
        },
        {
          front: "\"Clear and gentle stream! Known and loved so long\"",
          back:
            "Clear and Gentle Stream ‚Äì The stream is personified as an old friend. Repeated visits show continuity: the speaker‚Äôs sense of self is tied to this stable, natural place."
        },
        {
          front: "\"Many an afternoon of the summer day dreaming here I lay\"",
          back:
            "Clear and Gentle Stream ‚Äì The stream is where the speaker daydreamed as a child. It‚Äôs a private, imaginative space that shapes who they are, so they still feel they belong there."
        },
        {
          front: "\"I remember, I remember, / The house where I was born\"",
          back:
            "I Remember, I Remember ‚Äì Repetition shows obsession with childhood home. Belonging is rooted in early memories, even though adult life feels heavier and less hopeful."
        },
        {
          front: "\"My spirit flew in feathers then, / That is so heavy now\"",
          back:
            "I Remember, I Remember ‚Äì Contrasts light ‚Äòfeathers‚Äô with ‚Äòheavy‚Äô spirit. Growing up has made the speaker feel less free, less at home in the world than in childhood."
        },

        // Urban & migration / identity
        {
          front: "\"Wild seabirds / and fishermen pushing out to sea\"",
          back:
            "Island Man ‚Äì Natural, Caribbean images show a lively community. The man‚Äôs mind returns here each morning, so he emotionally belongs to this island more than London."
        },
        {
          front: "\"Comes back to sands / of a grey metallic soar\"",
          back:
            "Island Man ‚Äì The shift to grey, metallic London sounds harsh and industrial. He is physically in London but spiritually pulled back to the island ‚Äì split sense of belonging."
        },
        {
          front: "\"We can all be refugees\"",
          back:
            "We Refugees ‚Äì Zephaniah universalises the refugee experience. Belonging becomes fragile and conditional; anyone could lose their home due to events beyond their control."
        },
        {
          front: "\"We can be hated by someone / for being someone\"",
          back:
            "We Refugees ‚Äì Simple, direct statement that identity alone can cause hatred. It criticises prejudice and shows how belonging can be denied for reasons you can‚Äôt change."
        },
        {
          front: "\"Island man heaves himself / Another London day\"",
          back:
            "Island Man ‚Äì The verb ‚Äúheaves‚Äù suggests effort and reluctance. He forces himself into London life, implying that he doesn‚Äôt feel fully at home there."
        },
        {
          front: "\"Peckham Rye lane is tight / As damp and crammed as a coconut shell\"",
          back:
            "Peckham Rye Lane ‚Äì The simile makes the street feel crowded but alive. The poem presents busy, multicultural London as a place where many different people still belong together."
        },
        {
          front: "\"Each person is a sturdy hairbrush bristle\"",
          back:
            "Peckham Rye Lane ‚Äì People are compared to bristles in a brush: individually small but together forming something strong. Suggests community strength in a packed urban space."
        },

        // Identity / language cluster
        {
          front: "\"Us takes in undulations ‚Äì / each wave in the sea\"",
          back:
            "Us ‚Äì ‚ÄòUs‚Äô is compared to waves: constantly moving and hard to pin down. Kunial shows belonging as fluid and complicated, not a simple, fixed label."
        },
        {
          front: "\"Oi, you, tell us where yer from\"",
          back:
            "Us ‚Äì Colloquial voice shows how others demand identity labels. The phrase suggests pressure to explain your background, highlighting how belonging can feel like a test."
        },
        {
          front: "\"Dying to be French, dying to shrug and pout\"",
          back:
            "In Wales, wanting to be Italian ‚Äì The speaker romanticises ‚Äòbeing French‚Äô as cool and expressive. As a teenager, she longs to belong to a more glamorous identity than her own."
        },
        {
          front: "\"Is there a name for that thing / you do when you are young?\"",
          back:
            "In Wales, wanting to be Italian ‚Äì Rhetorical question captures the universal teenage feeling of wanting to be someone else. Belonging feels unfinished and experimental."
        },
        {
          front: "\"Being sixteen in Wales, longing to be Italian\"",
          back:
            "In Wales, wanting to be Italian ‚Äì Very specific moment: stuck in one place, dreaming of another. Shows how belonging is partly about imagination and stereotype, not just reality."
        },
        {
          front: "\"think me unfinished ‚Äì / a child who never sloughed off the childish estate\"",
          back:
            "Kumukanda ‚Äì The speaker sees himself as ‚Äòunfinished‚Äô without the traditional initiation. He feels caught between cultures, unsure where he fully belongs."
        },
        {
          front: "\"I was raised in a strange land\"",
          back:
            "Kumukanda ‚Äì Being raised somewhere ‚Äòstrange‚Äô highlights distance from ancestral culture. His identity is shaped by two places, so belonging is complicated and split."
        },
        {
          front: "\"Some people would deny that I‚Äôm Jamaican British\"",
          back:
            "Jamaican British ‚Äì Others question his identity because of how he looks or speaks. Belonging here is something debated and policed rather than simply accepted."
        },
        {
          front: "\"you cannot love sugar and hate your sweetness\"",
          back:
            "Jamaican British ‚Äì His father‚Äôs metaphor means you can‚Äôt enjoy Jamaican culture but reject Jamaican people. It‚Äôs a reminder to accept your whole mixed identity."
        },
        {
          front: "\"I come from a musical place / Where they shoot me for my song\"",
          back:
            "We Refugees ‚Äì Juxtaposes ‚Äòmusical‚Äô and violent persecution. Even joyful culture becomes dangerous under oppression, forcing people to flee the place they belong to."
        },

        // Home & memory
        {
          front: "\"It may be at war, it may be sick with tyrants\"",
          back:
            "The √âmigr√©e ‚Äì Her country is politically damaged, but she still loves it. Shows conflict between harsh reality and emotional loyalty to your homeland."
        },
        {
          front: "\"I am branded by an impression of sunlight\"",
          back:
            "The √âmigr√©e ‚Äì ‚ÄòBranded‚Äô suggests a permanent mark; ‚Äòsunlight‚Äô is positive. Her identity is stamped by an idealised memory of home, even if the present is dark."
        },
        {
          front: "\"I comb its hair and love its shining eyes\"",
          back:
            "The √âmigr√©e ‚Äì Personifying the city like a loved child or friend shows deep affection. She still nurtures the idea of her home, even from a distance."
        },
        {
          front: "\"an ugly collection\"",
          back:
            "My Mother‚Äôs Kitchen ‚Äì The mismatched plates look ‚Äòugly‚Äô, but they carry family history. They symbolise how a messy, migrant life can still hold powerful belonging."
        },
        {
          front: "\"Planning another escape\"",
          back:
            "My Mother‚Äôs Kitchen ‚Äì Repeated escapes show instability. The family never fully settles, so belonging is temporary and packed away in objects and memories."
        },
        {
          front: "\"I will never inherit my mother‚Äôs trees\"",
          back:
            "My Mother‚Äôs Kitchen ‚Äì She can inherit kitchen objects but not the trees of her homeland. Shows the limits of inheritance: she can‚Äôt fully inherit the roots of her mother‚Äôs home."
        },
        {
          front: "\"Ah! We both of us are alter‚Äôd, and now we talk no more\"",
          back:
            "Captain Cook (To My Brother) ‚Äì The siblings have grown apart. Physical distance and adulthood weaken their bond, questioning how stable belonging in family really is."
        },
        {
          front: "\"We leave in leaving childhood, life‚Äôs fairy land behind\"",
          back:
            "Captain Cook (To My Brother) ‚Äì Childhood is a magical ‚Äòfairy land‚Äô that vanishes. Growing up means losing that simple, shared world where you once belonged together."
        }
      ],

      "English Exams ‚Äì Quick Info & Tips": [
        {
          front: "Eng Lit Paper 2 ‚Äì Overall structure",
          back:
            "Section A: Modern prose/drama.\nSection B: Poetry anthology comparison.\nSection C: Unseen poetry (single poem + comparison).\n\nUse this deck mainly to remind yourself what each section expects."
        },
        {
          front: "Unseen poetry ‚Äì 5-step plan",
          back:
            "1) Read once for vibe (emotion / situation).\n2) Read again and highlight language, structure, form.\n3) Jot 3‚Äì4 mini points (what + how + why).\n4) Turn them into paragraphs.\n5) Finish with a short conclusion about message + tone."
        },
        {
          front: "Anthology comparison ‚Äì what examiners want",
          back:
            "You must: (1) Answer the question (theme/idea). (2) Write about BOTH poems. (3) Compare ‚Äì similarities and differences. (4) Use quotes. (5) Comment on methods (language/structure) and context where relevant."
        },
        {
          front: "Timed essay ‚Äì basic paragraph frame",
          back:
            "Point: answer the question.\nEvidence: short, accurate quote.\nMethod: zoom on a word / technique.\nExplain: effect + what it suggests about the idea.\nLink: back to question or compare to other poem."
        }
      ]
    };

    const ACC_QUESTIONS = [
      "How does Dickens present Scrooge‚Äôs attitude to the poor in Stave 1? Write about: ‚Ä¢ Scrooge ‚Ä¢ the poor ‚Ä¢ Dickens‚Äô message.",
      "How does Dickens show the importance of family in A Christmas Carol? Write about: ‚Ä¢ the Cratchits ‚Ä¢ Scrooge‚Äôs changing attitudes.",
      "How does Dickens use the Ghost of Christmas Present to criticise Victorian society? Refer to: ‚Ä¢ what the spirit shows Scrooge ‚Ä¢ Ignorance and Want.",
      "How is the theme of redemption presented in A Christmas Carol? Write about: ‚Ä¢ Scrooge at the start ‚Ä¢ key moments of change ‚Ä¢ Scrooge at the end.",
      "How does Dickens present poverty in the novella? Refer to: ‚Ä¢ the Cratchits ‚Ä¢ Tiny Tim ‚Ä¢ any other characters of your choice."
    ];

    const BELONGING_POEMS = [
      "To My Sister ‚Äì William Wordsworth",
      "Sunday Dip ‚Äì John Clare",
      "Mild the Mist upon the Hill ‚Äì Emily Bront√´",
      "Clear and Gentle Stream ‚Äì Robert Bridges",
      "I Remember, I Remember ‚Äì Thomas Hood",
      "Island Man ‚Äì Grace Nichols",
      "Peckham Rye Lane ‚Äì Amy Blakemore",
      "We Refugees ‚Äì Benjamin Zephaniah",
      "Us ‚Äì Zaffar Kunial",
      "In Wales, wanting to be Italian ‚Äì Imtiaz Dharker",
      "Kumukanda ‚Äì Kayo Chingonyi",
      "Jamaican British ‚Äì Raymond Antrobus",
      "My Mother‚Äôs Kitchen ‚Äì Choman Hardi",
      "Captain Cook (To My Brother) ‚Äì Letitia Elizabeth Landon",
      "The √âmigr√©e ‚Äì Carol Rumens"
    ];

    // --------- STATE ----------
    let decks = {};
    let currentDeckName = "";
    let currentDeck = [];
    let studyOrder = [];
    let studyIndex = 0;
    let showBack = false;
    let orderedMode = false; // false = shuffled, true = in order

    let sessionCount = 0;
    let cardFlipCount = 0;

    // --------- HELPERS ----------
    function shuffle(array) {
      const arr = array.slice();
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    function loadState() {
      const raw = localStorage.getItem("rev_app_state");
      if (raw) {
        try {
          const parsed = JSON.parse(raw);
          if (parsed.version === APP_VERSION && parsed.decks) {
            decks = parsed.decks;
          } else {
            decks = structuredClone(DEFAULT_DECKS);
          }
          sessionCount = parsed.sessions || 0;
          cardFlipCount = parsed.cards || 0;
        } catch {
          decks = structuredClone(DEFAULT_DECKS);
        }
      } else {
        decks = structuredClone(DEFAULT_DECKS);
      }
      updateStatsUI();
    }

    function saveState() {
      const payload = {
        version: APP_VERSION,
        decks,
        sessions: sessionCount,
        cards: cardFlipCount
      };
      localStorage.setItem("rev_app_state", JSON.stringify(payload));
    }

    function buildDeckSelect() {
      const deckSelect = document.getElementById("deckSelect");
      deckSelect.innerHTML = "";
      Object.keys(decks).forEach((name) => {
        const opt = document.createElement("option");
        opt.value = name;
        opt.textContent = name;
        deckSelect.appendChild(opt);
      });
    }

    function resetStudyOrder() {
      if (!currentDeck || currentDeck.length === 0) {
        studyOrder = [];
        studyIndex = 0;
        return;
      }
      const sizeSelect = document.getElementById("sessionSize");
      let size;
      if (sizeSelect.value === "all") {
        size = currentDeck.length;
      } else {
        size = Math.min(parseInt(sizeSelect.value, 10), currentDeck.length);
      }
      const indices = [...Array(currentDeck.length).keys()];
      const base = orderedMode ? indices : shuffle(indices);
      studyOrder = base.slice(0, size);
      studyIndex = 0;
      const startOnBack = document.getElementById("startOnBack").checked;
      showBack = !!startOnBack;
    }

    function renderCard() {
      const cardElem = document.getElementById("flashcardText");
      const labelElem = document.getElementById("flashcardFaceLabel");
      const deckTagElem = document.getElementById("flashcardDeckTag");
      const indexLabelElem = document.getElementById("flashcardIndexLabel");
      const progressFill = document.getElementById("progressFill");
      const progressLabel = document.getElementById("progressLabel");

      if (!currentDeck || currentDeck.length === 0 || studyOrder.length === 0) {
        labelElem.textContent = "Quote";
        cardElem.textContent = "No cards in this deck yet.";
        deckTagElem.textContent = currentDeckName || "";
        indexLabelElem.textContent = "";
        progressFill.style.width = "0%";
        progressLabel.textContent = "0 / 0";
        return;
      }

      const currentIndex = studyOrder[studyIndex];
      const card = currentDeck[currentIndex];

      labelElem.textContent = showBack ? "Analysis" : "Quote";
      cardElem.textContent = showBack ? card.back : card.front;
      deckTagElem.textContent = currentDeckName;
      indexLabelElem.textContent = `${studyIndex + 1} / ${studyOrder.length}`;

      const progress = ((studyIndex + 1) / studyOrder.length) * 100;
      progressFill.style.width = `${progress}%`;
      progressLabel.textContent = `${studyIndex + 1} / ${studyOrder.length}`;
    }

    function goNext() {
      if (studyOrder.length === 0) return;
      if (studyIndex < studyOrder.length - 1) {
        studyIndex++;
      }
      showBack = false;
      cardFlipCount++;
      updateStatsUI();
      saveState();
      renderCard();
    }

    function goPrev() {
      if (studyOrder.length === 0) return;
      if (studyIndex > 0) {
        studyIndex--;
      }
      showBack = false;
      cardFlipCount++;
      updateStatsUI();
      saveState();
      renderCard();
    }

    function restartSession() {
      resetStudyOrder();
      sessionCount++;
      saveState();
      updateStatsUI();
      renderCard();
    }

    function selectDeck(name) {
      const deckSelect = document.getElementById("deckSelect");
      if (name && decks[name]) {
        deckSelect.value = name;
      } else {
        name = deckSelect.value;
      }
      currentDeckName = name;
      currentDeck = decks[name] || [];
      resetStudyOrder();
      renderCard();
    }

    function randomAccQuestion() {
      const el = document.getElementById("accQuestion");
      const idx = Math.floor(Math.random() * ACC_QUESTIONS.length);
      el.textContent = ACC_QUESTIONS[idx];
    }

    function updateStatsUI() {
      document.getElementById("statSessions").textContent = sessionCount;
      document.getElementById("statCards").textContent = cardFlipCount;
    }

    function buildPoemChecklist() {
      const list = document.getElementById("poemChecklist");
      list.innerHTML = "";
      BELONGING_POEMS.forEach((title) => {
        const id = "poem_" + title.replace(/[^a-z0-9]+/gi, "_").toLowerCase();
        const li = document.createElement("li");
        li.className = "poem-item";
        const cb = document.createElement("input");
        cb.type = "checkbox";
        cb.id = id;
        cb.checked = localStorage.getItem(id) === "1";
        cb.addEventListener("change", () => {
          localStorage.setItem(id, cb.checked ? "1" : "0");
        });
        const span = document.createElement("span");
        span.textContent = title;
        li.appendChild(cb);
        li.appendChild(span);
        list.appendChild(li);
      });
    }

    // --------- INIT ----------
    document.addEventListener("DOMContentLoaded", () => {
      loadState();
      buildDeckSelect();
      buildPoemChecklist();

      const deckSelect = document.getElementById("deckSelect");
      const sessionSelect = document.getElementById("sessionSize");
      const flashcardElem = document.getElementById("flashcard");
      const orderToggle = document.getElementById("orderToggle");
      const orderLabel = document.getElementById("orderLabel");
      const startOnBack = document.getElementById("startOnBack");

      deckSelect.addEventListener("change", () => {
        selectDeck();
      });

      sessionSelect.addEventListener("change", () => {
        resetStudyOrder();
        renderCard();
      });

      orderToggle.addEventListener("click", () => {
        orderedMode = !orderedMode;
        orderLabel.textContent = orderedMode ? "In order" : "Shuffled";
        resetStudyOrder();
        renderCard();
      });

      startOnBack.addEventListener("change", () => {
        showBack = !!startOnBack.checked;
        renderCard();
      });

      flashcardElem.addEventListener("click", () => {
        if (!currentDeck || currentDeck.length === 0) return;
        showBack = !showBack;
        cardFlipCount++;
        updateStatsUI();
        saveState();
        renderCard();
      });

      document.getElementById("nextBtn").addEventListener("click", goNext);
      document.getElementById("prevBtn").addEventListener("click", goPrev);
      document.getElementById("restartBtn").addEventListener("click", restartSession);

      document.getElementById("newQuestionBtn").addEventListener("click", randomAccQuestion);

      document.getElementById("quickAcc").addEventListener("click", () => {
        selectDeck("A Christmas Carol ‚Äì Key Moments & Quotes");
        document.querySelector(".app-shell").scrollIntoView({ behavior: "smooth" });
      });

      document.getElementById("quickBelonging").addEventListener("click", () => {
        selectDeck("Belonging ‚Äì All 15 Poems");
        document.querySelector(".app-shell").scrollIntoView({ behavior: "smooth" });
      });

      // Default: ACC deck selected
      const defaultDeckName = "A Christmas Carol ‚Äì Key Moments & Quotes";
      if (decks[defaultDeckName]) {
        selectDeck(defaultDeckName);
      } else {
        const firstName = Object.keys(decks)[0];
        selectDeck(firstName);
      }
      randomAccQuestion();
    });
  </script>
</body>
</html>
